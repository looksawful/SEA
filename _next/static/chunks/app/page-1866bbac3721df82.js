(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9177:function(e,t,s){Promise.resolve().then(s.bind(s,4965))},3145:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var a=s(8461),l=s.n(a)},8461:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return i},getImageProps:function(){return r}});let a=s(7043),l=s(5346),n=s(5878),c=a._(s(5084));function r(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/painful/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let i=n.Image},4965:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(7437),l=s(2265),n=s(8614),c=s(521),r=s(3145),i=s(9376),d=s(8832),x=s(996),o=s(2040),m=s(2099);s(7051),s(896),s(6371);var u=s(4350);s(3782),s(8443);var h=s(367),f=s(2746),j=s(6926),g=s(6579),p=s(9089);function v(){let[e,t]=(0,l.useState)("menu"),[s,f]=(0,l.useState)(!1),[v,y]=(0,l.useState)(!1),[w,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(""),[z,_]=(0,l.useState)("list"),{stats:O,bestStreak:E,soundEnabled:W,toggleSound:P,resetAll:M,results:G,customQuestions:L}=(0,d.g)(),I=(0,i.useRouter)(),R=C.trim().toLowerCase(),U=R?x.n.filter(e=>{let t=x.W[e];return t.name.toLowerCase().includes(R)||t.description.toLowerCase().includes(R)}):x.n,Z=e=>"quiz"===e?N(g.S):j.y.includes(e)?N(j.u[e]||[]):null,A=e=>{let t=["Л ".concat(e.easy),"С ".concat(e.medium),"Т ".concat(e.hard),"Э ".concat(e.expert)];return e.unknown>0&&t.push("? ".concat(e.unknown)),t.join(" • ")};return((0,l.useEffect)(()=>{f(!0)},[]),s)?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)("header",{className:"sticky top-0 z-10 border-b border-subtle bg-[color:var(--surface-1-80)] backdrop-blur",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("button",{onClick:()=>t("menu"),className:"flex items-center gap-2",children:[(0,a.jsx)(r.default,{src:"/brand/logo-mark.svg",alt:"",width:36,height:36,className:"h-9 w-9"}),(0,a.jsx)("span",{className:"text-lg font-display font-semibold",children:"painful"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{k(null),y(!0)},className:"flex items-center gap-2 px-3 py-2 text-sm rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",title:"Свои вопросы",children:[(0,a.jsx)(p.O1O,{className:"text-base"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Свои вопросы"})]}),(0,a.jsxs)("button",{onClick:P,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",title:W?"Выключить звук":"Включить звук","aria-pressed":W,children:[W?(0,a.jsx)(p.rxG,{className:"text-base"}):(0,a.jsx)(p.xZH,{className:"text-base"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:W?"Звук включен":"Звук выключен"})]})]})]})}),(0,a.jsx)("main",{className:"flex-1 p-4 w-full flex items-center justify-center",children:(0,a.jsxs)(n.M,{mode:"wait",children:["menu"===e&&(0,a.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o.z,{onClick:()=>t("games"),fullWidth:!0,size:"lg",children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(p.hON,{className:"text-base"}),"Выбрать упражнение"]})}),(0,a.jsx)(o.z,{onClick:()=>t("random"),variant:"secondary",fullWidth:!0,size:"lg",children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(p.AyN,{className:"text-base"}),"Случайный режим"]})}),(0,a.jsx)(o.z,{onClick:()=>t("stats"),variant:"ghost",fullWidth:!0,children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(p.NMh,{className:"text-base"}),"Статистика"]})})]}),O.totalGames>0&&(0,a.jsx)(m.Card,{className:"mt-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:O.totalScore.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-muted",children:"Всего очков"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:O.totalGames}),(0,a.jsx)("div",{className:"text-xs text-muted",children:"Игр"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:E}),(0,a.jsx)("div",{className:"text-xs text-muted",children:"Лучшая серия"})]})]})}),(0,a.jsx)("div",{className:"text-center text-xs text-soft mt-8",children:"Горячие клавиши: 1-4 выбор • P пауза • Esc выход"})]},"menu"),"games"===e&&(0,a.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 w-full max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>t("menu"),className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(p.x_l,{})}),(0,a.jsx)("h2",{className:"text-xl font-display font-semibold flex-1",children:"Выбери упражнение"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>_("list"),className:"w-9 h-9 rounded-xl border border-subtle flex items-center justify-center ".concat("list"===z?"bg-surface-3 text-strong":"bg-surface-2 text-muted hover:text-strong"),"aria-pressed":"list"===z,title:"Список",children:(0,a.jsx)(p.Fm7,{})}),(0,a.jsx)("button",{onClick:()=>_("grid"),className:"w-9 h-9 rounded-xl border border-subtle flex items-center justify-center ".concat("grid"===z?"bg-surface-3 text-strong":"bg-surface-2 text-muted hover:text-strong"),"aria-pressed":"grid"===z,title:"Плитка",children:(0,a.jsx)(p.xyo,{})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl border border-subtle bg-surface-2",children:[(0,a.jsx)(p.U41,{className:"text-muted"}),(0,a.jsx)("input",{value:C,onChange:e=>S(e.target.value),className:"flex-1 bg-transparent text-sm text-strong placeholder:text-soft focus:outline-none",placeholder:"Поиск по названию или описанию","aria-label":"Поиск упражнений"}),C.length>0&&(0,a.jsx)("button",{onClick:()=>S(""),className:"text-xs text-muted hover:text-strong",children:"Очистить"})]}),(0,a.jsx)("div",{className:"grid"===z?"grid gap-3 sm:grid-cols-2 lg:grid-cols-3":"grid gap-3",children:U.map(e=>{var t;let s=x.W[e],l=O.gamesPlayed[e]||0,n=O.accuracy[e],c=(null===(t=L[e])||void 0===t?void 0:t.length)||0,r=s.icon,i=Z(e),d=[...G].reverse().find(t=>t.gameId===e),o=d?Math.round(d.correct/Math.max(1,d.total)*100):null;return(0,a.jsxs)(m.Card,{className:"transition-colors",onClick:()=>I.push("/game/".concat(e)),children:[(0,a.jsxs)("div",{className:"grid"===z?"flex flex-col gap-4":"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-surface-2 border border-subtle flex items-center justify-center text-accent ".concat("grid"===z?"":"flex-shrink-0"),children:(0,a.jsx)(r,{className:"text-2xl"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium",children:s.name}),(0,a.jsx)("div",{className:"text-sm text-muted truncate",children:s.description}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-2 space-y-1",children:[i?(0,a.jsxs)("div",{children:["Вопросов: ",i.total," • Сложность: ",A(i)]}):(0,a.jsx)("div",{children:"Вопросы: генеративные • Сложность: адаптивная"}),(0,a.jsxs)("div",{children:["Сыграно: ",l," • Точность: ",Math.round(n||0),"%"]}),(0,a.jsxs)("div",{children:["Последний результат:"," ",d?"".concat(d.correct,"/").concat(d.total," (").concat(o,"%)"):"—"]}),c>0&&(0,a.jsxs)("div",{children:["Свои вопросы: ",c]})]})]}),(0,a.jsx)("div",{className:"grid"===z?"flex justify-between gap-2":"text-soft",children:"grid"===z?(0,a.jsx)("div",{className:"text-soft self-center",children:(0,a.jsx)(p.Z1Y,{})}):(0,a.jsx)(p.Z1Y,{})})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),k(e),y(!0)},className:"inline-flex items-center gap-2 px-3 py-2 text-xs rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",children:[(0,a.jsx)(p.wEH,{className:"text-xs"}),"Добавить вопросы"]}),(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),k(e),y(!0)},className:"inline-flex items-center gap-2 px-3 py-2 text-xs rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",children:[(0,a.jsx)(p.tU3,{className:"text-xs"}),"Редактировать"]})]})]},e)})}),0===U.length&&(0,a.jsx)("div",{className:"text-center text-sm text-muted py-8",children:"Ничего не найдено. Попробуй другое слово."})]},"games"),"random"===e&&(0,a.jsx)("div",{className:"w-full max-w-4xl",children:(0,a.jsx)(b,{onBack:()=>t("menu")})}),"stats"===e&&(0,a.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 w-full max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>t("menu"),className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(p.x_l,{})}),(0,a.jsx)("h2",{className:"text-xl font-display font-semibold",children:"Статистика"})]}),(0,a.jsx)(m.Card,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:O.totalScore.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Всего очков"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:O.totalGames}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Игр сыграно"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:E}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Лучшая серия"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-mono font-bold",children:[Object.values(O.accuracy).length>0?Math.round(Object.values(O.accuracy).reduce((e,t)=>e+t,0)/Object.values(O.accuracy).length):0,"%"]}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Средняя точность"})]})]})}),(0,a.jsx)("h3",{className:"font-medium mt-6 mb-3 text-strong",children:"По играм"}),(0,a.jsx)("div",{className:"space-y-2",children:x.n.map(e=>{let t=x.W[e],s=O.gamesPlayed[e]||0,l=O.accuracy[e]||0,n=t.icon;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-surface-2 border border-subtle rounded-lg",children:[(0,a.jsx)("span",{className:"w-9 h-9 rounded-xl bg-surface border border-subtle flex items-center justify-center text-accent",children:(0,a.jsx)(n,{className:"text-lg"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"text-sm font-medium truncate",children:t.name})}),(0,a.jsxs)("div",{className:"text-right text-sm",children:[(0,a.jsx)("div",{className:"font-mono",children:s}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[Math.round(l),"%"]})]})]},e)})}),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsx)(o.z,{onClick:()=>{confirm("Сбросить всю статистику?")&&M()},variant:"danger",fullWidth:!0,children:"Сбросить статистику"})})]},"stats")]})}),v&&(0,a.jsx)(h.$g,{onClose:()=>{y(!1),k(null)},initialGameId:null!=w?w:void 0})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u.Skeleton,{className:"h-10 w-10 rounded-2xl"}),(0,a.jsx)(u.Skeleton,{className:"h-6 w-32"})]}),(0,a.jsx)(u.Skeleton,{className:"h-32 w-full rounded-3xl"}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(u.Skeleton,{className:"h-12 w-full rounded-xl"}),(0,a.jsx)(u.Skeleton,{className:"h-12 w-full rounded-xl"}),(0,a.jsx)(u.Skeleton,{className:"h-10 w-2/3 rounded-xl"})]})]})})}let N=e=>e.reduce((e,t)=>{let s=t.difficulty||"unknown";return"easy"===s?e.easy+=1:"medium"===s?e.medium+=1:"hard"===s?e.hard+=1:"expert"===s?e.expert+=1:e.unknown+=1,e.total+=1,e},{easy:0,medium:0,hard:0,expert:0,unknown:0,total:0});function b(e){let{onBack:t}=e,s=(0,i.useRouter)(),[n,r]=(0,l.useState)([]);if((0,l.useEffect)(()=>{r((0,f.TV)([...x.n]))},[]),0===n.length)return(0,a.jsx)("div",{className:"text-muted",children:"Загрузка..."});let d=n[0],m=x.W[d].icon,u=n.slice(1);return(0,a.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:t,className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(p.x_l,{})}),(0,a.jsx)("h2",{className:"text-xl font-display font-semibold",children:"Случайный режим"})]}),(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsxs)("div",{className:"text-sm text-muted mb-2",children:["Игра ",1," из ",n.length]}),(0,a.jsx)("div",{className:"text-4xl mb-2 text-accent",children:(0,a.jsx)(m,{})}),(0,a.jsx)("div",{className:"text-xl font-medium",children:x.W[d].name})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(o.z,{onClick:t,variant:"ghost",fullWidth:!0,children:"Отмена"}),(0,a.jsx)(o.z,{onClick:()=>{let e=u.length>0?"?next=".concat(encodeURIComponent(JSON.stringify(u))):"";s.push("/game/".concat(d).concat(e))},fullWidth:!0,children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(p.gmG,{className:"text-base"}),"Начать"]})})]}),(0,a.jsx)("div",{className:"flex gap-1 justify-center mt-4",children:n.map((e,t)=>(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(0===t?"bg-[color:var(--accent)]":"bg-surface-3")},t))})]})}},8443:function(e,t,s){"use strict";s.d(t,{LinkButton:function(){return n}});var a=s(7437),l=s(7648);let n=e=>{let{href:t,children:s,variant:n="primary",size:c="md",fullWidth:r=!1,className:i=""}=e;return(0,a.jsx)(l.default,{href:t,className:"".concat("inline-flex items-center justify-center gap-2 relative font-medium rounded-xl transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[color:var(--accent)] focus-visible:ring-offset-[color:var(--surface-0)]"," ").concat({primary:"bg-accent text-white hover:bg-[color:var(--accent-strong)]",secondary:"bg-surface-2 text-strong hover:bg-surface-3",ghost:"bg-transparent text-muted hover:bg-surface-2",danger:"bg-[color:var(--danger)] text-white hover:bg-[color:var(--danger-strong)]"}[n]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[c]," ").concat(r?"w-full":""," ").concat(i),children:s})}}},function(e){e.O(0,[699,521,869,308,77,971,117,744],function(){return e(e.s=9177)}),_N_E=e.O()}]);