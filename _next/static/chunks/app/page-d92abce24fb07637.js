(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9177:function(e,s,t){Promise.resolve().then(t.bind(t,4965))},4965:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(7437),l=t(2265),c=t(8614),n=t(521),r=t(9376),i=t(8832),d=t(996),x=t(2040),o=t(2099);t(7051),t(896),t(6371);var m=t(4350);t(3782),t(8443);var u=t(367),h=t(2746),f=t(6926),j=t(6579),g=t(9089);function p(){let[e,s]=(0,l.useState)("menu"),[t,h]=(0,l.useState)(!1),[p,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(null),[k,C]=(0,l.useState)(""),[S,E]=(0,l.useState)("list"),{stats:z,bestStreak:W,soundEnabled:O,toggleSound:_,resetAll:M,results:G,customQuestions:L}=(0,i.g)(),P=(0,r.useRouter)(),A="grid"===S,I=k.trim().toLowerCase(),R=I?d.n.filter(e=>{let s=d.W[e];return s.name.toLowerCase().includes(I)||s.description.toLowerCase().includes(I)}):d.n,U=e=>"quiz"===e?b(j.S):f.y.includes(e)?b(f.u[e]||[]):null;return((0,l.useEffect)(()=>{h(!0)},[]),t)?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)("header",{className:"sticky top-0 z-10 border-b border-subtle bg-[color:var(--surface-1-80)] backdrop-blur",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:()=>s("menu"),className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-lg font-display font-semibold",children:"Awful-Exercises"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{w(null),v(!0)},className:"flex items-center gap-2 px-3 py-2 text-sm rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",title:"Свои вопросы",children:[(0,a.jsx)(g.O1O,{className:"text-base"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Свои вопросы"})]}),(0,a.jsxs)("button",{onClick:_,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",title:O?"Выключить звук":"Включить звук","aria-pressed":O,children:[O?(0,a.jsx)(g.rxG,{className:"text-base"}):(0,a.jsx)(g.xZH,{className:"text-base"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:O?"Звук включен":"Звук выключен"})]})]})]})}),(0,a.jsx)("main",{className:"flex-1 p-4 pb-24 sm:pb-4 w-full flex items-center justify-center",children:(0,a.jsxs)(c.M,{mode:"wait",children:["menu"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6 w-full max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"bg-surface border border-subtle rounded-3xl p-6 shadow-card space-y-3",children:[(0,a.jsx)(x.z,{onClick:()=>s("games"),fullWidth:!0,size:"lg",children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(g.hON,{className:"text-base"}),"Выбрать упражнение"]})}),(0,a.jsx)(x.z,{onClick:()=>s("random"),variant:"secondary",fullWidth:!0,size:"lg",children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(g.AyN,{className:"text-base"}),"Случайный режим"]})}),(0,a.jsx)(x.z,{onClick:()=>s("stats"),variant:"ghost",fullWidth:!0,children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(g.NMh,{className:"text-base"}),"Статистика"]})}),(0,a.jsx)("div",{className:"text-center text-xs text-soft pt-2 hidden sm:block",children:"Горячие клавиши: 1-4 выбор • P пауза • Esc выход"})]}),z.totalGames>0&&(0,a.jsx)(o.Card,{className:"mt-8 shadow-card",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:z.totalScore.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-muted",children:"Всего очков"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:z.totalGames}),(0,a.jsx)("div",{className:"text-xs text-muted",children:"Игр"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:W}),(0,a.jsx)("div",{className:"text-xs text-muted",children:"Лучшая серия"})]})]})})]},"menu"),"games"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 w-full max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[(0,a.jsx)("button",{onClick:()=>s("menu"),className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(g.x_l,{})}),(0,a.jsx)("h2",{className:"text-xl font-display font-semibold flex-1",children:"Выбери упражнение"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto justify-end",children:[(0,a.jsx)("button",{onClick:()=>E("list"),className:"w-9 h-9 rounded-xl border border-subtle flex items-center justify-center ".concat("list"===S?"bg-surface-3 text-strong":"bg-surface-2 text-muted hover:text-strong"),"aria-pressed":"list"===S,title:"Список",children:(0,a.jsx)(g.Fm7,{})}),(0,a.jsx)("button",{onClick:()=>E("grid"),className:"w-9 h-9 rounded-xl border border-subtle flex items-center justify-center ".concat("grid"===S?"bg-surface-3 text-strong":"bg-surface-2 text-muted hover:text-strong"),"aria-pressed":"grid"===S,title:"Плитка",children:(0,a.jsx)(g.xyo,{})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl border border-subtle bg-surface-2",children:[(0,a.jsx)(g.U41,{className:"text-muted"}),(0,a.jsx)("input",{value:k,onChange:e=>C(e.target.value),className:"flex-1 bg-transparent text-sm text-strong placeholder:text-soft focus:outline-none",placeholder:"Поиск по названию или описанию","aria-label":"Поиск упражнений"}),k.length>0&&(0,a.jsx)("button",{onClick:()=>C(""),className:"text-xs text-muted hover:text-strong",children:"Очистить"})]}),(0,a.jsx)("div",{className:A?"grid gap-3 grid-cols-2 sm:grid-cols-2 lg:grid-cols-3":"grid gap-3",children:R.map(e=>{var s;let t=d.W[e],l=z.gamesPlayed[e]||0,c=z.accuracy[e],n=(null===(s=L[e])||void 0===s?void 0:s.length)||0,r=t.icon,i=U(e),x=[...G].reverse().find(s=>s.gameId===e),m=x?Math.round(x.correct/Math.max(1,x.total)*100):null;return(0,a.jsxs)(o.Card,{className:"transition-colors shadow-card min-w-0",padding:A?"sm":"md",onClick:()=>P.push("/game/".concat(e)),children:[(0,a.jsxs)("div",{className:A?"flex flex-col gap-3":"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"".concat(A?"w-10 h-10":"w-12 h-12"," rounded-2xl bg-surface-2 border border-subtle flex items-center justify-center text-accent ").concat(A?"":"flex-shrink-0"),children:(0,a.jsx)(r,{className:A?"text-xl":"text-2xl"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:A?"font-medium text-sm sm:text-base":"font-medium",children:t.name}),!A&&(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,a.jsx)("span",{className:"truncate block",children:t.description})}),(0,a.jsxs)("div",{className:A?"text-[11px] text-soft mt-2 space-y-1":"text-xs text-soft mt-2 space-y-1",children:[i?(0,a.jsxs)("div",{children:["Вопросов: ",i.total]}):(0,a.jsx)("div",{children:"Вопросы: генеративные"}),(0,a.jsxs)("div",{children:["Сыграно: ",l," • ",Math.round(c||0),"%"]}),!A&&(0,a.jsxs)("div",{children:["Последний результат:"," ",x?"".concat(x.correct,"/").concat(x.total," (").concat(m,"%)"):"—"]}),!A&&n>0&&(0,a.jsxs)("div",{children:["Свои вопросы: ",n]})]})]}),(0,a.jsx)("div",{className:"grid"===S?"flex justify-between gap-2":"text-soft",children:"grid"===S?(0,a.jsx)("div",{className:"text-soft self-center",children:(0,a.jsx)(g.Z1Y,{})}):(0,a.jsx)(g.Z1Y,{})})]}),(0,a.jsxs)("div",{className:A?"mt-3 grid grid-cols-2 gap-2":"mt-4 flex flex-wrap gap-2",children:[(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),w(e),v(!0)},className:"inline-flex items-center justify-center gap-2 px-3 py-2 text-xs rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors ".concat(A?"w-full":""),children:[(0,a.jsx)(g.wEH,{className:"text-xs"}),(0,a.jsx)("span",{className:A?"hidden sm:inline":"",children:"Добавить вопросы"})]}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),w(e),v(!0)},className:"inline-flex items-center justify-center gap-2 px-3 py-2 text-xs rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors ".concat(A?"w-full":""),children:[(0,a.jsx)(g.tU3,{className:"text-xs"}),(0,a.jsx)("span",{className:A?"hidden sm:inline":"",children:"Редактировать"})]})]})]},e)})}),0===R.length&&(0,a.jsx)("div",{className:"text-center text-sm text-muted py-8",children:"Ничего не найдено. Попробуй другое слово."})]},"games"),"random"===e&&(0,a.jsx)("div",{className:"w-full max-w-4xl",children:(0,a.jsx)(N,{onBack:()=>s("menu")})}),"stats"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 w-full max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>s("menu"),className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(g.x_l,{})}),(0,a.jsx)("h2",{className:"text-xl font-display font-semibold",children:"Статистика"})]}),(0,a.jsx)(o.Card,{className:"shadow-card",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:z.totalScore.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Всего очков"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:z.totalGames}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Игр сыграно"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:W}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Лучшая серия"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-mono font-bold",children:[Object.values(z.accuracy).length>0?Math.round(Object.values(z.accuracy).reduce((e,s)=>e+s,0)/Object.values(z.accuracy).length):0,"%"]}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Средняя точность"})]})]})}),(0,a.jsx)("h3",{className:"font-medium mt-6 mb-3 text-strong",children:"По играм"}),(0,a.jsx)("div",{className:"space-y-2",children:d.n.map(e=>{let s=d.W[e],t=z.gamesPlayed[e]||0,l=z.accuracy[e]||0,c=s.icon;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-surface border border-subtle rounded-lg shadow-card",children:[(0,a.jsx)("span",{className:"w-9 h-9 rounded-xl bg-surface border border-subtle flex items-center justify-center text-accent",children:(0,a.jsx)(c,{className:"text-lg"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"text-sm font-medium truncate",children:s.name})}),(0,a.jsxs)("div",{className:"text-right text-sm",children:[(0,a.jsx)("div",{className:"font-mono",children:t}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[Math.round(l),"%"]})]})]},e)})}),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsx)(x.z,{onClick:()=>{confirm("Сбросить всю статистику?")&&M()},variant:"danger",fullWidth:!0,children:"Сбросить статистику"})})]},"stats")]})}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-20 border-t border-subtle bg-[color:var(--surface-1-80)] backdrop-blur sm:hidden",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-1 px-2 py-2",children:[(0,a.jsxs)("button",{onClick:()=>s("menu"),className:"flex flex-col items-center gap-1 py-2 rounded-xl text-xs ".concat("menu"===e?"bg-surface-3 text-strong":"text-muted"),children:[(0,a.jsx)(g.xng,{className:"text-base"}),"Главная"]}),(0,a.jsxs)("button",{onClick:()=>s("games"),className:"flex flex-col items-center gap-1 py-2 rounded-xl text-xs ".concat("games"===e?"bg-surface-3 text-strong":"text-muted"),children:[(0,a.jsx)(g.hON,{className:"text-base"}),"Игры"]}),(0,a.jsxs)("button",{onClick:()=>s("random"),className:"flex flex-col items-center gap-1 py-2 rounded-xl text-xs ".concat("random"===e?"bg-surface-3 text-strong":"text-muted"),children:[(0,a.jsx)(g.AyN,{className:"text-base"}),"Случайно"]}),(0,a.jsxs)("button",{onClick:()=>s("stats"),className:"flex flex-col items-center gap-1 py-2 rounded-xl text-xs ".concat("stats"===e?"bg-surface-3 text-strong":"text-muted"),children:[(0,a.jsx)(g.NMh,{className:"text-base"}),"Статистика"]})]})}),p&&(0,a.jsx)(u.$g,{onClose:()=>{v(!1),w(null)},initialGameId:null!=y?y:void 0})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.Skeleton,{className:"h-10 w-10 rounded-2xl"}),(0,a.jsx)(m.Skeleton,{className:"h-6 w-32"})]}),(0,a.jsx)(m.Skeleton,{className:"h-32 w-full rounded-3xl"}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(m.Skeleton,{className:"h-12 w-full rounded-xl"}),(0,a.jsx)(m.Skeleton,{className:"h-12 w-full rounded-xl"}),(0,a.jsx)(m.Skeleton,{className:"h-10 w-2/3 rounded-xl"})]})]})})}let b=e=>e.reduce((e,s)=>{let t=s.difficulty||"unknown";return"easy"===t?e.easy+=1:"medium"===t?e.medium+=1:"hard"===t?e.hard+=1:"expert"===t?e.expert+=1:e.unknown+=1,e.total+=1,e},{easy:0,medium:0,hard:0,expert:0,unknown:0,total:0});function N(e){let{onBack:s}=e,t=(0,r.useRouter)(),[c,i]=(0,l.useState)([]);if((0,l.useEffect)(()=>{i((0,h.TV)([...d.n]))},[]),0===c.length)return(0,a.jsx)("div",{className:"text-muted",children:"Загрузка..."});let o=c[0],m=d.W[o].icon,u=c.slice(1);return(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6 w-full max-w-xl mx-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[auto,1fr,auto] items-center",children:[(0,a.jsx)("button",{onClick:s,className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(g.x_l,{})}),(0,a.jsx)("h2",{className:"text-xl font-display font-semibold text-center",children:"Случайный режим"}),(0,a.jsx)("div",{className:"w-8"})]}),(0,a.jsxs)("div",{className:"text-center bg-surface border border-subtle rounded-3xl p-6 space-y-3 shadow-card",children:[(0,a.jsxs)("div",{className:"text-xs text-muted uppercase tracking-[0.2em]",children:["Игра ",1," из ",c.length]}),(0,a.jsx)("div",{className:"text-5xl text-accent",children:(0,a.jsx)(m,{})}),(0,a.jsx)("div",{className:"text-xl font-medium",children:d.W[o].name})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 max-w-md mx-auto w-full",children:[(0,a.jsx)(x.z,{onClick:s,variant:"ghost",fullWidth:!0,children:"Отмена"}),(0,a.jsx)(x.z,{onClick:()=>{let e=u.length>0?"?next=".concat(encodeURIComponent(JSON.stringify(u))):"";t.push("/game/".concat(o).concat(e))},fullWidth:!0,children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(g.gmG,{className:"text-base"}),"Начать"]})})]}),(0,a.jsx)("div",{className:"flex gap-1 justify-center",children:c.map((e,s)=>(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(0===s?"bg-[color:var(--accent)]":"bg-surface-3")},s))})]})}},8443:function(e,s,t){"use strict";t.d(s,{LinkButton:function(){return c}});var a=t(7437),l=t(7648);let c=e=>{let{href:s,children:t,variant:c="primary",size:n="md",fullWidth:r=!1,className:i=""}=e;return(0,a.jsx)(l.default,{href:s,className:"".concat("inline-flex items-center justify-center gap-2 relative font-medium rounded-xl transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[color:var(--accent)] focus-visible:ring-offset-[color:var(--surface-0)]"," ").concat({primary:"bg-accent text-white hover:bg-[color:var(--accent-strong)]",secondary:"bg-surface-2 text-strong hover:bg-surface-3",ghost:"bg-transparent text-muted hover:bg-surface-2",danger:"bg-[color:var(--danger)] text-white hover:bg-[color:var(--danger-strong)]"}[c]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n]," ").concat(r?"w-full":""," ").concat(i),children:t})}}},function(e){e.O(0,[699,521,648,308,77,971,117,744],function(){return e(e.s=9177)}),_N_E=e.O()}]);