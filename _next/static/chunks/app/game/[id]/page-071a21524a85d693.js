(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[184],{6847:function(e,t,s){Promise.resolve().then(s.bind(s,4858))},4858:function(e,t,s){"use strict";s.d(t,{GamePageClient:function(){return tg}});var a=s(7437),l=s(6371),r=s(367),c=s(4350),o=s(2099),n=s(4171),i=s(3782),d=s(5911),h=s(4690),u=s(4018),m=s(8832),x=s(5478),p=s(3821),f=s(2746),g=s(6769),y=s(2265);let j={brighter:{title:{ru:"Какой цвет ярче?",en:"Which color is brighter?"},helper:{ru:"Сравните светлоту (L): у яркого цвета значение L выше.",en:"Compare lightness (L): the brighter color has a higher L."},axis:"l",target:"max"},darker:{title:{ru:"Какой цвет темнее?",en:"Which color is darker?"},helper:{ru:"Сравните светлоту (L): у темного цвета значение L ниже.",en:"Compare lightness (L): the darker color has a lower L."},axis:"l",target:"min"},saturated:{title:{ru:"Какой цвет насыщеннее?",en:"Which color is more saturated?"},helper:{ru:"Сравните насыщенность (S): у насыщенного цвета значение S выше.",en:"Compare saturation (S): the more saturated color has a higher S."},axis:"s",target:"max"},muted:{title:{ru:"Какой цвет более приглушённый?",en:"Which color is more muted?"},helper:{ru:"Сравните насыщенность (S): у приглушённого цвета значение S ниже.",en:"Compare saturation (S): the more muted color has a lower S."},axis:"s",target:"min"}},v={easy:26,medium:16,hard:10,expert:6},N={easy:100,medium:120,hard:150,expert:180},b=(e,t,s)=>{let a=new Set([e[t]]),l="l"===t?12:15,r="l"===t?92:95;for(;a.size<4;){let c=Math.floor(Math.random()*s*2)-s;0!==c&&a.add((0,f.uZ)(e[t]+c,l,r))}return(0,f.TV)([...a]).map(s=>{let a={...e,[t]:s},{r:l,g:r,b:c}=(0,x.ve)(a.h,a.s,a.l);return{color:(0,x.vq)(l,r,c),hsl:a}})},w=(e,t,s)=>{let a=e.map(e=>e.hsl[t]);return a.indexOf("max"===s?Math.max(...a):Math.min(...a))},S=e=>{let t=(0,p.lV)(e),s=(0,f.sD)(["brighter","darker","saturated","muted"]),a=j[s],l=v[t],r=(0,x.Nj)();r.s=(0,f.uZ)(r.s,35,85),r.l=(0,f.uZ)(r.l,28,78);let c=b(r,a.axis,l),o=w(c,a.axis,a.target);return{compareType:s,difficulty:t,options:c,correctIndex:o}},C=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[x,f]=(0,y.useState)(!1),[v,b]=(0,y.useState)(0),{addScore:w,incrementStreak:C,resetStreak:k,updateStats:A,addMistake:I,setReviewPause:M,language:T}=(0,m.g)(),{playCorrect:L,playWrong:H}=(0,u.c)();(0,y.useEffect)(()=>{l(S(0))},[]);let q=(0,y.useCallback)(e=>{if(!s||x)return;c(e),f(!0);let a=e===s.correctIndex;if(a)w(N[s.difficulty]),C(),L();else{k(),H();let t=j[s.compareType],a=s.options[s.correctIndex],l=s.options[e],r="l"===t.axis?"L":"S",c=(0,g.N)(t.helper,T),o="ru"===T?"У правильного варианта ".concat(r,"=").concat(a.hsl[t.axis]).concat("%",", у выбранного ").concat(r,"=").concat(l.hsl[t.axis]).concat("%",". ").concat(c):"The correct option has ".concat(r,"=").concat(a.hsl[t.axis]).concat("%",", the selected one has ").concat(r,"=").concat(l.hsl[t.axis]).concat("%",". ").concat(c),n="ru"===T?"Правильный":"Correct",i="ru"===T?"Выбранный":"Selected";I({question:(0,g.N)(t.title,T),userAnswer:(0,g.t)(T,"optionLabel",{index:e+1}),correctAnswer:(0,g.t)(T,"optionLabel",{index:s.correctIndex+1}),explanation:o,visual:{type:"colors",data:{[n]:a.color,[i]:l.color}}})}A("color-compare",a);let r=a?1200:2400;M(r),setTimeout(()=>{t(a);let e=v+1;b(e),l(S(e)),c(null),f(!1)},r)},[s,x,v,M]),G=(0,y.useCallback)(()=>{if(!s||x)return;t(!1);let e=v+1;b(e),l(S(e)),c(null),f(!1)},[s,x,v,t]);if((0,h.S)(G,!x),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&q(e)},!x),!s)return null;let E=j[s.compareType];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,g.N)(E.title,T)}),(0,a.jsx)(n.N,{hint:(0,g.N)(E.helper,T)}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(T,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>q(t),selected:r===t,correct:x?t===s.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(i.m,{color:e.color,className:"w-full h-24 rounded-xl border border-subtle shadow-card"}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},e.color))})]})};var k=s(4155),A=s(521);let I={modular:[12,14,16,18,20,24,30,36,48,60,72],linear:[12,14,16,18,20,22,24,26,28,30,32],ios:[11,13,15,17,20,22,28,34],material:[10,12,14,16,20,24,34,48,60],bootstrap:[12,14,16,20,24,28,32,36,48],editorial:[14,16,18,22,26,32,40,52,64],compact:[10,11,12,13,14,15,16,17,18]},M=(e,t)=>({ru:e,en:t}),T={ru:["Типографика","Дизайн-система","Визуальный баланс","Негативное пространство","Композиция","Гармония цвета","Иерархия","Консистентность","Читаемость","Контраст","Ритм и паттерн","Модульная сетка","Выравнивание","Доступность","Интерфейс","Пропорции","Баланс","Контекст","Гарнитура","Распознавание","Навигация","Привычка","Сетка","Ритм","Градация","Группа","Отклик","Тон","Динамика"],en:["Typography","Design system","Visual balance","Negative space","Composition","Color harmony","Hierarchy","Consistency","Readability","Contrast","Rhythm and pattern","Modular grid","Alignment","Accessibility","Interface","Proportions","Balance","Context","Typeface","Recognition","Navigation","Habit","Grid","Rhythm","Gradation","Group","Response","Tone","Dynamics"]},L={modular:M("Модульная","Modular"),linear:M("Линейная","Linear"),ios:M("iOS","iOS"),material:M("Material","Material"),bootstrap:M("Bootstrap","Bootstrap"),editorial:M("Редакционная","Editorial"),compact:M("Компактная","Compact")},H=(e,t,s)=>{let a=t.indexOf(e),l=new Set([e]);for(let e of({easy:[-3,-2,-1,1,2,3],medium:[-2,-1,1,2],hard:[-1,1,2],expert:[-1,1]})[s]){let s=t[a+e];if("number"==typeof s&&l.add(s),l.size>=4)break}let r=t.filter(e=>!l.has(e));for(;l.size<4&&r.length>0;){let e=(0,f.sD)(r);l.add(e),r.splice(r.indexOf(e),1)}return(0,f.TV)([...l]).slice(0,4)},q=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[i,x]=(0,y.useState)(!1),[j,v]=(0,y.useState)(0),N=(0,y.useRef)(0),{addScore:b,incrementStreak:w,resetStreak:S,updateStats:C,addMistake:M,setReviewPause:q,language:G}=(0,m.g)(),E=(0,y.useMemo)(()=>{var e;return(0,f.TV)([...null!==(e=T[G])&&void 0!==e?e:T.ru])},[G]),{playCorrect:z,playWrong:D}=(0,u.c)(),V=(0,y.useCallback)(e=>{var t;let s=(0,p.lV)(e),a=Object.keys(I),l=(0,f.sD)(a),r=I[l],c="hard"===s?r.filter(e=>e>=14&&e<=36):r.filter(e=>e>=12&&e<=48),o=(0,f.sD)(c),n=E.length>0?E[N.current%E.length]:(0,f.sD)(null!==(t=T[G])&&void 0!==t?t:T.ru);N.current+=1;let i=H(o,r,s);return i.includes(o)||(i[0]=o),{size:o,text:n,options:(0,f.TV)(i),difficulty:s,scale:l}},[E,G]);(0,y.useEffect)(()=>{N.current=0,l(V(j))},[V]);let F=(0,y.useCallback)(e=>{if(i||!s)return;c(e),x(!0);let a=s.options[e],r=a===s.size;r?(b("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),w(),z()):(S(),D(),M({question:"ru"===G?'Какой размер шрифта? (текст: "'.concat(s.text,'")'):'What is the font size? (text: "'.concat(s.text,'")'),userAnswer:"".concat(a,"px"),correctAnswer:"".concat(s.size,"px"),explanation:"ru"===G?"Разница между ".concat(a,"px и ").concat(s.size,"px составляет ").concat(Math.abs(a-s.size),"px. Тренируйте глаз на модульных шкалах: ").concat(I.modular.slice(0,6).join(", "),"..."):"The difference between ".concat(a,"px and ").concat(s.size,"px is ").concat(Math.abs(a-s.size),"px. Train your eye with modular scales: ").concat(I.modular.slice(0,6).join(", "),"...")})),C("font-size",r);let o=r?1200:2400;q(o),setTimeout(()=>{t(r);let e=j+1;v(e),l(V(e)),c(null),x(!1)},o)},[s,i,j,V,q,G]),R=(0,y.useCallback)(()=>{if(!s||i)return;t(!1);let e=j+1;v(e),l(V(e)),c(null),x(!1)},[s,i,j,V,t,G]);return((0,h.S)(R,!i),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&F(e)},!i),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===G?"Какой это размер шрифта?":"What font size is this?"}),(0,a.jsx)(n.N,{hint:"ru"===G?"Ориентируйтесь на базовый размер интерфейса 16px и сравните высоту букв.":"Use the 16px base UI size and compare letter height."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(G,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"bg-surface-2 rounded-2xl p-8 flex items-center justify-center min-h-40 border border-subtle shadow-card",children:(0,a.jsx)(A.E.span,{className:"font-medium text-strong select-none text-center ".concat((0,k.rS)(s.size)),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:s.text},s.text)}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>F(t),selected:r===t,correct:i?e===s.size:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("span",{className:"font-mono text-lg",children:[e,"px"]}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),i&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["ru"===G?"Правильный размер":"Correct size",":"," ",(0,a.jsxs)("span",{className:"font-mono font-medium",children:[s.size,"px"]}),(0,a.jsxs)("span",{className:"text-xs block mt-1 text-soft",children:["ru"===G?"Шкала":"Scale",": ",(0,g.N)(L[s.scale],G)]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"text-soft",children:(0,g.t)(G,"loading")})})},G=(e,t)=>({ru:e,en:t}),E=[{name:"Manrope",family:"Manrope, sans-serif",category:"sans-serif",characteristics:G("Современный гротеск с мягкой геометрией","Modern grotesque with soft geometry")},{name:"Space Grotesk",family:'"Space Grotesk", sans-serif',category:"display",characteristics:G("Выразительный гротеск с широкими пропорциями","Expressive grotesque with wide proportions")},{name:"Inter",family:"Inter, sans-serif",category:"sans-serif",characteristics:G("Геометрический гротеск с открытыми формами","Geometric grotesque with open forms")},{name:"Roboto",family:"Roboto, sans-serif",category:"sans-serif",characteristics:G("Механистичный гротеск от Google","Mechanical grotesque by Google")},{name:"Open Sans",family:'"Open Sans", sans-serif',category:"sans-serif",characteristics:G("Гуманистический гротеск с открытыми формами","Humanist grotesque with open forms")},{name:"Lato",family:"Lato, sans-serif",category:"sans-serif",characteristics:G("Тёплый гротеск с полукруглыми деталями","Warm grotesque with semi-rounded details")},{name:"Montserrat",family:"Montserrat, sans-serif",category:"sans-serif",characteristics:G("Геометрический гротеск с прямыми штрихами","Geometric grotesque with straight strokes")},{name:"Poppins",family:"Poppins, sans-serif",category:"sans-serif",characteristics:G("Геометрический гротеск с круглыми формами","Geometric grotesque with circular forms")},{name:"Nunito",family:"Nunito, sans-serif",category:"sans-serif",characteristics:G("Округлённый гротеск","Rounded grotesque")},{name:"Source Sans Pro",family:'"Source Sans Pro", sans-serif',category:"sans-serif",characteristics:G("Гуманистический гротеск от Adobe","Humanist grotesque by Adobe")},{name:"Playfair Display",family:'"Playfair Display", serif',category:"serif",characteristics:G("Контрастная антиква в стиле переходного периода","High-contrast serif in the transitional style")},{name:"Merriweather",family:"Merriweather, serif",category:"serif",characteristics:G("Экранная антиква с массивными засечками","Screen serif with heavy serifs")},{name:"Lora",family:"Lora, serif",category:"serif",characteristics:G("Современная антиква с умеренным контрастом","Modern serif with moderate contrast")},{name:"PT Serif",family:'"PT Serif", serif',category:"serif",characteristics:G("Русская антиква с мягкими формами","Russian serif with soft forms")},{name:"Fira Code",family:'"Fira Code", monospace',category:"monospace",characteristics:G("Моноширинный шрифт с лигатурами","Monospace font with ligatures")},{name:"JetBrains Mono",family:'"JetBrains Mono", monospace',category:"monospace",characteristics:G("Моноширинный с увеличенной высотой строчных","Monospace with a taller x-height")},{name:"Source Code Pro",family:'"Source Code Pro", monospace',category:"monospace",characteristics:G("Моноширинный гротеск от Adobe","Monospace grotesque by Adobe")}],z={serif:G("Антиква","Serif"),"sans-serif":G("Гротеск","Sans-serif"),monospace:G("Моноширинный","Monospace"),display:G("Дисплейный","Display")},D=(e,t)=>{let s;let a=(0,p.lV)(e),l=(0,f.sD)(E),r=(0,f.c4)(t);"easy"===a?s=E.filter(e=>e.category!==l.category&&e.name!==l.name):"medium"===a?s=E.filter(e=>e.name!==l.name):(s=E.filter(e=>e.category===l.category&&e.name!==l.name)).length<3&&(s=E.filter(e=>e.name!==l.name));let c=(0,f.TV)([l,...(0,f.TV)(s).slice(0,3)]);return{font:l,text:r,options:c,difficulty:a}},V=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[i,x]=(0,y.useState)(!1),[f,j]=(0,y.useState)(0),{addScore:v,incrementStreak:N,resetStreak:b,updateStats:w,addMistake:S,setReviewPause:C,language:k}=(0,m.g)(),{playCorrect:I,playWrong:M}=(0,u.c)();(0,y.useEffect)(()=>{l(D(f,k))},[k]);let T=(0,y.useCallback)(e=>{if(i||!s)return;c(e),x(!0);let a=s.options[e],r=a.name===s.font.name;if(r)v("expert"===s.difficulty?220:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),N(),I();else{b(),M();let e=(0,g.N)(s.font.characteristics,k),t=(0,g.N)(a.characteristics,k),l="ru"===k?"".concat(s.font.name," — ").concat(e,". ").concat(a.name," — ").concat(t,'. Обратите внимание на форму букв "a", "g", "e" и характер засечек.'):"".concat(s.font.name," — ").concat(e,". ").concat(a.name," — ").concat(t,'. Pay attention to the shapes of "a", "g", "e" and the presence of serifs.');S({question:"ru"===k?"Какой это шрифт?":"Which font is this?",userAnswer:a.name,correctAnswer:s.font.name,explanation:l})}w("guess-font",r);let o=r?1200:2400;C(o),setTimeout(()=>{t(r),j(e=>e+1),l(D(f+1,k)),c(null),x(!1)},o)},[s,i,f,C,k]),L=(0,y.useCallback)(()=>{s&&!i&&(t(!1),j(e=>e+1),l(D(f+1,k)),c(null),x(!1))},[s,i,f,t,k]);return((0,h.S)(L,!i),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&T(e)},!i),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===k?"Какой это шрифт?":"Which font is this?"}),(0,a.jsx)(n.N,{hint:"ru"===k?'Смотрите на формы "a", "g", контраст штрихов и наличие засечек.':'Look at the shapes of "a", "g", stroke contrast, and the presence of serifs.'}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(k,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"bg-surface-2 rounded-2xl p-8 flex items-center justify-center min-h-40 border border-subtle shadow-card",children:(0,a.jsx)(A.E.span,{style:{"--sample-font":s.font.family},className:"font-sample text-[48px] text-strong select-none",initial:{opacity:0},animate:{opacity:1},children:s.text})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>T(t),selected:r===t,correct:i?e.name===s.font.name:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]}),(0,a.jsx)("div",{className:"text-xs text-soft mt-1",children:(0,g.N)(z[e.category],k)})]})},t))}),i&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsx)("div",{className:"font-medium",children:s.font.name}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:(0,g.N)(s.font.characteristics,k)})]})]}):null},F=(e,t)=>({ru:e,en:t}),R={hue:F("Оттенок (H)","Hue (H)"),saturation:F("Насыщенность (S)","Saturation (S)"),lightness:F("Светлота (L)","Lightness (L)")},B={hue:F("Оттенок — положение на цветовом круге: 0\xb0 — красный, 60\xb0 — жёлтый, 120\xb0 — зелёный, 180\xb0 — циан, 240\xb0 — синий, 300\xb0 — маджента","Hue is the position on the color wheel: 0\xb0 — red, 60\xb0 — yellow, 120\xb0 — green, 180\xb0 — cyan, 240\xb0 — blue, 300\xb0 — magenta"),saturation:F("Насыщенность показывает интенсивность цвета: 0% — серый, 100% — чистый цвет","Saturation shows color intensity: 0% — gray, 100% — pure color"),lightness:F("Светлота — количество белого/чёрного: 0% — чёрный, 50% — чистый цвет, 100% — белый","Lightness is the amount of white/black: 0% — black, 50% — pure color, 100% — white")},P=(e,t,s)=>{let a;switch(s){case"easy":a="hue"===t?60:25;break;case"medium":a="hue"===t?30:15;break;case"hard":a="hue"===t?15:8;break;case"expert":a="hue"===t?8:5}let l=new Set([e]);for(;l.size<4;){let s=Math.floor(Math.random()*a*2)-a;0===s&&(s=a);let r=e+s;r="hue"===t?(r%360+360)%360:Math.max(5,Math.min(95,r)),l.add(r)}return(0,f.TV)([...l])},W=e=>{let t;let s=(0,f.sD)(["hue","saturation","lightness"]),a=(0,x.Nj)(),{r:l,g:r,b:c}=(0,x.ve)(a.h,a.s,a.l),o=(0,x.vq)(l,r,c);switch(s){case"hue":t=a.h;break;case"saturation":t=a.s;break;case"lightness":t=a.l}let n=P(t,s,e);return{mode:"value",color:o,hsl:a,paramType:s,options:n,correctValue:t,difficulty:e}},O=e=>{let t;let s=(0,f.sD)(["hue","saturation","lightness"]),a=(0,x.Nj)();switch(e){case"easy":t="hue"===s?60:30;break;case"medium":t="hue"===s?35:18;break;case"hard":t="hue"===s?20:12;break;case"expert":t="hue"===s?12:8}let l=Math.random()>.5?1:-1,r={...a};"hue"===s?r.h=((r.h+l*t)%360+360)%360:"saturation"===s?r.s=Math.max(10,Math.min(95,r.s+l*t)):r.l=Math.max(10,Math.min(90,r.l+l*t));let c=(0,x.ve)(a.h,a.s,a.l),o=(0,x.ve)(r.h,r.s,r.l);return{mode:"shift",baseColor:(0,x.vq)(c.r,c.g,c.b),baseHsl:a,targetColor:(0,x.vq)(o.r,o.g,o.b),targetHsl:r,paramType:s,options:(0,f.TV)(["hue","saturation","lightness"]),difficulty:e}},Y=e=>{let t=(0,p.lV)(e);return"easy"!==t&&Math.random()>.45?O(t):W(t)},Z=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[x,f]=(0,y.useState)(!1),[j,v]=(0,y.useState)(0),{addScore:N,incrementStreak:b,resetStreak:w,updateStats:S,addMistake:C,setReviewPause:k,language:I}=(0,m.g)(),{playCorrect:M,playWrong:T}=(0,u.c)(),L=e=>(0,g.N)(R[e],I),H=e=>(0,g.N)(B[e],I);(0,y.useEffect)(()=>{l(Y(j))},[]);let q=(0,y.useCallback)(e=>{if(x||!s)return;c(e),f(!0);let a="value"===s.mode?s.options[e]===s.correctValue:s.options[e]===s.paramType;if(a)N("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),b(),M();else if(w(),T(),"value"===s.mode){let t="hue"===s.paramType?"\xb0":"%",a=s.options[e],l=L(s.paramType),r="ru"===I?"".concat(H(s.paramType),". Полные HSL значения для этого цвета: H=").concat(s.hsl.h,"\xb0, S=").concat(s.hsl.s,"%, L=").concat(s.hsl.l,"%"):"".concat(H(s.paramType),". Full HSL values for this color: H=").concat(s.hsl.h,"\xb0, S=").concat(s.hsl.s,"%, L=").concat(s.hsl.l,"%");C({question:"ru"===I?"Определи ".concat(l," цвета"):"Determine the ".concat(l," of the color"),userAnswer:"".concat(a).concat(t),correctAnswer:"".concat(s.correctValue).concat(t),explanation:r,visual:{type:"colors",data:{["ru"===I?"Цвет":"Color"]:s.color}}})}else{let t=s.options[e],a="ru"===I?"".concat(H(s.paramType),". Исходный цвет: H=").concat(s.baseHsl.h,"\xb0, S=").concat(s.baseHsl.s,"%, L=").concat(s.baseHsl.l,"%."):"".concat(H(s.paramType),". Base color: H=").concat(s.baseHsl.h,"\xb0, S=").concat(s.baseHsl.s,"%, L=").concat(s.baseHsl.l,"%."),l="ru"===I?"Цвет A":"Color A",r="ru"===I?"Цвет B":"Color B";C({question:"ru"===I?"Что изменилось между двумя цветами?":"What changed between the two colors?",userAnswer:L(t),correctAnswer:L(s.paramType),explanation:a,visual:{type:"colors",data:{[l]:s.baseColor,[r]:s.targetColor}}})}S("color-params",a);let r=a?1200:2400;k(r),setTimeout(()=>{t(a),v(e=>e+1),l(Y(j+1)),c(null),f(!1)},r)},[s,x,j,k]),G=(0,y.useCallback)(()=>{s&&!x&&(t(!1),v(e=>e+1),l(Y(j+1)),c(null),f(!1))},[s,x,j,t]);return((0,h.S)(G,!x),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&q(e)},!x),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"value"===s.mode?"ru"===I?"Определить ".concat(L(s.paramType)):"Determine ".concat(L(s.paramType)):"ru"===I?"Что изменилось между цветами?":"What changed between the colors?"}),(0,a.jsx)(n.N,{hint:"value"===s.mode?H(s.paramType):"ru"===I?"Сравните оба свотча и определите, какой параметр изменился.":"Compare both swatches and decide which parameter shifted."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(I,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:"value"===s.mode?(0,a.jsx)(A.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(i.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card"})}):(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(A.E.div,{className:"w-28 h-28",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(i.m,{color:s.baseColor,className:"w-full h-full rounded-2xl shadow-card"})}),(0,a.jsx)(A.E.div,{className:"w-28 h-28",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(i.m,{color:s.targetColor,className:"w-full h-full rounded-2xl shadow-card"})})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>q(t),selected:r===t,correct:x?"value"===s.mode?e===s.correctValue:e===s.paramType:null,children:"value"===s.mode?(0,a.jsxs)("div",{className:"text-center font-mono text-lg",children:[e,"hue"===s.paramType?"\xb0":"%",(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]}):(0,a.jsxs)("div",{className:"text-center font-medium",children:[L(e),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),x&&(0,a.jsx)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:"value"===s.mode?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"font-mono",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:s.color.toUpperCase()})]}):(0,a.jsxs)("div",{className:"text-xs text-soft",children:["ru"===I?"Изменение":"Change",": ",L(s.paramType)," •"," ","ru"===I?"Цвет A":"Color A"," → ","ru"===I?"Цвет B":"Color B"]})})]}):null},U=(e,t)=>({ru:e,en:t}),X=e=>e>=7?"AAA":e>=4.5?"AA":e>=3?"AA Large":"Fail",_={AAA:U("Контраст ≥7:1 — максимальный уровень доступности для обычного текста","Contrast ≥7:1 — highest accessibility level for normal text"),AA:U("Контраст ≥4.5:1 — минимальный стандарт для обычного текста","Contrast ≥4.5:1 — minimum standard for normal text"),"AA Large":U("Контраст ≥3:1 — допустимо только для крупного текста (18pt+ или 14pt bold)","Contrast ≥3:1 — allowed only for large text (18pt+ or 14pt bold)"),Fail:U("Контраст <3:1 — не соответствует WCAG","Contrast <3:1 — does not meet WCAG standards")},Q={level:U("Определить уровень WCAG","Determine the WCAG level"),"pass-fail":U("Проходит ли WCAG AA?","Passes WCAG AA?"),"large-text":U("Проходит ли для крупного текста?","Passes for large text?")},J=U("AA требует 4.5:1, для крупного текста достаточно 3:1, AAA начинается с 7:1.","AA needs 4.5:1, large text allows 3:1, AAA starts at 7:1."),K=U("Проходит","Pass"),$=U("Не проходит","Fail"),ee=U("Контраст","Contrast"),et=U("Текст","Text"),es=U("Фон","Background"),ea=U("Для крупного текста достаточно 3:1 (AA Large).","Large text requires only 3:1 (AA Large)."),el=(e,t)=>(0,g.N)(Q[e],t),er=(e,t,s)=>"pass-fail"===e||"large-text"===e?"AA"===t?(0,g.N)(K,s):(0,g.N)($,s):t,ec=(e,t)=>{let s="#ffffff"===e||"#fafafa"===e,a=0;for(;a<50;){let l=(0,x.Nj)();switch(t){case"AAA":l.l=s?Math.floor(25*Math.random())+5:Math.floor(25*Math.random())+70;break;case"AA":l.l=s?Math.floor(20*Math.random())+25:Math.floor(20*Math.random())+55;break;case"AA Large":l.l=s?Math.floor(15*Math.random())+40:Math.floor(15*Math.random())+45;break;case"Fail":l.l=s?Math.floor(20*Math.random())+55:Math.floor(20*Math.random())+25,l.s=Math.floor(30*Math.random())+20}let{r,g:c,b:o}=(0,x.ve)(l.h,l.s,l.l),n=(0,x.vq)(r,c,o);if(X((0,x.mi)(n,e))===t)return n;a++}return s?"#333333":"#cccccc"},eo=(e,t)=>{let s;let a=(0,p.lV)(e),l="easy"===a?"pass-fail":"expert"===a?"large-text":(0,f.sD)(["level","pass-fail"]),r=(0,f.sD)(["#ffffff","#fafafa","#1a1a1a","#0a0a0a","#f3f0e8","#102a43"]),c=["AAA","AA","AA Large","Fail"],o=ec(r,(0,f.sD)(c)),n=(0,x.mi)(o,r),i=X(n),d=n>=4.5,h=n>=3,u="pass-fail"===l?d?"AA":"Fail":"large-text"===l?h?"AA":"Fail":i;"pass-fail"===l||"large-text"===l?s=(0,f.TV)(["AA","Fail"]):"easy"===a?(s=(0,f.TV)(["AAA","AA","Fail"])).includes(u)||(s[0]=u):s=(0,f.TV)([...c]);let m=(0,f.Jf)(t);return{foreground:o,background:r,contrastRatio:n,correctLevel:u,options:s.slice(0,4),text:m,difficulty:a,mode:l}},en=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[i,x]=(0,y.useState)(!1),[f,j]=(0,y.useState)(0),v=(0,m.g)(e=>e.language),{addScore:N,incrementStreak:b,resetStreak:w,updateStats:S,addMistake:C,setReviewPause:k}=(0,m.g)(),{playCorrect:I,playWrong:M}=(0,u.c)();(0,y.useEffect)(()=>{l(eo(f,v))},[v]);let T=(0,y.useCallback)(e=>{if(i||!s)return;c(e),x(!0);let a=s.options[e],r=a===s.correctLevel;if(r)N("hard"===s.difficulty?150:"medium"===s.difficulty?130:120),b(),I();else{w(),M();let e="large-text"===s.mode?(0,g.N)(ea,v):(0,g.N)(_[s.correctLevel],v),t=(0,g.N)(ee,v),l=(0,g.N)(et,v),r=(0,g.N)(es,v);C({question:el(s.mode,v),userAnswer:er(s.mode,a,v),correctAnswer:er(s.mode,s.correctLevel,v),explanation:"".concat(t," ").concat(s.contrastRatio.toFixed(2),":1. ").concat(e),visual:{type:"contrast",data:{[l]:s.foreground,[r]:s.background}}})}S("accessibility",r);let o=r?1200:2400;k(o),setTimeout(()=>{t(r),j(e=>e+1),l(eo(f+1,v)),c(null),x(!1)},o)},[s,i,f,k,v]),L=(0,y.useCallback)(()=>{s&&!i&&(t(!1),j(e=>e+1),l(eo(f+1,v)),c(null),x(!1))},[s,i,f,t,v]);if((0,h.S)(L,!i),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&T(e)},!i),!s)return null;let H={AAA:"text-[color:var(--success)]",AA:"text-accent","AA Large":"text-[color:var(--warning)]",Fail:"text-[color:var(--danger)]"},q={"--swatch":s.background,"--swatch-ink":s.foreground};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:el(s.mode,v)}),(0,a.jsx)(n.N,{hint:(0,g.N)(J,v)}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(v,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsxs)(A.E.div,{className:"rounded-2xl p-8 min-h-32 flex flex-col items-center justify-center bg-swatch border border-subtle shadow-card",style:q,initial:{opacity:0},animate:{opacity:1},children:["large-text"===s.mode&&(0,a.jsx)("span",{className:"text-xs opacity-60 mb-2 text-swatch",children:"ru"===v?"КРУПНЫЙ ТЕКСТ (18pt+)":"LARGE TEXT (18pt+)"}),(0,a.jsx)("p",{className:"font-medium text-center text-swatch ".concat("large-text"===s.mode?"text-3xl":"text-2xl"),children:s.text})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>T(t),selected:r===t,correct:i?e===s.correctLevel:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-mono text-lg ".concat(H[e]),children:er(s.mode,e,v)}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),i&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{className:"font-mono",children:[(0,g.N)(ee,v),": ",s.contrastRatio.toFixed(2),":1"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:"large-text"===s.mode?(0,g.N)(ea,v):(0,g.N)(_[s.correctLevel],v)})]})]})},ei=(e,t)=>({ru:e,en:t}),ed={monochromatic:ei("монохромная","monochromatic"),analogous:ei("аналоговая","analogous"),complementary:ei("комплементарная","complementary"),triadic:ei("триадная","triadic"),split:ei("сплит-комплементарная","split-complementary"),tetradic:ei("тетра́дная","tetradic")},eh={monochromatic:ei("Монохромная палитра использует один тон (H) с разной насыщенностью и светлотой","A monochromatic palette uses one hue (H) with varying saturation and lightness"),analogous:ei("Аналоговая палитра использует соседние тона на цветовом круге (\xb130\xb0)","An analogous palette uses neighboring hues on the color wheel (\xb130\xb0)"),complementary:ei("Комплементарная палитра использует противоположные тона (180\xb0)","A complementary palette uses opposite hues (180\xb0)"),triadic:ei("Триадная палитра использует три равноудалённых тона (120\xb0 друг от друга)","A triadic palette uses three evenly spaced hues (120\xb0 apart)"),split:ei("Сплит-комплементарная палитра использует два тона вокруг комплементарного (\xb130\xb0)","A split-complementary palette uses two hues around the complement (\xb130\xb0)"),tetradic:ei("Тетрадная палитра использует две пары комплементарных тонов (через 90\xb0)","A tetradic palette uses two complementary pairs (90\xb0 apart)")},eu=(e,t,s)=>{let a=[];switch(e){case"monochromatic":for(let e=0;e<s;e++)a.push({h:t,s:40+(0,f.Iy)(0,40),l:25+12*e+(0,f.Iy)(-5,5)});break;case"analogous":for(let e=0;e<s;e++){let l=(e-Math.floor(s/2))*20;a.push({h:(t+l+360)%360,s:50+(0,f.Iy)(0,30),l:45+(0,f.Iy)(-10,10)})}break;case"complementary":for(let e=0;e<s;e++){let l=e>=s/2;a.push({h:l?(t+180)%360:t,s:50+(0,f.Iy)(0,30),l:40+(0,f.Iy)(0,20)})}break;case"triadic":for(let e=0;e<s;e++){let s=120*Math.floor(e/2);a.push({h:(t+s)%360,s:50+(0,f.Iy)(0,30),l:45+(0,f.Iy)(-5,10)})}break;case"split":{let e=[(t+150)%360,(t+210)%360];for(let l=0;l<s;l++){let s=0===l?t:e[l%e.length];a.push({h:s,s:45+(0,f.Iy)(0,30),l:40+(0,f.Iy)(-5,12)})}break}case"tetradic":{let e=[0,90,180,270];for(let l=0;l<s;l++){let s=(t+e[l%e.length])%360;a.push({h:s,s:45+(0,f.Iy)(0,30),l:40+(0,f.Iy)(-5,12)})}}}return a},em=(e,t,s)=>{let a;switch(s){case"easy":a=(t+90+(0,f.Iy)(30,60))%360;break;case"medium":a=(t+60+(0,f.Iy)(20,40))%360;break;case"hard":a=(t+40+(0,f.Iy)(10,25))%360;break;case"expert":a=(t+30+(0,f.Iy)(8,16))%360}return{h:a,s:50+(0,f.Iy)(0,30),l:45+(0,f.Iy)(-5,15)}},ex=e=>{let t=(0,p.lV)(e),s=(0,f.sD)(["monochromatic","analogous","complementary","triadic","split","tetradic"]),a=(0,f.Iy)(0,359),l="hard"===t||"expert"===t?6:5,r=eu(s,a,l-1),c=em(s,a,t),o=(0,f.Iy)(0,l-1),n=[...r];return n.splice(o,0,c),{colors:n.map(e=>{let{r:t,g:s,b:a}=(0,x.ve)(e.h,e.s,e.l);return(0,x.vq)(t,s,a)}),errorIndex:o,paletteType:s,baseHue:a,difficulty:t}},ep=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[i,x]=(0,y.useState)(!1),[f,j]=(0,y.useState)(0),v=(0,m.g)(e=>e.language),{addScore:N,incrementStreak:b,resetStreak:w,updateStats:S,addMistake:C,setReviewPause:k}=(0,m.g)(),{playCorrect:I,playWrong:M}=(0,u.c)();(0,y.useEffect)(()=>{l(ex(f))},[]);let T=(0,y.useCallback)(e=>{if(i||!s)return;c(e),x(!0);let a=e===s.errorIndex;if(a)N("expert"===s.difficulty?220:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),b(),I();else{w(),M();let t=(0,g.N)(ed[s.paletteType],v),a=(0,g.N)(eh[s.paletteType],v),l="ru"===v?"Цвет":"Color";C({question:"ru"===v?"Найти цвет, выбивающийся из ".concat(t," палитры"):"Find the color that does not belong to the ".concat(t," palette"),userAnswer:"".concat(l," ").concat(e+1),correctAnswer:"".concat(l," ").concat(s.errorIndex+1),explanation:"ru"===v?"".concat(a,". Базовый тон палитры: ").concat(s.baseHue,"\xb0. Ошибочный цвет имеет тон, не вписывающийся в схему."):"".concat(a,". Palette base hue: ").concat(s.baseHue,"\xb0. The odd color uses a hue outside the scheme."),visual:{type:"colors",data:s.colors.reduce((e,t,s)=>({...e,["".concat(l," ").concat(s+1)]:t}),{})}})}S("palette-error",a);let r=a?1200:2400;k(r),setTimeout(()=>{t(a),j(e=>e+1),l(ex(f+1)),c(null),x(!1)},r)},[s,i,f,k,v]),L=(0,y.useCallback)(()=>{s&&!i&&(t(!1),j(e=>e+1),l(ex(f+1)),c(null),x(!1))},[s,i,f,t]);if((0,h.S)(L,!i),(0,d.A)(e=>{e<((null==s?void 0:s.colors.length)||0)&&T(e)},!i),!s)return null;let H=(0,g.N)(ed[s.paletteType],v),q=(0,g.N)(eh[s.paletteType],v),G="ru"===v?"Палитра":"Palette",E="ru"===v?"Ошибка в цвете":"Odd color";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===v?"Найти лишний цвет":"Find the odd color"}),(0,a.jsx)(n.N,{hint:q}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:[G,": ",H," • ",(0,g.t)(v,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid gap-3 ".concat(s.colors.length>5?"grid-cols-3":"grid-cols-5"),children:s.colors.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>T(t),selected:r===t,correct:i?t===s.errorIndex:null,padding:"none",className:"aspect-square overflow-hidden",children:(0,a.jsx)(A.E.div,{className:"w-full h-full flex items-end justify-center pb-2 bg-swatch",style:{"--swatch":e},whileHover:{scale:1.05},children:(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-[color:var(--surface-1-95)] rounded text-xs font-mono",children:t+1})})},t))}),i&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{children:[E," ",s.errorIndex+1]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:q})]})]})},ef=(e,t)=>({ru:e,en:t}),eg={modular:ef("модульная","modular"),linear:ef("линейная","linear"),fibonacci:ef("Фибоначчи","Fibonacci"),golden:ef("золотое сечение","golden ratio"),"major-third":ef("большая терция (1.25)","major third"),"perfect-fourth":ef("чистая кварта (1.333)","perfect fourth")},ey={modular:ef("Модульная шкала умножает базовый размер на постоянный коэффициент (обычно 1.2-1.5)","A modular scale multiplies the base size by a constant ratio (typically 1.2–1.5)."),linear:ef("Линейная шкала добавляет фиксированное значение к каждому следующему размеру","A linear scale adds a fixed step to each next size."),fibonacci:ef("Шкала Фибоначчи: каждое число — сумма двух предыдущих","A Fibonacci scale: each number is the sum of the two previous ones."),golden:ef("Золотое сечение использует коэффициент 1.618 для каждого следующего размера","The golden ratio uses 1.618 as the multiplier for each next size."),"major-third":ef("Major Third масштабирует размеры по коэффициенту 1.25","Major Third scales sizes by 1.25."),"perfect-fourth":ef("Perfect Fourth масштабирует размеры по коэффициенту 1.333","Perfect Fourth scales sizes by 1.333.")},ej=e=>k.gk.reduce((t,s)=>Math.abs(s-e)<Math.abs(t-e)?s:t,k.gk[0]),ev=e=>{let t=[],s=0;for(let a of e){let e=ej(a),l=e>s?e:k.gk.find(e=>e>s)||e;t.push(l),s=l}return t},eN=(e,t)=>{let s=[];switch(e){case"modular":{let e=(0,f.sD)([1.2,1.25,1.333,1.414,1.5]);for(let a=0;a<t;a++)s.push(Math.round(16*Math.pow(e,a)));break}case"linear":{let e=(0,f.sD)([2,3,4]);for(let a=0;a<t;a++)s.push(12+a*e);break}case"fibonacci":s.push(...[8,13,21,34,55,89].slice(0,t));break;case"golden":for(let e=0;e<t;e++)s.push(Math.round(10*Math.pow(1.618,e)));break;case"major-third":for(let e=0;e<t;e++)s.push(Math.round(14*Math.pow(1.25,e)));break;case"perfect-fourth":for(let e=0;e<t;e++)s.push(Math.round(14*Math.pow(1.333,e)))}return ev(s)},eb=(e,t,s)=>{let a;let l=e[t];switch(s){case"easy":a=l+(Math.random()>.5?1:-1)*(0,f.Iy)(6,10);break;case"medium":a=l+(Math.random()>.5?1:-1)*(0,f.Iy)(3,5);break;case"hard":a=l+(Math.random()>.5?1:-1)*(0,f.Iy)(1,2);break;case"expert":a=l+(Math.random()>.5?1:-1)*1}return Math.max(8,a)},ew=e=>{let t=(0,p.lV)(e),s=(0,f.sD)(["modular","linear","golden","fibonacci","major-third","perfect-fourth"]),a="hard"===t||"expert"===t?6:5,l=eN(s,a),r=(0,f.Iy)(1,a-2),c=eb(l,r,t),o=[...l];return o[r]=c,{sizes:o,errorIndex:r,scaleType:s,ratio:"modular"===s?1.333:"golden"===s?1.618:"major-third"===s?1.25:"perfect-fourth"===s?1.333:1,difficulty:t}},eS=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[i,x]=(0,y.useState)(!1),[f,j]=(0,y.useState)(0),{addScore:v,incrementStreak:N,resetStreak:b,updateStats:w,addMistake:S,setReviewPause:C,language:I}=(0,m.g)(),{playCorrect:M,playWrong:T}=(0,u.c)();(0,y.useEffect)(()=>{l(ew(f))},[]);let L=(0,y.useCallback)(e=>{if(i||!s)return;c(e),x(!0);let a=e===s.errorIndex,r=eN(s.scaleType,s.sizes.length),o=(0,g.N)(eg[s.scaleType],I),n=(0,g.N)(ey[s.scaleType],I);a?(v("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),N(),M()):(b(),T(),S({question:"ru"===I?"Найти ошибку в ".concat(o," шкале"):"Find the error in the ".concat(o," scale"),userAnswer:"ru"===I?"Позиция ".concat(e+1," (").concat(s.sizes[e],"px)"):"Position ".concat(e+1," (").concat(s.sizes[e],"px)"),correctAnswer:"ru"===I?"Позиция ".concat(s.errorIndex+1," (должно быть ").concat(r[s.errorIndex],"px, показано ").concat(s.sizes[s.errorIndex],"px)"):"Position ".concat(s.errorIndex+1," (should be ").concat(r[s.errorIndex],"px, shown ").concat(s.sizes[s.errorIndex],"px)"),explanation:"ru"===I?"".concat(n,". Правильная последовательность: ").concat(r.join(", "),"px"):"".concat(n,". Correct sequence: ").concat(r.join(", "),"px")})),w("size-sequence",a);let d=a?1200:2400;C(d),setTimeout(()=>{t(a),j(e=>e+1),l(ew(f+1)),c(null),x(!1)},d)},[s,i,f,C,I]),H=(0,y.useCallback)(()=>{s&&!i&&(t(!1),j(e=>e+1),l(ew(f+1)),c(null),x(!1))},[s,i,f,t,I]);return((0,h.S)(H,!i),(0,d.A)(e=>{e<((null==s?void 0:s.sizes.length)||0)&&L(e)},!i),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===I?"Найти ошибку в шкале":"Find the error in the scale"}),(0,a.jsx)(n.N,{hint:(0,g.N)(ey[s.scaleType],I)}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["ru"===I?"Тип":"Type",": ",(0,g.N)(eg[s.scaleType],I)," •"," ",(0,g.t)(I,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-3",children:s.sizes.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>L(t),selected:r===t,correct:i?t===s.errorIndex:null,className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"w-8 text-center font-mono text-sm text-soft",children:t+1}),(0,a.jsx)(A.E.span,{className:"font-medium text-strong flex-1 ".concat((0,k.rS)(e,"text-[48px]")),initial:{opacity:0},animate:{opacity:1},children:"Aa"}),(0,a.jsxs)("span",{className:"font-mono text-sm text-muted",children:[e,"px"]})]})},t))}),i&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{children:["ru"===I?"Ошибка на позиции":"Error at position"," ",s.errorIndex+1]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:(0,g.N)(ey[s.scaleType],I)})]})]}):null},eC=(e,t)=>({ru:e,en:t}),ek={complementary:eC("Выбрать комплементарный цвет","Choose the complementary color"),split:eC("Выбрать сплит-комплементарный цвет","Choose the split-complementary color")},eA={complementary:eC("Комплементарные цвета расположены напротив на круге (180\xb0).","Complementary colors are 180\xb0 apart on the wheel."),split:eC("Сплит-комплементарный находится на \xb130\xb0 от комплементарного.","Split-complementary sits \xb130\xb0 from the complement.")},eI={complementary:(e,t)=>({ru:"Комплементарный цвет находится на противоположной стороне цветового круга (180\xb0 от базового). Базовый тон: ".concat(e,"\xb0, комплементарный: ").concat(t,"\xb0"),en:"A complementary color is on the opposite side of the color wheel (180\xb0 from the base). Base hue: ".concat(e,"\xb0, complementary: ").concat(t,"\xb0")}),split:(e,t)=>({ru:"Сплит-комплементарные цвета находятся на \xb130\xb0 от комплементарного. Базовый тон: ".concat(e,"\xb0, целевой: ").concat(t,"\xb0"),en:"Split-complementary colors sit \xb130\xb0 from the complement. Base hue: ".concat(e,"\xb0, target: ").concat(t,"\xb0")})},eM={hue:eC("Тон","Hue"),deviation:eC("отклонение","deviation"),correct:eC("правильный","correct"),base:eC("Базовый","Base"),complementary:eC("Комплементарный","Complementary"),yourChoice:eC("Ваш выбор","Your choice")},eT=e=>{let t;let s=(0,p.lV)(e),a="easy"===s?"complementary":(0,f.sD)(["complementary","split"]),l=(0,x.Nj)(),{r,g:c,b:o}=(0,x.ve)(l.h,l.s,l.l),n=(0,x.vq)(r,c,o),i=(0,x.SU)(l.h),d=(0,f.sD)([30,-30]),h="split"===a?(i+d+360)%360:i;switch(s){case"easy":t=[(l.h+90)%360,(l.h+60)%360,(l.h+270)%360];break;case"medium":t=[(i+45)%360,(i+315)%360,(l.h+90)%360];break;case"hard":t=[(h+18)%360,(h+342)%360,(i+15)%360];break;case"expert":t=[(h+12)%360,(h+348)%360,(i+8)%360]}let u=[h,...t].map(e=>{let{r:t,g:s,b:a}=(0,x.ve)(e,l.s,l.l);return{color:(0,x.vq)(t,s,a),hue:e}}),m=(0,f.TV)(u),g=m.findIndex(e=>e.hue===h);return{baseColor:n,baseHsl:l,options:m,correctIndex:g,difficulty:s,mode:a,targetHue:h}},eL=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[f,j]=(0,y.useState)(!1),[v,N]=(0,y.useState)(0),{addScore:b,incrementStreak:w,resetStreak:S,updateStats:C,addMistake:k,setReviewPause:I,language:M}=(0,m.g)(),{playCorrect:T,playWrong:L}=(0,u.c)();(0,y.useEffect)(()=>{l(eT(v))},[]);let H=(0,y.useCallback)(e=>{if(f||!s)return;c(e),j(!0);let a=e===s.correctIndex,r=(0,x.SU)(s.baseHsl.h);if(a)b("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),w(),T();else{S(),L();let t=s.options[e].hue,a="split"===s.mode?eI.split(s.baseHsl.h,s.targetHue):eI.complementary(s.baseHsl.h,r);k({question:(0,g.N)(ek[s.mode],M),userAnswer:"".concat((0,g.N)(eM.hue,M)," ").concat(t,"\xb0 (").concat((0,g.N)(eM.deviation,M)," ").concat(Math.abs(t-s.targetHue),"\xb0)"),correctAnswer:"".concat((0,g.N)(eM.hue,M)," ").concat(s.targetHue,"\xb0"),explanation:(0,g.N)(a,M),visual:{type:"colors",data:{[(0,g.N)(eM.base,M)]:s.baseColor,[(0,g.N)(eM.complementary,M)]:s.options[s.correctIndex].color,[(0,g.N)(eM.yourChoice,M)]:s.options[e].color}}})}C("complementary",a);let o=a?1200:2400;I(o),setTimeout(()=>{t(a),N(e=>e+1),l(eT(v+1)),c(null),j(!1)},o)},[s,f,v,I]),q=(0,y.useCallback)(()=>{s&&!f&&(t(!1),N(e=>e+1),l(eT(v+1)),c(null),j(!1))},[s,f,v,t]);return((0,h.S)(q,!f),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&H(e)},!f),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,g.N)(ek[s.mode],M)}),(0,a.jsx)(n.N,{hint:(0,g.N)(eA[s.mode],M)}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(M,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(A.E.div,{className:"w-32 h-32",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(i.m,{color:s.baseColor,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsxs)("div",{className:"text-center text-sm text-muted",children:[(0,g.N)(eM.hue,M),": ",s.baseHsl.h,"\xb0"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>{let l={"--swatch":e.color};return(0,a.jsx)(o.Z,{onClick:()=>H(t),selected:r===t,correct:f?t===s.correctIndex:null,padding:"none",className:"aspect-square overflow-hidden",children:(0,a.jsx)(A.E.div,{className:"w-full h-full flex items-end justify-center pb-3 bg-swatch",style:l,whileHover:{scale:1.02},children:(0,a.jsx)("span",{className:"px-2 py-1 bg-[color:var(--surface-1-95)] rounded text-xs font-mono",children:t+1})})},t)})}),f&&(0,a.jsx)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:(0,a.jsx)("div",{className:"flex justify-center gap-4",children:s.options.map((e,t)=>(0,a.jsxs)("span",{className:"font-mono",children:[t+1,": ",e.hue,"\xb0",t===s.correctIndex&&" (".concat((0,g.N)(eM.correct,M),")")]},t))})})]}):null},eH=(e,t)=>{let s;let{r:a,g:l,b:r}=(0,x.oo)(e);switch(t){case"easy":s=(0,f.Iy)(60,100);break;case"medium":s=(0,f.Iy)(30,50);break;case"hard":s=(0,f.Iy)(10,25);break;case"expert":s=(0,f.Iy)(6,14)}let c="expert"===t?(0,f.TV)([0,1,2]).slice(0,2):[(0,f.Iy)(0,2)],o=Math.random()>.5?1:-1,n=c.includes(0)?Math.max(0,Math.min(255,a+o*s)):a,i=c.includes(1)?Math.max(0,Math.min(255,l+o*s)):l,d=c.includes(2)?Math.max(0,Math.min(255,r+o*s)):r;return(0,x.vq)(n,i,d)},eq=e=>{let t=(0,p.lV)(e),s=(0,x.Nj)(),{r:a,g:l,b:r}=(0,x.ve)(s.h,s.s,s.l),c=(0,x.vq)(a,l,r),o=new Set;for(;o.size<3;){let e=eH(c,t);e!==c&&o.add(e)}let n=(0,f.TV)([c,...o]),i=n.indexOf(c);return{color:c,hsl:s,options:n,correctIndex:i,difficulty:t}},eG=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[f,j]=(0,y.useState)(!1),[v,N]=(0,y.useState)(0),{addScore:b,incrementStreak:w,resetStreak:S,updateStats:C,addMistake:k,setReviewPause:I,language:M}=(0,m.g)(),{playCorrect:T,playWrong:L}=(0,u.c)();(0,y.useEffect)(()=>{l(eq(v))},[M]);let H=(0,y.useCallback)(e=>{if(f||!s)return;c(e),j(!0);let a=e===s.correctIndex;if(a)b("expert"===s.difficulty?280:"hard"===s.difficulty?250:"medium"===s.difficulty?200:150),w(),T();else{S(),L();let t=s.options[e],a=(0,x.oo)(t),l=(0,x.oo)(s.color),r="ru"===M?"Правильный":"Correct",c="ru"===M?"Ваш выбор":"Your choice",o="ru"===M?"HEX-код состоит из трёх пар цифр (RR GG BB). Правильный: R=".concat(l.r," G=").concat(l.g," B=").concat(l.b,". Ваш выбор: R=").concat(a.r," G=").concat(a.g," B=").concat(a.b,". Разница в каналах помогает различать близкие цвета."):"HEX code consists of three pairs (RR GG BB). Correct: R=".concat(l.r," G=").concat(l.g," B=").concat(l.b,". Your choice: R=").concat(a.r," G=").concat(a.g," B=").concat(a.b,". Channel differences help distinguish close colors.");k({question:"ru"===M?"Угадать HEX-код цвета":"Guess the HEX color code",userAnswer:t.toUpperCase(),correctAnswer:s.color.toUpperCase(),explanation:o,visual:{type:"colors",data:{[r]:s.color,[c]:t}}})}C("guess-hex",a);let r=a?1200:2400;I(r),setTimeout(()=>{t(a),N(e=>e+1),l(eq(v+1)),c(null),j(!1)},r)},[s,f,v,I,M]),q=(0,y.useCallback)(()=>{s&&!f&&(t(!1),N(e=>e+1),l(eq(v+1)),c(null),j(!1))},[s,f,v,t,M]);return((0,h.S)(q,!f),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&H(e)},!f),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===M?"Угадать HEX-код":"Guess the HEX code"}),(0,a.jsx)(n.N,{hint:"ru"===M?"HEX состоит из трёх пар (RR GG BB). Сравните тон и яркость со свотчем.":"HEX uses three pairs (RR GG BB). Compare hue and brightness with the swatch."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(M,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(A.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(i.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>H(t),selected:r===t,correct:f?e===s.color:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-mono text-lg",children:e.toUpperCase()}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),f&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted space-y-1",children:[(0,a.jsx)("div",{className:"font-mono",children:s.color.toUpperCase()}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]})]})]}):null},eE=(e,t)=>{let s,a,l;switch(t){case"easy":s=(0,f.Iy)(40,80),a=(0,f.Iy)(20,35),l=(0,f.Iy)(15,25);break;case"medium":s=(0,f.Iy)(20,40),a=(0,f.Iy)(10,20),l=(0,f.Iy)(8,15);break;case"hard":s=(0,f.Iy)(10,20),a=(0,f.Iy)(5,12),l=(0,f.Iy)(4,8);break;case"expert":s=(0,f.Iy)(6,12),a=(0,f.Iy)(3,7),l=(0,f.Iy)(2,5)}let r=Math.random()>.5?1:-1;return{h:((e.h+r*s)%360+360)%360,s:Math.max(10,Math.min(95,e.s+r*a)),l:Math.max(15,Math.min(85,e.l+r*l))}},ez=e=>{let t=(0,p.lV)(e),s={h:(0,f.Iy)(0,359),s:(0,f.Iy)(30,80),l:(0,f.Iy)(30,70)},{r:a,g:l,b:r}=(0,x.ve)(s.h,s.s,s.l),c=(0,x.vq)(a,l,r),o=new Set,n=[];for(;n.length<3;){let e=eE(s,t),a="".concat(e.h,"-").concat(e.s,"-").concat(e.l);o.has(a)||(o.add(a),n.push(e))}let i=(0,f.TV)([s,...n]),d=i.findIndex(e=>e.h===s.h&&e.s===s.s&&e.l===s.l);return{color:c,hsl:s,options:i,correctIndex:d,difficulty:t}},eD=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[x,f]=(0,y.useState)(!1),[j,v]=(0,y.useState)(0),{addScore:N,incrementStreak:b,resetStreak:w,updateStats:S,addMistake:C,setReviewPause:k,language:I}=(0,m.g)(),{playCorrect:M,playWrong:T}=(0,u.c)();(0,y.useEffect)(()=>{l(ez(j))},[I]);let L=(0,y.useCallback)(e=>{if(x||!s)return;c(e),f(!0);let a=e===s.correctIndex;if(a)N("expert"===s.difficulty?230:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),b(),M();else{w(),T();let t=s.options[e],a="ru"===I?"Цвет":"Color",l="ru"===I?"H (Hue) — тон на цветовом круге (0–360\xb0). S (Saturation) — насыщенность (0–100%). L (Lightness) — светлота (0–100%). Разница: H на ".concat(Math.abs(t.h-s.hsl.h),"\xb0, S на ").concat(Math.abs(t.s-s.hsl.s),"%, L на ").concat(Math.abs(t.l-s.hsl.l),"%"):"H (Hue) is the hue angle (0–360\xb0). S (Saturation) is saturation (0–100%). L (Lightness) is lightness (0–100%). Difference: H by ".concat(Math.abs(t.h-s.hsl.h),"\xb0, S by ").concat(Math.abs(t.s-s.hsl.s),"%, L by ").concat(Math.abs(t.l-s.hsl.l),"%");C({question:"ru"===I?"Определить HSL-параметры цвета":"Determine the HSL parameters of the color",userAnswer:"H=".concat(t.h,"\xb0 S=").concat(t.s,"% L=").concat(t.l,"%"),correctAnswer:"H=".concat(s.hsl.h,"\xb0 S=").concat(s.hsl.s,"% L=").concat(s.hsl.l,"%"),explanation:l,visual:{type:"colors",data:{[a]:s.color}}})}S("guess-params",a);let r=a?1200:2400;k(r),setTimeout(()=>{t(a),v(e=>e+1),l(ez(j+1)),c(null),f(!1)},r)},[s,x,j,k,I]),H=(0,y.useCallback)(()=>{s&&!x&&(t(!1),v(e=>e+1),l(ez(j+1)),c(null),f(!1))},[s,x,j,t,I]);return((0,h.S)(H,!x),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&L(e)},!x),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===I?"Угадать HSL-параметры":"Guess the HSL parameters"}),(0,a.jsx)(n.N,{hint:"ru"===I?"H — тон на круге, S — насыщенность, L — светлота.":"H is hue, S is saturation, L is lightness."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(I,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(A.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(i.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>L(t),selected:r===t,correct:x?t===s.correctIndex:null,children:(0,a.jsxs)("div",{className:"text-center font-mono text-sm space-y-1",children:[(0,a.jsxs)("div",{children:["H: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.h,"\xb0"]})]}),(0,a.jsxs)("div",{children:["S: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.s,"%"]})]}),(0,a.jsxs)("div",{children:["L: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.l,"%"]})]}),(0,a.jsxs)("div",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},t))}),x&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{className:"font-mono",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:s.color.toUpperCase()})]})]}):null};var eV=s(6579);let eF=(e,t)=>({ru:e,en:t}),eR={"light-to-dark":eF("Адаптируй для тёмной темы","Adapt for the dark theme"),"dark-to-light":eF("Адаптируй для светлой темы","Adapt for the light theme")},eB={"light-to-dark":eF("Инвертируй светлоту и слегка снизь насыщенность для тёмного UI.","Invert lightness and slightly reduce saturation for dark UI."),"dark-to-light":eF("Инвертируй светлоту и слегка увеличь насыщенность для светлого UI.","Invert lightness and slightly increase saturation for light UI.")},eP={"light-to-dark":eF("Для тёмной темы: инвертируй светлоту (L), слегка снизь насыщенность (S), сохрани тон (H). Это обеспечивает читаемость на тёмном фоне.","For a dark theme: invert lightness (L), slightly reduce saturation (S), keep hue (H). This ensures readability on a dark background."),"dark-to-light":eF("Для светлой темы: инвертируй светлоту (L), слегка увеличь насыщенность (S), сохрани тон (H). Это обеспечивает контраст на светлом фоне.","For a light theme: invert lightness (L), slightly increase saturation (S), keep hue (H). This ensures contrast on a light background.")},eW={original:eF("Оригинал","Original"),correct:eF("Правильный","Correct"),yourChoice:eF("Ваш выбор","Your choice"),originalTheme:eF("Оригинал (светлая тема)","Original (light theme)"),targetTheme:eF("Целевая тема","Target theme"),correctAdaptation:eF("Правильная адаптация","Correct adaptation")},eO=(e,t)=>({h:e.h,s:Math.max(e.s-("expert"===t?16:"hard"===t?12:10),18),l:Math.min(100-e.l+("expert"===t?20:"hard"===t?18:15),92)}),eY=(e,t)=>({h:e.h,s:Math.min(e.s+("expert"===t?16:"hard"===t?12:10),92),l:Math.max(100-e.l-("expert"===t?20:"hard"===t?18:15),18)}),eZ=(e,t)=>{let s,a,l;switch(t){case"easy":s=(0,f.Iy)(20,40),a=(0,f.Iy)(15,30),l=(0,f.Iy)(20,35);break;case"medium":s=(0,f.Iy)(10,25),a=(0,f.Iy)(10,20),l=(0,f.Iy)(12,22);break;case"hard":s=(0,f.Iy)(5,15),a=(0,f.Iy)(5,12),l=(0,f.Iy)(6,14);break;case"expert":s=(0,f.Iy)(3,9),a=(0,f.Iy)(4,8),l=(0,f.Iy)(4,8)}let r=Math.random()>.5?1:-1;return{h:((e.h+r*s)%360+360)%360,s:Math.max(10,Math.min(95,e.s+r*a)),l:Math.max(10,Math.min(90,e.l+r*l))}},eU=e=>{let t;let s=(0,p.lV)(e),a=(0,f.sD)(["light-to-dark","dark-to-light"]);t="light-to-dark"===a?{h:(0,f.Iy)(0,359),s:(0,f.Iy)(50,80),l:(0,f.Iy)(25,45)}:{h:(0,f.Iy)(0,359),s:(0,f.Iy)(40,70),l:(0,f.Iy)(55,75)};let{r:l,g:r,b:c}=(0,x.ve)(t.h,t.s,t.l),o=(0,x.vq)(l,r,c),n="light-to-dark"===a?eO(t,s):eY(t,s),i=[],d=new Set;for(d.add("".concat(n.h,"-").concat(n.s,"-").concat(n.l));i.length<3;){let e=eZ(n,s),t="".concat(e.h,"-").concat(e.s,"-").concat(e.l);d.has(t)||(d.add(t),i.push(e))}let h=[n,...i].map(e=>{let{r:t,g:s,b:a}=(0,x.ve)(e.h,e.s,e.l);return{color:(0,x.vq)(t,s,a),hsl:e}}),u=(0,f.TV)(h),m=u.findIndex(e=>e.hsl.h===n.h&&e.hsl.s===n.s&&e.hsl.l===n.l);return{originalColor:o,originalHsl:t,themeType:a,options:u,correctIndex:m,difficulty:s}},eX=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[x,f]=(0,y.useState)(!1),[j,v]=(0,y.useState)(0),{addScore:N,incrementStreak:b,resetStreak:w,updateStats:S,addMistake:C,setReviewPause:k,language:I}=(0,m.g)(),{playCorrect:M,playWrong:T}=(0,u.c)();(0,y.useEffect)(()=>{l(eU(j))},[]);let L=(0,y.useCallback)(e=>{if(x||!s)return;c(e),f(!0);let a=e===s.correctIndex,r=s.options[s.correctIndex];if(a)N("expert"===s.difficulty?210:"hard"===s.difficulty?180:"medium"===s.difficulty?140:110),b(),M();else{w(),T();let t=s.options[e];C({question:(0,g.N)(eR[s.themeType],I),userAnswer:"H=".concat(t.hsl.h,"\xb0 S=").concat(t.hsl.s,"% L=").concat(t.hsl.l,"%"),correctAnswer:"H=".concat(r.hsl.h,"\xb0 S=").concat(r.hsl.s,"% L=").concat(r.hsl.l,"%"),explanation:(0,g.N)(eP[s.themeType],I),visual:{type:"colors",data:{[(0,g.N)(eW.original,I)]:s.originalColor,[(0,g.N)(eW.correct,I)]:r.color,[(0,g.N)(eW.yourChoice,I)]:t.color}}})}S("theme-analog",a);let o=a?1200:2400;k(o),setTimeout(()=>{t(a),v(e=>e+1),l(eU(j+1)),c(null),f(!1)},o)},[s,x,j,k]),H=(0,y.useCallback)(()=>{s&&!x&&(t(!1),v(e=>e+1),l(eU(j+1)),c(null),f(!1))},[s,x,j,t]);if((0,h.S)(H,!x),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&L(e)},!x),!s)return null;let q={"--swatch":"light-to-dark"===s.themeType?"#1a1a1a":"#ffffff","--swatch-ink":"light-to-dark"===s.themeType?"#ffffff":"#1a1a1a"};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,g.N)(eR[s.themeType],I)}),(0,a.jsx)(n.N,{hint:(0,g.N)(eB[s.themeType],I)}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(I,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted text-center",children:(0,g.N)(eW.originalTheme,I)}),(0,a.jsx)("div",{className:"bg-surface rounded-xl p-4 flex items-center justify-center h-24 border border-subtle shadow-card",children:(0,a.jsx)(i.m,{color:s.originalColor,className:"w-16 h-16 rounded-lg shadow-card border border-subtle"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted text-center",children:(0,g.N)(eW.targetTheme,I)}),(0,a.jsx)("div",{className:"rounded-xl p-4 flex items-center justify-center h-24 bg-swatch text-swatch border border-subtle shadow-card",style:q,children:(0,a.jsx)("span",{className:"text-2xl",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"text-center text-xs text-muted",children:["HSL(",s.originalHsl.h,"\xb0, ",s.originalHsl.s,"%, ",s.originalHsl.l,"%)"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>L(t),selected:r===t,correct:x?t===s.correctIndex:null,padding:"none",className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"p-3 flex items-center gap-3 bg-swatch text-swatch",style:q,children:[(0,a.jsx)(i.m,{color:e.color,className:"w-12 h-12 rounded-lg shadow-card border border-subtle"}),(0,a.jsxs)("div",{className:"text-xs font-mono",children:[(0,a.jsxs)("div",{children:["H: ",e.hsl.h,"\xb0"]}),(0,a.jsxs)("div",{children:["S: ",e.hsl.s,"%"]}),(0,a.jsxs)("div",{children:["L: ",e.hsl.l,"%"]})]}),(0,a.jsxs)("span",{className:"ml-auto text-xs opacity-50 hidden sm:inline",children:["[",t+1,"]"]})]})},t))}),x&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,g.N)(eW.correctAdaptation,I),": H=",s.options[s.correctIndex].hsl.h,"\xb0 S=",s.options[s.correctIndex].hsl.s,"% L=",s.options[s.correctIndex].hsl.l,"%"]})]})},e_=(e,t)=>({ru:e,en:t}),eQ={warm:{title:e_("Найти самый тёплый цвет","Find the warmest color"),hint:e_("Тёплые оттенки ближе к красному и жёлтому сектору.","Warm hues sit closer to the red and yellow sector.")},cool:{title:e_("Найти самый холодный цвет","Find the coolest color"),hint:e_("Холодные оттенки ближе к синему и голубому сектору.","Cool hues sit closer to the blue and cyan sector.")}},eJ=e_("Тёплые тона лежат ближе к красно-жёлтой зоне, холодные — к синей. Сравните положение оттенка на круге.","Warm tones are closer to the red-yellow zone, cool ones to blue. Compare the hue position on the wheel."),eK={easy:100,medium:120,hard:150,expert:180},e$=[[70,140],[240,300]],e0=e=>{let[t,s]=(0,f.sD)(e);return(0,f.Iy)(t,s)},e1=(e,t)=>{let s={easy:[[0,50],[310,360]],medium:[[10,60],[300,350]],hard:[[20,70],[290,340]],expert:[[30,75],[285,330]]},a={easy:[[170,230]],medium:[[160,240]],hard:[[150,250]],expert:[[140,260]]};return{targetRanges:"warm"===e?s[t]:a[t],wrongRanges:"warm"===e?[...a[t],...e$]:[...s[t],...e$]}},e2=(e,t,s)=>{let{r:a,g:l,b:r}=(0,x.ve)(e,t,s);return(0,x.vq)(a,l,r)},e3=e=>{let t=(0,p.lV)(e),s=(0,f.sD)(["warm","cool"]),{targetRanges:a,wrongRanges:l}=e1(s,t),r=[],c=new Set,o=e0(a),n=e2(o,(0,f.Iy)(45,85),(0,f.Iy)(35,70));for(r.push({color:n,hue:o}),c.add(o);r.length<4;){let e=e0(l);c.has(e)||(c.add(e),r.push({color:e2(e,(0,f.Iy)(35,80),(0,f.Iy)(30,75)),hue:e}))}let i=(0,f.TV)(r),d=i.findIndex(e=>e.hue===o);return{options:i,correctIndex:d,target:s,difficulty:t}},e5=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[x,f]=(0,y.useState)(!1),[j,v]=(0,y.useState)(0),{addScore:N,incrementStreak:b,resetStreak:w,updateStats:S,addMistake:C,setReviewPause:k,language:I}=(0,m.g)(),{playCorrect:M,playWrong:T}=(0,u.c)();(0,y.useEffect)(()=>{l(e3(j))},[]);let L=(0,y.useCallback)(e=>{if(x||!s)return;c(e),f(!0);let a=e===s.correctIndex;if(a)N(eK[s.difficulty]),b(),M();else{w(),T();let t=s.options[e],a=s.options[s.correctIndex],l="ru"===I?"Ваш выбор":"Your choice",r="ru"===I?"Правильный":"Correct";C({question:(0,g.N)(eQ[s.target].title,I),userAnswer:"Hue ".concat(t.hue,"\xb0"),correctAnswer:"Hue ".concat(a.hue,"\xb0"),explanation:(0,g.N)(eJ,I),visual:{type:"colors",data:{[l]:t.color,[r]:a.color}}})}S("color-temperature",a);let r=a?1200:2400;k(r),setTimeout(()=>{t(a),v(e=>e+1),l(e3(j+1)),c(null),f(!1)},r)},[s,x,j,k]),H=(0,y.useCallback)(()=>{s&&!x&&(t(!1),v(e=>e+1),l(e3(j+1)),c(null),f(!1))},[s,x,j,t]);return((0,h.S)(H,!x),(0,d.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&L(e)},!x),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,g.N)(eQ[s.target].title,I)}),(0,a.jsx)(n.N,{hint:(0,g.N)(eQ[s.target].hint,I)}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(I,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>L(t),selected:r===t,correct:x?t===s.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(i.m,{color:e.color,className:"w-full h-24 rounded-xl border border-subtle shadow-card"}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},"".concat(e.color,"-").concat(t)))}),x&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["ru"===I?"Правильный оттенок":"Correct hue",": Hue"," ",s.options[s.correctIndex].hue,"\xb0"]})]}):null},e4=[300,400,500,600,700,800],e6={300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold"},e8={easy:100,medium:120,hard:150,expert:180},e7=e=>{if("easy"===e)return(0,f.TV)([300,400,700,800]);if("medium"===e)return(0,f.sD)([[300,400,600,800],[300,500,600,800],[300,500,700,800],[400,500,700,800]]);let t="expert"===e?(0,f.sD)([1,2]):(0,f.sD)([0,1,2]);return e4.slice(t,t+4)},e9=(e,t)=>{let s=(0,p.lV)(e),a=(0,f.sD)(["heavier","lighter"]),l=e7(s),r=(0,f.c4)(t),c=l.indexOf("heavier"===a?Math.max(...l):Math.min(...l));return{weights:l,correctIndex:c,mode:a,text:r,difficulty:s}},te=e=>{let{onAnswer:t}=e,[s,l]=(0,y.useState)(null),[r,c]=(0,y.useState)(null),[i,x]=(0,y.useState)(!1),[f,j]=(0,y.useState)(0),{addScore:v,incrementStreak:N,resetStreak:b,updateStats:w,addMistake:S,setReviewPause:C,language:k}=(0,m.g)(),{playCorrect:I,playWrong:M}=(0,u.c)();(0,y.useEffect)(()=>{l(e9(f,k))},[k]);let T=(0,y.useCallback)(e=>{if(i||!s)return;c(e),x(!0);let a=e===s.correctIndex;if(a)v(e8[s.difficulty]),N(),I();else{b(),M();let t=s.weights[s.correctIndex],a=s.weights[e];S({question:"ru"===k?"heavier"===s.mode?"Найти самый жирный текст":"Найти самый лёгкий текст":"heavier"===s.mode?"Find the heaviest text":"Find the lightest text",userAnswer:"ru"===k?"Вес ".concat(a):"Weight ".concat(a),correctAnswer:"ru"===k?"Вес ".concat(t):"Weight ".concat(t),explanation:"ru"===k?"Сравните визуальную толщину штрихов: больший вес делает буквы заметно массивнее.":"Compare stroke thickness: heavier weights make letters noticeably bolder."})}w("font-weight",a);let r=a?1200:2400;C(r),setTimeout(()=>{t(a),j(e=>e+1),l(e9(f+1,k)),c(null),x(!1)},r)},[s,i,f,C,k]),L=(0,y.useCallback)(()=>{s&&!i&&(t(!1),j(e=>e+1),l(e9(f+1,k)),c(null),x(!1))},[s,i,f,t,k]);return((0,h.S)(L,!i),(0,d.A)(e=>{e<((null==s?void 0:s.weights.length)||0)&&T(e)},!i),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===k?"heavier"===s.mode?"Найти самый жирный текст":"Найти самый лёгкий текст":"heavier"===s.mode?"Find the heaviest text":"Find the lightest text"}),(0,a.jsx)(n.N,{hint:"ru"===k?"Сравните толщину штриха: более жирный выглядит темнее и массивнее.":"Compare stroke thickness: heavier weights look darker and more massive."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(k,"difficultyLabel"),": ",(0,p.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.weights.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>T(t),selected:r===t,correct:i?t===s.correctIndex:null,children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(A.E.span,{className:"text-2xl text-strong ".concat(e6[e]),initial:{opacity:0},animate:{opacity:1},children:s.text}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},e))}),i&&(0,a.jsxs)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["ru"===k?"Вес правильного варианта":"Correct weight",":"," ",s.weights[s.correctIndex]]})]}):null};var tt=s(996),ts=s(7331);let ta=(e,t)=>"string"==typeof e?e:(0,g.N)(e,t),tl=(e,t)=>{if(e.palette&&e.palette.length>0){let s=e.label?ta(e.label,t):"";return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1",children:e.palette.map((e,t)=>(0,a.jsx)(i.m,{color:e,className:"w-8 h-8 rounded-lg border border-subtle"},"".concat(e,"-").concat(t)))}),s&&(0,a.jsx)("span",{className:"text-xs text-soft",children:s})]})}if(e.color){let s=e.label?ta(e.label,t):e.color;return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(i.m,{color:e.color,className:"w-full h-20 rounded-xl border border-subtle shadow-card"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:s})]})}if("number"==typeof e.size){let s=Math.min(e.size,32),l=e.label?ta(e.label,t):"".concat(e.size,"px");return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-strong ".concat((0,k.rS)(s,"text-[32px]")),children:"Aa"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:l})]})}return(0,a.jsx)("span",{className:"text-sm text-strong",children:e.label?ta(e.label,t):""})},tr={ru:"Вариант",en:"Option"},tc=(e,t)=>e.label?ta(e.label,t):e.color?e.color:e.palette?e.palette.join(", "):"number"==typeof e.size?"".concat(e.size,"px"):tr[t],to=e=>{var t,s,l,r;let{gameId:c,onAnswer:i}=e,{addScore:x,incrementStreak:j,resetStreak:v,updateStats:N,addMistake:b,language:w,avoidRepeats:S,setReviewPause:C}=(0,m.g)(),{playCorrect:k,playWrong:I}=(0,u.c)(),[M,T]=(0,y.useState)(0),[L,H]=(0,y.useState)(null),[q,G]=(0,y.useState)(!1),E=ts.u[c]||[],z=(0,y.useMemo)(()=>(0,f.TV)(E.map((e,t)=>t)),[E.length]),D=z.length>0?S?z[M]:z[M%z.length]:-1,V="number"==typeof D?E[D]:null,F=(0,y.useMemo)(()=>{if(!V)return null;let e=(0,f.TV)(V.options.map((e,t)=>t)),t=e.map(e=>V.options[e]),s=e.indexOf(V.correctIndex);return{question:V,options:t,correctIndex:s}},[V]),R=(0,y.useCallback)(e=>{if(!F||q)return;H(e),G(!0);let t=e===F.correctIndex;if(t)x(tt.Wp[c].pointsPerCorrect),j(),k();else{var s,a,l,r,o,n;v(),I();let t=F.options[e],c=F.options[F.correctIndex];b({question:ta(F.question.prompt,w),userAnswer:tc(t,w),correctAnswer:tc(c,w),explanation:ta(F.question.explanation,w),visual:t.color||c.color?{type:"colors",data:{Correct:c.color||"",Selected:t.color||""}}:t.palette||c.palette?{type:"colors",data:{"Correct 1":(null===(s=c.palette)||void 0===s?void 0:s[0])||"","Correct 2":(null===(a=c.palette)||void 0===a?void 0:a[1])||"","Correct 3":(null===(l=c.palette)||void 0===l?void 0:l[2])||"","Selected 1":(null===(r=t.palette)||void 0===r?void 0:r[0])||"","Selected 2":(null===(o=t.palette)||void 0===o?void 0:o[1])||"","Selected 3":(null===(n=t.palette)||void 0===n?void 0:n[2])||""}}:void 0})}N(c,t);let d=t?1200:2400;C(d),setTimeout(()=>{i(t),T(e=>e+1),H(null),G(!1)},d)},[F,q,c,w,C]),B=(0,y.useCallback)(()=>{F&&!q&&(i(!1),T(e=>e+1),H(null),G(!1))},[F,q,i]);if((0,h.S)(B,!q),(0,d.v)({1:()=>F&&F.options.length>0&&R(0),2:()=>F&&F.options.length>1&&R(1),3:()=>F&&F.options.length>2&&R(2),4:()=>F&&F.options.length>3&&R(3),5:()=>F&&F.options.length>4&&R(4),6:()=>F&&F.options.length>5&&R(5),Digit1:()=>F&&F.options.length>0&&R(0),Digit2:()=>F&&F.options.length>1&&R(1),Digit3:()=>F&&F.options.length>2&&R(2),Digit4:()=>F&&F.options.length>3&&R(3),Digit5:()=>F&&F.options.length>4&&R(4),Digit6:()=>F&&F.options.length>5&&R(5)},!q),!F)return(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,g.t)(w,"noQuestionsTitle")}),(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,g.t)(w,"noQuestionsHint")})]});let P=null!==(t=F.question.difficulty)&&void 0!==t?t:(0,p.lV)(M),W=F.options.length<=4?"grid-cols-2":"grid-cols-2 sm:grid-cols-3",O=null!==(s=F.question.imageContainerClass)&&void 0!==s?s:"flex justify-center",Y=null!==(l=F.question.imageFrameClass)&&void 0!==l?l:"w-full max-w-2xl aspect-[4/3]",Z=null!==(r=F.question.imageClass)&&void 0!==r?r:"object-cover";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:ta(F.question.prompt,w)}),(0,a.jsx)(n.N,{hint:F.question.helper?ta(F.question.helper,w):void 0}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(w,"difficultyLabel"),": ",(0,p.Yy)(P)]})]}),(0,a.jsx)("div",{className:O,children:(0,a.jsx)("div",{className:"overflow-hidden rounded-2xl border border-subtle shadow-card ".concat(Y),children:(0,a.jsx)("img",{src:F.question.imageSrc,alt:ta(F.question.imageAlt,w),className:"w-full h-full ".concat(Z),loading:"lazy",decoding:"async"})})}),F.question.imageSource&&(0,a.jsxs)("div",{className:"text-center text-xs text-soft",children:[(0,g.t)(w,"imageSourceLabel"),":"," ",F.question.imageSource.url?(0,a.jsx)("a",{href:F.question.imageSource.url,target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:ta(F.question.imageSource.label,w)}):ta(F.question.imageSource.label,w)]}),(0,a.jsx)("div",{className:"grid gap-3 ".concat(W),children:F.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>R(t),selected:L===t,correct:q?t===F.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[tl(e,w),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},"".concat(e.label,"-").concat(t)))}),q&&(0,a.jsx)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:ta(F.question.explanation,w)})]})},tn=e=>{let t=t=>"string"==typeof t?t:(0,g.N)(t,e);return[...eV.S.map((t,s)=>({id:"quiz-".concat(s),sourceGameId:"quiz",prompt:(0,g.N)(t.question,e),helper:(0,g.N)(t.explanation,e),explanation:(0,g.N)(t.explanation,e),options:t.options.map(t=>({label:(0,g.N)(t,e)})),correctIndex:t.correctIndex,difficulty:t.difficulty})),...Object.entries(ts.u).flatMap(e=>{let[s,a]=e;return a.map(e=>({id:"".concat(s,"-").concat(e.id),sourceGameId:s,prompt:t(e.prompt),helper:e.helper?t(e.helper):void 0,explanation:t(e.explanation),options:e.options.map(e=>({...e,label:e.label?t(e.label):void 0})),correctIndex:e.correctIndex,difficulty:e.difficulty,imageSrc:e.imageSrc,imageAlt:t(e.imageAlt),imageSource:e.imageSource?{...e.imageSource,label:t(e.imageSource.label)}:void 0,imageContainerClass:e.imageContainerClass,imageFrameClass:e.imageFrameClass,imageClass:e.imageClass}))})]},ti=e=>{if(e.palette&&e.palette.length>0)return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1",children:e.palette.map((e,t)=>(0,a.jsx)(i.m,{color:e,className:"w-8 h-8 rounded-lg border border-subtle"},"".concat(e,"-").concat(t)))}),e.label&&(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label})]});if(e.color)return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(i.m,{color:e.color,className:"w-full h-20 rounded-xl border border-subtle shadow-card"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label||e.color})]});if("number"==typeof e.size){let t=Math.min(e.size,32);return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-strong ".concat((0,k.rS)(t,"text-[32px]")),children:"Aa"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label||"".concat(e.size,"px")})]})}return(0,a.jsx)("span",{className:"text-sm text-strong",children:e.label})},td={ru:"Вариант",en:"Option"},th=(e,t)=>e.label?e.label:e.color?e.color:e.palette?e.palette.join(", "):"number"==typeof e.size?"".concat(e.size,"px"):td[t],tu=e=>{var t,s,l,r;let{onAnswer:c,totalQuestions:i}=e,{addScore:x,incrementStreak:j,resetStreak:v,updateStats:N,addMistake:b,language:w,avoidRepeats:S,setReviewPause:C}=(0,m.g)(),{playCorrect:k,playWrong:I}=(0,u.c)(),[M,T]=(0,y.useState)(0),[L,H]=(0,y.useState)(null),[q,G]=(0,y.useState)(!1),E=tt.Wp["long-test"].pointsPerCorrect,z=(0,y.useMemo)(()=>tn(w),[w]),D=S&&z.length>0?Math.min(i,z.length):i,V=(0,y.useMemo)(()=>0===z.length||0===D?[]:S?(0,f.TV)(z.map((e,t)=>t)).slice(0,D):Array.from({length:D},()=>Math.floor(Math.random()*z.length)),[z.length,D,S])[M],F="number"==typeof V?z[V]:null,R=(0,y.useMemo)(()=>{if(!F)return null;let e=(0,f.TV)(F.options.map((e,t)=>t)),t=e.map(e=>F.options[e]),s=e.indexOf(F.correctIndex);return{...F,options:t,correctIndex:s}},[F]),B=(0,y.useCallback)(e=>{if(!R||q)return;H(e),G(!0);let t=e===R.correctIndex;if(t)x(E),j(),k();else{var s,a,l,r,o,n;v(),I();let t=R.options[e],c=R.options[R.correctIndex];b({question:R.prompt,userAnswer:th(t,w),correctAnswer:th(c,w),explanation:R.explanation,visual:t.color||c.color?{type:"colors",data:{Correct:c.color||"",Selected:t.color||""}}:t.palette||c.palette?{type:"colors",data:{"Correct 1":(null===(s=c.palette)||void 0===s?void 0:s[0])||"","Correct 2":(null===(a=c.palette)||void 0===a?void 0:a[1])||"","Correct 3":(null===(l=c.palette)||void 0===l?void 0:l[2])||"","Selected 1":(null===(r=t.palette)||void 0===r?void 0:r[0])||"","Selected 2":(null===(o=t.palette)||void 0===o?void 0:o[1])||"","Selected 3":(null===(n=t.palette)||void 0===n?void 0:n[2])||""}}:void 0})}N("long-test",t);let i=t?1200:2400;C(i),setTimeout(()=>{c(t),T(e=>e+1),H(null),G(!1)},i)},[R,q,w,C]),P=(0,y.useCallback)(()=>{R&&!q&&(c(!1),T(e=>e+1),H(null),G(!1))},[R,q,c]);if((0,h.S)(P,!q),(0,d.v)({1:()=>R&&R.options.length>0&&B(0),2:()=>R&&R.options.length>1&&B(1),3:()=>R&&R.options.length>2&&B(2),4:()=>R&&R.options.length>3&&B(3),5:()=>R&&R.options.length>4&&B(4),6:()=>R&&R.options.length>5&&B(5),Digit1:()=>R&&R.options.length>0&&B(0),Digit2:()=>R&&R.options.length>1&&B(1),Digit3:()=>R&&R.options.length>2&&B(2),Digit4:()=>R&&R.options.length>3&&B(3),Digit5:()=>R&&R.options.length>4&&B(4),Digit6:()=>R&&R.options.length>5&&B(5)},!q),!R)return(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,g.t)(w,"noQuestionsTitle")}),(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,g.t)(w,"noQuestionsHint")})]});let W=null!==(t=R.difficulty)&&void 0!==t?t:(0,p.lV)(M),O=R.options.some(e=>e.color||e.palette||"number"==typeof e.size),Y=R.options.length<=4?"grid-cols-2":"grid-cols-2 sm:grid-cols-3",Z=null!==(s=R.imageContainerClass)&&void 0!==s?s:"flex justify-center",U=null!==(l=R.imageFrameClass)&&void 0!==l?l:"w-full max-w-2xl aspect-[4/3]",X=null!==(r=R.imageClass)&&void 0!==r?r:"object-cover";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:R.prompt}),(0,a.jsx)(n.N,{hint:R.helper}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,g.t)(w,"difficultyLabel"),": ",(0,p.Yy)(W)]})]}),R.imageSrc&&(0,a.jsx)("div",{className:Z,children:(0,a.jsx)("div",{className:"overflow-hidden rounded-2xl border border-subtle shadow-card ".concat(U),children:(0,a.jsx)("img",{src:R.imageSrc,alt:R.imageAlt||"",className:"w-full h-full ".concat(X),loading:"lazy",decoding:"async"})})}),R.imageSource&&(0,a.jsxs)("div",{className:"text-center text-xs text-soft",children:[(0,g.t)(w,"imageSourceLabel"),":"," ",R.imageSource.url?(0,a.jsx)("a",{href:R.imageSource.url,target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:R.imageSource.label}):R.imageSource.label]}),O?(0,a.jsx)("div",{className:"grid gap-3 ".concat(Y),children:R.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>B(t),selected:L===t,correct:q?t===R.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[ti(e),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},"".concat(e.label,"-").concat(t)))}):(0,a.jsx)("div",{className:"flex flex-col gap-2 sm:gap-3",children:R.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>B(t),selected:L===t,correct:q?t===R.correctIndex:null,className:"min-h-[56px]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-surface-2 rounded-full flex items-center justify-center text-sm font-mono text-muted",children:t+1}),(0,a.jsx)("span",{children:th(e,w)})]})},"".concat(e.label,"-").concat(t)))}),q&&(0,a.jsx)(A.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:R.explanation})]})};var tm=s(9376);let tx=eV.S.length+Object.values(ts.u).reduce((e,t)=>e+t.length,0);function tp(e){var t,s;let{gameId:c,GameComponent:o,nextGame:n}=e,[i,d]=(0,y.useState)(0),[h,u]=(0,y.useState)(0),{customMode:x,customQuestions:p,avoidRepeats:f}=(0,m.g)(),g=(null===(t=p[c])||void 0===t?void 0:t.length)||0,j=!!x[c]&&g>0,v=ts.y.includes(c)&&(null===(s=ts.u[c])||void 0===s?void 0:s.length)||0,N=j?g:"quiz"===c?eV.S.length:v,b=(0,y.useCallback)(e=>{d(e=>e+1),e&&u(e=>e+1)},[]);return(0,a.jsx)(l.s,{gameId:c,totalChallenges:f&&N>0?Math.min(10,N):10,currentChallenge:i,correctCount:h,onRestart:()=>{d(0),u(0)},nextGame:n,children:j?(0,a.jsx)(r.mo,{gameId:c,onAnswer:b}):(0,a.jsx)(o,{onAnswer:b})})}function tf(e){let{nextGame:t}=e,[s,r]=(0,y.useState)(0),[c,o]=(0,y.useState)(0),{avoidRepeats:n,longTestLength:i}=(0,m.g)(),d=n&&tx>0?Math.min(i,tx):i,h=(0,y.useCallback)(e=>{r(e=>e+1),e&&o(e=>e+1)},[]);return(0,a.jsx)(l.s,{gameId:"long-test",totalChallenges:d,currentChallenge:s,correctCount:c,onRestart:()=>{r(0),o(0)},nextGame:t,children:(0,a.jsx)(tu,{totalQuestions:d,onAnswer:h})})}function tg(e){let{gameId:t}=e,s=(0,tm.useSearchParams)(),[l,r]=(0,y.useState)(!1);(0,y.useEffect)(()=>{r(!0)},[]);let o=(0,y.useMemo)(()=>{let e=s.get("next");if(!e)return[];try{let t=JSON.parse(e);if(!Array.isArray(t))return[];return t.filter(e=>!!tt.Wp[e])}catch(e){return[]}},[s]),n=o.length>0?{id:o[0],queue:o.slice(1)}:null;if(!l)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,a.jsx)(c.Skeleton,{className:"h-8 w-32"}),(0,a.jsx)(c.Skeleton,{className:"h-40 w-full rounded-2xl"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(c.Skeleton,{className:"h-20 w-full rounded-xl"}),(0,a.jsx)(c.Skeleton,{className:"h-20 w-full rounded-xl"})]}),(0,a.jsx)(c.Skeleton,{className:"h-10 w-full rounded-xl"})]})});switch(t){case"color-compare":return(0,a.jsx)(tp,{gameId:t,GameComponent:C,nextGame:n});case"font-size":return(0,a.jsx)(tp,{gameId:t,GameComponent:q,nextGame:n});case"guess-font":return(0,a.jsx)(tp,{gameId:t,GameComponent:V,nextGame:n});case"color-params":return(0,a.jsx)(tp,{gameId:t,GameComponent:Z,nextGame:n});case"color-temperature":return(0,a.jsx)(tp,{gameId:t,GameComponent:e5,nextGame:n});case"accessibility":return(0,a.jsx)(tp,{gameId:t,GameComponent:en,nextGame:n});case"palette-error":return(0,a.jsx)(tp,{gameId:t,GameComponent:ep,nextGame:n});case"size-sequence":return(0,a.jsx)(tp,{gameId:t,GameComponent:eS,nextGame:n});case"complementary":return(0,a.jsx)(tp,{gameId:t,GameComponent:eL,nextGame:n});case"guess-hex":return(0,a.jsx)(tp,{gameId:t,GameComponent:eG,nextGame:n});case"guess-params":return(0,a.jsx)(tp,{gameId:t,GameComponent:eD,nextGame:n});case"quiz":return(0,a.jsx)(tp,{gameId:t,GameComponent:eV.A,nextGame:n});case"theme-analog":return(0,a.jsx)(tp,{gameId:t,GameComponent:eX,nextGame:n});case"font-weight":return(0,a.jsx)(tp,{gameId:t,GameComponent:te,nextGame:n});case"long-test":return(0,a.jsx)(tf,{nextGame:n});default:if(ts.y.includes(t))return(0,a.jsx)(tp,{gameId:t,GameComponent:e=>(0,a.jsx)(to,{gameId:t,onAnswer:e.onAnswer}),nextGame:n});return null}}}},function(e){e.O(0,[699,883,681,600,217,971,117,744],function(){return e(e.s=6847)}),_N_E=e.O()}]);