(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[184],{6847:function(e,t,s){Promise.resolve().then(s.bind(s,8412))},8412:function(e,t,s){"use strict";s.d(t,{GamePageClient:function(){return tm}});var a=s(7437),l=s(6371),r=s(367),n=s(4350),c=s(2265),o=s(2099),i=s(4171),d=s(3782),h=s(5911),u=s(4690),m=s(4018),x=s(8832);let p=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},f=(e,t,s)=>"#"+[e,t,s].map(e=>{let t=Math.round(Math.max(0,Math.min(255,e))).toString(16);return 1===t.length?"0"+t:t}).join(""),g=(e,t,s)=>{let a,l,r;if(e/=360,s/=100,0==(t/=100))a=l=r=s;else{let n=(e,t,s)=>(s<0&&(s+=1),s>1&&(s-=1),s<1/6)?e+(t-e)*6*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e,c=s<.5?s*(1+t):s+t-s*t,o=2*s-c;a=n(o,c,e+1/3),l=n(o,c,e),r=n(o,c,e-1/3)}return{r:Math.round(255*a),g:Math.round(255*l),b:Math.round(255*r)}},y=()=>({h:Math.floor(360*Math.random()),s:Math.floor(60*Math.random())+40,l:Math.floor(50*Math.random())+25}),j=e=>(e+180)%360,b=(e,t,s)=>{let[a,l,r]=[e,t,s].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return .2126*a+.7152*l+.0722*r},v=(e,t)=>{let s=p(e),a=p(t),l=b(s.r,s.g,s.b),r=b(a.r,a.g,a.b);return(Math.max(l,r)+.05)/(Math.min(l,r)+.05)};var N=s(2746),w=s(3821),S=s(6769);let C={brighter:{title:{ru:"Какой цвет ярче?",en:"Which color is brighter?"},helper:{ru:"Сравни светлоту (L): у яркого цвета значение L выше.",en:"Compare lightness (L): the brighter color has a higher L."},axis:"l",target:"max"},darker:{title:{ru:"Какой цвет темнее?",en:"Which color is darker?"},helper:{ru:"Сравни светлоту (L): у темного цвета значение L ниже.",en:"Compare lightness (L): the darker color has a lower L."},axis:"l",target:"min"},saturated:{title:{ru:"Какой цвет насыщеннее?",en:"Which color is more saturated?"},helper:{ru:"Сравни насыщенность (S): у насыщенного цвета значение S выше.",en:"Compare saturation (S): the more saturated color has a higher S."},axis:"s",target:"max"},muted:{title:{ru:"Какой цвет более приглушённый?",en:"Which color is more muted?"},helper:{ru:"Сравни насыщенность (S): у приглушённого цвета значение S ниже.",en:"Compare saturation (S): the more muted color has a lower S."},axis:"s",target:"min"}},k={easy:26,medium:16,hard:10,expert:6},A={easy:100,medium:120,hard:150,expert:180},I=(e,t,s)=>{let a=new Set([e[t]]),l="l"===t?12:15,r="l"===t?92:95;for(;a.size<4;){let n=Math.floor(Math.random()*s*2)-s;0!==n&&a.add((0,N.uZ)(e[t]+n,l,r))}return(0,N.TV)([...a]).map(s=>{let a={...e,[t]:s},{r:l,g:r,b:n}=g(a.h,a.s,a.l);return{color:f(l,r,n),hsl:a}})},M=(e,t,s)=>{let a=e.map(e=>e.hsl[t]);return a.indexOf("max"===s?Math.max(...a):Math.min(...a))},T=e=>{let t=(0,w.lV)(e),s=(0,N.sD)(["brighter","darker","saturated","muted"]),a=C[s],l=k[t],r=y();r.s=(0,N.uZ)(r.s,35,85),r.l=(0,N.uZ)(r.l,28,78);let n=I(r,a.axis,l),c=M(n,a.axis,a.target);return{compareType:s,difficulty:t,options:n,correctIndex:c}},L=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[p,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(0),{addScore:j,incrementStreak:b,resetStreak:v,updateStats:N,addMistake:k,setReviewPause:I,language:M}=(0,x.g)(),{playCorrect:L,playWrong:H}=(0,m.c)();(0,c.useEffect)(()=>{l(T(0))},[]);let G=(0,c.useCallback)(e=>{if(!s||p)return;n(e),f(!0);let a=e===s.correctIndex;if(a)j(A[s.difficulty]),b(),L();else{v(),H();let t=C[s.compareType],a=s.options[s.correctIndex],l=s.options[e],r="l"===t.axis?"L":"S",n=(0,S.N)(t.helper,M),c="ru"===M?"У правильного варианта ".concat(r,"=").concat(a.hsl[t.axis]).concat("%",", у выбранного ").concat(r,"=").concat(l.hsl[t.axis]).concat("%",". ").concat(n):"The correct option has ".concat(r,"=").concat(a.hsl[t.axis]).concat("%",", the selected one has ").concat(r,"=").concat(l.hsl[t.axis]).concat("%",". ").concat(n),o="ru"===M?"Правильный":"Correct",i="ru"===M?"Выбранный":"Selected";k({question:(0,S.N)(t.title,M),userAnswer:(0,S.t)(M,"optionLabel",{index:e+1}),correctAnswer:(0,S.t)(M,"optionLabel",{index:s.correctIndex+1}),explanation:c,visual:{type:"colors",data:{[o]:a.color,[i]:l.color}}})}N("color-compare",a);let r=a?1200:2400;I(r),setTimeout(()=>{t(a);let e=g+1;y(e),l(T(e)),n(null),f(!1)},r)},[s,p,g,I]),q=(0,c.useCallback)(()=>{if(!s||p)return;t(!1);let e=g+1;y(e),l(T(e)),n(null),f(!1)},[s,p,g,t]);if((0,u.S)(q,!p),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&G(e)},!p),!s)return null;let E=C[s.compareType];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,S.N)(E.title,M)}),(0,a.jsx)(i.N,{hint:(0,S.N)(E.helper,M)}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(M,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>G(t),selected:r===t,correct:p?t===s.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(d.m,{color:e.color,className:"w-full h-24 rounded-xl border border-subtle shadow-card"}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},e.color))})]})};var H=s(521),G=s(4155);let q={modular:[12,14,16,18,20,24,30,36,48,60,72],linear:[12,14,16,18,20,22,24,26,28,30,32],ios:[11,13,15,17,20,22,28,34],material:[10,12,14,16,20,24,34,48,60],bootstrap:[12,14,16,20,24,28,32,36,48],editorial:[14,16,18,22,26,32,40,52,64],compact:[10,11,12,13,14,15,16,17,18]},E=(e,t)=>({ru:e,en:t}),z={ru:["Типографика","Дизайн-система","Визуальный баланс","Негативное пространство","Композиция","Гармония цвета","Иерархия","Консистентность","Читаемость","Контраст","Ритм и паттерн","Модульная сетка","Выравнивание","Доступность","Интерфейс","Пропорции","Баланс","Контекст","Гарнитура","Распознавание","Навигация","Привычка","Сетка","Ритм","Градация","Группа","Отклик","Тон","Динамика"],en:["Typography","Design system","Visual balance","Negative space","Composition","Color harmony","Hierarchy","Consistency","Readability","Contrast","Rhythm and pattern","Modular grid","Alignment","Accessibility","Interface","Proportions","Balance","Context","Typeface","Recognition","Navigation","Habit","Grid","Rhythm","Gradation","Group","Response","Tone","Dynamics"]},D={modular:E("Модульная","Modular"),linear:E("Линейная","Linear"),ios:E("iOS","iOS"),material:E("Material","Material"),bootstrap:E("Bootstrap","Bootstrap"),editorial:E("Редакционная","Editorial"),compact:E("Компактная","Compact")},V=(e,t,s)=>{let a=t.indexOf(e),l=new Set([e]);for(let e of({easy:[-3,-2,-1,1,2,3],medium:[-2,-1,1,2],hard:[-1,1,2],expert:[-1,1]})[s]){let s=t[a+e];if("number"==typeof s&&l.add(s),l.size>=4)break}let r=t.filter(e=>!l.has(e));for(;l.size<4&&r.length>0;){let e=(0,N.sD)(r);l.add(e),r.splice(r.indexOf(e),1)}return(0,N.TV)([...l]).slice(0,4)},F=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[d,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(0),y=(0,c.useRef)(0),{addScore:j,incrementStreak:b,resetStreak:v,updateStats:C,addMistake:k,setReviewPause:A,language:I}=(0,x.g)(),M=(0,c.useMemo)(()=>{var e;return(0,N.TV)([...null!==(e=z[I])&&void 0!==e?e:z.ru])},[I]),{playCorrect:T,playWrong:L}=(0,m.c)(),E=(0,c.useCallback)(e=>{var t;let s=(0,w.lV)(e),a=Object.keys(q),l=(0,N.sD)(a),r=q[l],n="hard"===s?r.filter(e=>e>=14&&e<=36):r.filter(e=>e>=12&&e<=48),c=(0,N.sD)(n),o=M.length>0?M[y.current%M.length]:(0,N.sD)(null!==(t=z[I])&&void 0!==t?t:z.ru);y.current+=1;let i=V(c,r,s);return i.includes(c)||(i[0]=c),{size:c,text:o,options:(0,N.TV)(i),difficulty:s,scale:l}},[M,I]);(0,c.useEffect)(()=>{y.current=0,l(E(f))},[E]);let F=(0,c.useCallback)(e=>{if(d||!s)return;n(e),p(!0);let a=s.options[e],r=a===s.size;r?(j("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),b(),T()):(v(),L(),k({question:"ru"===I?'Какой размер шрифта? (текст: "'.concat(s.text,'")'):'What is the font size? (text: "'.concat(s.text,'")'),userAnswer:"".concat(a,"px"),correctAnswer:"".concat(s.size,"px"),explanation:"ru"===I?"Разница между ".concat(a,"px и ").concat(s.size,"px составляет ").concat(Math.abs(a-s.size),"px. Тренируйте глаз на модульных шкалах: ").concat(q.modular.slice(0,6).join(", "),"..."):"The difference between ".concat(a,"px and ").concat(s.size,"px is ").concat(Math.abs(a-s.size),"px. Train your eye with modular scales: ").concat(q.modular.slice(0,6).join(", "),"...")})),C("font-size",r);let c=r?1200:2400;A(c),setTimeout(()=>{t(r);let e=f+1;g(e),l(E(e)),n(null),p(!1)},c)},[s,d,f,E,A,I]),R=(0,c.useCallback)(()=>{if(!s||d)return;t(!1);let e=f+1;g(e),l(E(e)),n(null),p(!1)},[s,d,f,E,t,I]);return((0,u.S)(R,!d),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&F(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===I?"Какой это размер шрифта?":"What font size is this?"}),(0,a.jsx)(i.N,{hint:"ru"===I?"Ориентируйся на базовый размер интерфейса 16px и сравни высоту букв.":"Use the 16px base UI size and compare letter height."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(I,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"bg-surface-2 rounded-2xl p-8 flex items-center justify-center min-h-40 border border-subtle shadow-card",children:(0,a.jsx)(H.E.span,{className:"font-medium text-strong select-none text-center ".concat((0,G.rS)(s.size)),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:s.text},s.text)}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>F(t),selected:r===t,correct:d?e===s.size:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("span",{className:"font-mono text-lg",children:[e,"px"]}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),d&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["ru"===I?"Правильный размер":"Correct size",":"," ",(0,a.jsxs)("span",{className:"font-mono font-medium",children:[s.size,"px"]}),(0,a.jsxs)("span",{className:"text-xs block mt-1 text-soft",children:["ru"===I?"Шкала":"Scale",": ",(0,S.N)(D[s.scale],I)]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"text-soft",children:(0,S.t)(I,"loading")})})},R=(e,t)=>({ru:e,en:t}),B=[{name:"Manrope",family:"Manrope, sans-serif",category:"sans-serif",characteristics:R("Современный гротеск с мягкой геометрией","Modern grotesque with soft geometry")},{name:"Space Grotesk",family:'"Space Grotesk", sans-serif',category:"display",characteristics:R("Выразительный гротеск с широкими пропорциями","Expressive grotesque with wide proportions")},{name:"Inter",family:"Inter, sans-serif",category:"sans-serif",characteristics:R("Геометрический гротеск с открытыми формами","Geometric grotesque with open forms")},{name:"Roboto",family:"Roboto, sans-serif",category:"sans-serif",characteristics:R("Механистичный гротеск от Google","Mechanical grotesque by Google")},{name:"Open Sans",family:'"Open Sans", sans-serif',category:"sans-serif",characteristics:R("Гуманистический гротеск с открытыми формами","Humanist grotesque with open forms")},{name:"Lato",family:"Lato, sans-serif",category:"sans-serif",characteristics:R("Тёплый гротеск с полукруглыми деталями","Warm grotesque with semi-rounded details")},{name:"Montserrat",family:"Montserrat, sans-serif",category:"sans-serif",characteristics:R("Геометрический гротеск с прямыми штрихами","Geometric grotesque with straight strokes")},{name:"Poppins",family:"Poppins, sans-serif",category:"sans-serif",characteristics:R("Геометрический гротеск с круглыми формами","Geometric grotesque with circular forms")},{name:"Nunito",family:"Nunito, sans-serif",category:"sans-serif",characteristics:R("Округлённый гротеск","Rounded grotesque")},{name:"Source Sans Pro",family:'"Source Sans Pro", sans-serif',category:"sans-serif",characteristics:R("Гуманистический гротеск от Adobe","Humanist grotesque by Adobe")},{name:"Playfair Display",family:'"Playfair Display", serif',category:"serif",characteristics:R("Контрастная антиква в стиле переходного периода","High-contrast serif in the transitional style")},{name:"Merriweather",family:"Merriweather, serif",category:"serif",characteristics:R("Экранная антиква с массивными засечками","Screen serif with heavy serifs")},{name:"Lora",family:"Lora, serif",category:"serif",characteristics:R("Современная антиква с умеренным контрастом","Modern serif with moderate contrast")},{name:"PT Serif",family:'"PT Serif", serif',category:"serif",characteristics:R("Русская антиква с мягкими формами","Russian serif with soft forms")},{name:"Fira Code",family:'"Fira Code", monospace',category:"monospace",characteristics:R("Моноширинный шрифт с лигатурами","Monospace font with ligatures")},{name:"JetBrains Mono",family:'"JetBrains Mono", monospace',category:"monospace",characteristics:R("Моноширинный с увеличенной высотой строчных","Monospace with a taller x-height")},{name:"Source Code Pro",family:'"Source Code Pro", monospace',category:"monospace",characteristics:R("Моноширинный гротеск от Adobe","Monospace grotesque by Adobe")}],P={serif:R("Антиква","Serif"),"sans-serif":R("Гротеск","Sans-serif"),monospace:R("Моноширинный","Monospace"),display:R("Дисплейный","Display")},W=(e,t)=>{let s;let a=(0,w.lV)(e),l=(0,N.sD)(B),r=(0,N.c4)(t);"easy"===a?s=B.filter(e=>e.category!==l.category&&e.name!==l.name):"medium"===a?s=B.filter(e=>e.name!==l.name):(s=B.filter(e=>e.category===l.category&&e.name!==l.name)).length<3&&(s=B.filter(e=>e.name!==l.name));let n=(0,N.TV)([l,...(0,N.TV)(s).slice(0,3)]);return{font:l,text:r,options:n,difficulty:a}},O=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[d,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(0),{addScore:y,incrementStreak:j,resetStreak:b,updateStats:v,addMistake:N,setReviewPause:C,language:k}=(0,x.g)(),{playCorrect:A,playWrong:I}=(0,m.c)();(0,c.useEffect)(()=>{l(W(f,k))},[k]);let M=(0,c.useCallback)(e=>{if(d||!s)return;n(e),p(!0);let a=s.options[e],r=a.name===s.font.name;if(r)y("expert"===s.difficulty?220:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),j(),A();else{b(),I();let e=(0,S.N)(s.font.characteristics,k),t=(0,S.N)(a.characteristics,k),l="ru"===k?"".concat(s.font.name," — ").concat(e,". ").concat(a.name," — ").concat(t,'. Обрати внимание на форму букв "a", "g", "e" и характер засечек.'):"".concat(s.font.name," — ").concat(e,". ").concat(a.name," — ").concat(t,'. Pay attention to the shapes of "a", "g", "e" and the presence of serifs.');N({question:"ru"===k?"Какой это шрифт?":"Which font is this?",userAnswer:a.name,correctAnswer:s.font.name,explanation:l})}v("guess-font",r);let c=r?1200:2400;C(c),setTimeout(()=>{t(r),g(e=>e+1),l(W(f+1,k)),n(null),p(!1)},c)},[s,d,f,C,k]),T=(0,c.useCallback)(()=>{s&&!d&&(t(!1),g(e=>e+1),l(W(f+1,k)),n(null),p(!1))},[s,d,f,t,k]);return((0,u.S)(T,!d),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&M(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===k?"Какой это шрифт?":"Which font is this?"}),(0,a.jsx)(i.N,{hint:"ru"===k?'Смотри на формы "a", "g", контраст штрихов и наличие засечек.':'Look at the shapes of "a", "g", stroke contrast, and the presence of serifs.'}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(k,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"bg-surface-2 rounded-2xl p-8 flex items-center justify-center min-h-40 border border-subtle shadow-card",children:(0,a.jsx)(H.E.span,{style:{"--sample-font":s.font.family},className:"font-sample text-[48px] text-strong select-none",initial:{opacity:0},animate:{opacity:1},children:s.text})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>M(t),selected:r===t,correct:d?e.name===s.font.name:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]}),(0,a.jsx)("div",{className:"text-xs text-soft mt-1",children:(0,S.N)(P[e.category],k)})]})},t))}),d&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsx)("div",{className:"font-medium",children:s.font.name}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:(0,S.N)(s.font.characteristics,k)})]})]}):null},Y=(e,t)=>({ru:e,en:t}),Z={hue:Y("Оттенок (H)","Hue (H)"),saturation:Y("Насыщенность (S)","Saturation (S)"),lightness:Y("Светлота (L)","Lightness (L)")},U={hue:Y("Оттенок — положение на цветовом круге: 0\xb0 — красный, 60\xb0 — жёлтый, 120\xb0 — зелёный, 180\xb0 — циан, 240\xb0 — синий, 300\xb0 — маджента","Hue is the position on the color wheel: 0\xb0 — red, 60\xb0 — yellow, 120\xb0 — green, 180\xb0 — cyan, 240\xb0 — blue, 300\xb0 — magenta"),saturation:Y("Насыщенность показывает интенсивность цвета: 0% — серый, 100% — чистый цвет","Saturation shows color intensity: 0% — gray, 100% — pure color"),lightness:Y("Светлота — количество белого/чёрного: 0% — чёрный, 50% — чистый цвет, 100% — белый","Lightness is the amount of white/black: 0% — black, 50% — pure color, 100% — white")},X=(e,t,s)=>{let a;switch(s){case"easy":a="hue"===t?60:25;break;case"medium":a="hue"===t?30:15;break;case"hard":a="hue"===t?15:8;break;case"expert":a="hue"===t?8:5}let l=new Set([e]);for(;l.size<4;){let s=Math.floor(Math.random()*a*2)-a;0===s&&(s=a);let r=e+s;r="hue"===t?(r%360+360)%360:Math.max(5,Math.min(95,r)),l.add(r)}return(0,N.TV)([...l])},_=e=>{let t;let s=(0,N.sD)(["hue","saturation","lightness"]),a=y(),{r:l,g:r,b:n}=g(a.h,a.s,a.l),c=f(l,r,n);switch(s){case"hue":t=a.h;break;case"saturation":t=a.s;break;case"lightness":t=a.l}let o=X(t,s,e);return{mode:"value",color:c,hsl:a,paramType:s,options:o,correctValue:t,difficulty:e}},Q=e=>{let t;let s=(0,N.sD)(["hue","saturation","lightness"]),a=y();switch(e){case"easy":t="hue"===s?60:30;break;case"medium":t="hue"===s?35:18;break;case"hard":t="hue"===s?20:12;break;case"expert":t="hue"===s?12:8}let l=Math.random()>.5?1:-1,r={...a};"hue"===s?r.h=((r.h+l*t)%360+360)%360:"saturation"===s?r.s=Math.max(10,Math.min(95,r.s+l*t)):r.l=Math.max(10,Math.min(90,r.l+l*t));let n=g(a.h,a.s,a.l),c=g(r.h,r.s,r.l);return{mode:"shift",baseColor:f(n.r,n.g,n.b),baseHsl:a,targetColor:f(c.r,c.g,c.b),targetHsl:r,paramType:s,options:(0,N.TV)(["hue","saturation","lightness"]),difficulty:e}},J=e=>{let t=(0,w.lV)(e);return"easy"!==t&&Math.random()>.45?Q(t):_(t)},$=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[p,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(0),{addScore:j,incrementStreak:b,resetStreak:v,updateStats:N,addMistake:C,setReviewPause:k,language:A}=(0,x.g)(),{playCorrect:I,playWrong:M}=(0,m.c)(),T=e=>(0,S.N)(Z[e],A),L=e=>(0,S.N)(U[e],A);(0,c.useEffect)(()=>{l(J(g))},[]);let G=(0,c.useCallback)(e=>{if(p||!s)return;n(e),f(!0);let a="value"===s.mode?s.options[e]===s.correctValue:s.options[e]===s.paramType;if(a)j("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),b(),I();else if(v(),M(),"value"===s.mode){let t="hue"===s.paramType?"\xb0":"%",a=s.options[e],l=T(s.paramType),r="ru"===A?"".concat(L(s.paramType),". Полные HSL значения для этого цвета: H=").concat(s.hsl.h,"\xb0, S=").concat(s.hsl.s,"%, L=").concat(s.hsl.l,"%"):"".concat(L(s.paramType),". Full HSL values for this color: H=").concat(s.hsl.h,"\xb0, S=").concat(s.hsl.s,"%, L=").concat(s.hsl.l,"%");C({question:"ru"===A?"Определи ".concat(l," цвета"):"Determine the ".concat(l," of the color"),userAnswer:"".concat(a).concat(t),correctAnswer:"".concat(s.correctValue).concat(t),explanation:r,visual:{type:"colors",data:{["ru"===A?"Цвет":"Color"]:s.color}}})}else{let t=s.options[e],a="ru"===A?"".concat(L(s.paramType),". Исходный цвет: H=").concat(s.baseHsl.h,"\xb0, S=").concat(s.baseHsl.s,"%, L=").concat(s.baseHsl.l,"%."):"".concat(L(s.paramType),". Base color: H=").concat(s.baseHsl.h,"\xb0, S=").concat(s.baseHsl.s,"%, L=").concat(s.baseHsl.l,"%."),l="ru"===A?"Цвет A":"Color A",r="ru"===A?"Цвет B":"Color B";C({question:"ru"===A?"Что изменилось между двумя цветами?":"What changed between the two colors?",userAnswer:T(t),correctAnswer:T(s.paramType),explanation:a,visual:{type:"colors",data:{[l]:s.baseColor,[r]:s.targetColor}}})}N("color-params",a);let r=a?1200:2400;k(r),setTimeout(()=>{t(a),y(e=>e+1),l(J(g+1)),n(null),f(!1)},r)},[s,p,g,k]),q=(0,c.useCallback)(()=>{s&&!p&&(t(!1),y(e=>e+1),l(J(g+1)),n(null),f(!1))},[s,p,g,t]);return((0,u.S)(q,!p),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&G(e)},!p),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"value"===s.mode?"ru"===A?"Определи ".concat(T(s.paramType)):"Determine ".concat(T(s.paramType)):"ru"===A?"Что изменилось между цветами?":"What changed between the colors?"}),(0,a.jsx)(i.N,{hint:"value"===s.mode?L(s.paramType):"ru"===A?"Сравни оба свотча и реши, какой параметр изменился.":"Compare both swatches and decide which parameter shifted."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(A,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:"value"===s.mode?(0,a.jsx)(H.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card"})}):(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(H.E.div,{className:"w-28 h-28",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.baseColor,className:"w-full h-full rounded-2xl shadow-card"})}),(0,a.jsx)(H.E.div,{className:"w-28 h-28",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.targetColor,className:"w-full h-full rounded-2xl shadow-card"})})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>G(t),selected:r===t,correct:p?"value"===s.mode?e===s.correctValue:e===s.paramType:null,children:"value"===s.mode?(0,a.jsxs)("div",{className:"text-center font-mono text-lg",children:[e,"hue"===s.paramType?"\xb0":"%",(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]}):(0,a.jsxs)("div",{className:"text-center font-medium",children:[T(e),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),p&&(0,a.jsx)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:"value"===s.mode?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"font-mono",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:s.color.toUpperCase()})]}):(0,a.jsxs)("div",{className:"text-xs text-soft",children:["ru"===A?"Изменение":"Change",": ",T(s.paramType)," •"," ","ru"===A?"Цвет A":"Color A"," → ","ru"===A?"Цвет B":"Color B"]})})]}):null},K=(e,t)=>({ru:e,en:t}),ee=e=>e>=7?"AAA":e>=4.5?"AA":e>=3?"AA Large":"Fail",et={AAA:K("Контраст ≥7:1 — максимальный уровень доступности для обычного текста","Contrast ≥7:1 — highest accessibility level for normal text"),AA:K("Контраст ≥4.5:1 — минимальный стандарт для обычного текста","Contrast ≥4.5:1 — minimum standard for normal text"),"AA Large":K("Контраст ≥3:1 — допустимо только для крупного текста (18pt+ или 14pt bold)","Contrast ≥3:1 — allowed only for large text (18pt+ or 14pt bold)"),Fail:K("Контраст <3:1 — не соответствует WCAG","Contrast <3:1 — does not meet WCAG standards")},es={level:K("Определи уровень WCAG","Determine the WCAG level"),"pass-fail":K("Проходит ли WCAG AA?","Passes WCAG AA?"),"large-text":K("Проходит ли для крупного текста?","Passes for large text?")},ea=K("AA требует 4.5:1, для крупного текста достаточно 3:1, AAA начинается с 7:1.","AA needs 4.5:1, large text allows 3:1, AAA starts at 7:1."),el=K("Проходит","Pass"),er=K("Не проходит","Fail"),en=K("Контраст","Contrast"),ec=K("Текст","Text"),eo=K("Фон","Background"),ei=K("Для крупного текста достаточно 3:1 (AA Large).","Large text requires only 3:1 (AA Large)."),ed=(e,t)=>(0,S.N)(es[e],t),eh=(e,t,s)=>"pass-fail"===e||"large-text"===e?"AA"===t?(0,S.N)(el,s):(0,S.N)(er,s):t,eu=(e,t)=>{let s="#ffffff"===e||"#fafafa"===e,a=0;for(;a<50;){let l=y();switch(t){case"AAA":l.l=s?Math.floor(25*Math.random())+5:Math.floor(25*Math.random())+70;break;case"AA":l.l=s?Math.floor(20*Math.random())+25:Math.floor(20*Math.random())+55;break;case"AA Large":l.l=s?Math.floor(15*Math.random())+40:Math.floor(15*Math.random())+45;break;case"Fail":l.l=s?Math.floor(20*Math.random())+55:Math.floor(20*Math.random())+25,l.s=Math.floor(30*Math.random())+20}let{r,g:n,b:c}=g(l.h,l.s,l.l),o=f(r,n,c);if(ee(v(o,e))===t)return o;a++}return s?"#333333":"#cccccc"},em=(e,t)=>{let s;let a=(0,w.lV)(e),l="easy"===a?"pass-fail":"expert"===a?"large-text":(0,N.sD)(["level","pass-fail"]),r=(0,N.sD)(["#ffffff","#fafafa","#1a1a1a","#0a0a0a","#f3f0e8","#102a43"]),n=["AAA","AA","AA Large","Fail"],c=eu(r,(0,N.sD)(n)),o=v(c,r),i=ee(o),d=o>=4.5,h=o>=3,u="pass-fail"===l?d?"AA":"Fail":"large-text"===l?h?"AA":"Fail":i;"pass-fail"===l||"large-text"===l?s=(0,N.TV)(["AA","Fail"]):"easy"===a?(s=(0,N.TV)(["AAA","AA","Fail"])).includes(u)||(s[0]=u):s=(0,N.TV)([...n]);let m=(0,N.Jf)(t);return{foreground:c,background:r,contrastRatio:o,correctLevel:u,options:s.slice(0,4),text:m,difficulty:a,mode:l}},ex=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[d,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(0),y=(0,x.g)(e=>e.language),{addScore:j,incrementStreak:b,resetStreak:v,updateStats:N,addMistake:C,setReviewPause:k}=(0,x.g)(),{playCorrect:A,playWrong:I}=(0,m.c)();(0,c.useEffect)(()=>{l(em(f,y))},[y]);let M=(0,c.useCallback)(e=>{if(d||!s)return;n(e),p(!0);let a=s.options[e],r=a===s.correctLevel;if(r)j("hard"===s.difficulty?150:"medium"===s.difficulty?130:120),b(),A();else{v(),I();let e="large-text"===s.mode?(0,S.N)(ei,y):(0,S.N)(et[s.correctLevel],y),t=(0,S.N)(en,y),l=(0,S.N)(ec,y),r=(0,S.N)(eo,y);C({question:ed(s.mode,y),userAnswer:eh(s.mode,a,y),correctAnswer:eh(s.mode,s.correctLevel,y),explanation:"".concat(t," ").concat(s.contrastRatio.toFixed(2),":1. ").concat(e),visual:{type:"contrast",data:{[l]:s.foreground,[r]:s.background}}})}N("accessibility",r);let c=r?1200:2400;k(c),setTimeout(()=>{t(r),g(e=>e+1),l(em(f+1,y)),n(null),p(!1)},c)},[s,d,f,k,y]),T=(0,c.useCallback)(()=>{s&&!d&&(t(!1),g(e=>e+1),l(em(f+1,y)),n(null),p(!1))},[s,d,f,t,y]);if((0,u.S)(T,!d),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&M(e)},!d),!s)return null;let L={AAA:"text-[color:var(--success)]",AA:"text-accent","AA Large":"text-[color:var(--warning)]",Fail:"text-[color:var(--danger)]"},G={"--swatch":s.background,"--swatch-ink":s.foreground};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:ed(s.mode,y)}),(0,a.jsx)(i.N,{hint:(0,S.N)(ea,y)}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(y,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)(H.E.div,{className:"rounded-2xl p-8 min-h-32 flex items-center justify-center bg-swatch border border-subtle shadow-card",style:G,initial:{opacity:0},animate:{opacity:1},children:(0,a.jsx)("p",{className:"text-2xl font-medium text-center text-swatch",children:s.text})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>M(t),selected:r===t,correct:d?e===s.correctLevel:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-mono text-lg ".concat(L[e]),children:eh(s.mode,e,y)}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),d&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{className:"font-mono",children:[(0,S.N)(en,y),": ",s.contrastRatio.toFixed(2),":1"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:"large-text"===s.mode?(0,S.N)(ei,y):(0,S.N)(et[s.correctLevel],y)})]})]})},ep=(e,t)=>({ru:e,en:t}),ef={monochromatic:ep("монохромная","monochromatic"),analogous:ep("аналоговая","analogous"),complementary:ep("комплементарная","complementary"),triadic:ep("триадная","triadic"),split:ep("сплит-комплементарная","split-complementary"),tetradic:ep("тетра́дная","tetradic")},eg={monochromatic:ep("Монохромная палитра использует один тон (H) с разной насыщенностью и светлотой","A monochromatic palette uses one hue (H) with varying saturation and lightness"),analogous:ep("Аналоговая палитра использует соседние тона на цветовом круге (\xb130\xb0)","An analogous palette uses neighboring hues on the color wheel (\xb130\xb0)"),complementary:ep("Комплементарная палитра использует противоположные тона (180\xb0)","A complementary palette uses opposite hues (180\xb0)"),triadic:ep("Триадная палитра использует три равноудалённых тона (120\xb0 друг от друга)","A triadic palette uses three evenly spaced hues (120\xb0 apart)"),split:ep("Сплит-комплементарная палитра использует два тона вокруг комплементарного (\xb130\xb0)","A split-complementary palette uses two hues around the complement (\xb130\xb0)"),tetradic:ep("Тетрадная палитра использует две пары комплементарных тонов (через 90\xb0)","A tetradic palette uses two complementary pairs (90\xb0 apart)")},ey=(e,t,s)=>{let a=[];switch(e){case"monochromatic":for(let e=0;e<s;e++)a.push({h:t,s:40+(0,N.Iy)(0,40),l:25+12*e+(0,N.Iy)(-5,5)});break;case"analogous":for(let e=0;e<s;e++){let l=(e-Math.floor(s/2))*20;a.push({h:(t+l+360)%360,s:50+(0,N.Iy)(0,30),l:45+(0,N.Iy)(-10,10)})}break;case"complementary":for(let e=0;e<s;e++){let l=e>=s/2;a.push({h:l?(t+180)%360:t,s:50+(0,N.Iy)(0,30),l:40+(0,N.Iy)(0,20)})}break;case"triadic":for(let e=0;e<s;e++){let s=120*Math.floor(e/2);a.push({h:(t+s)%360,s:50+(0,N.Iy)(0,30),l:45+(0,N.Iy)(-5,10)})}break;case"split":{let e=[(t+150)%360,(t+210)%360];for(let l=0;l<s;l++){let s=0===l?t:e[l%e.length];a.push({h:s,s:45+(0,N.Iy)(0,30),l:40+(0,N.Iy)(-5,12)})}break}case"tetradic":{let e=[0,90,180,270];for(let l=0;l<s;l++){let s=(t+e[l%e.length])%360;a.push({h:s,s:45+(0,N.Iy)(0,30),l:40+(0,N.Iy)(-5,12)})}}}return a},ej=(e,t,s)=>{let a;switch(s){case"easy":a=(t+90+(0,N.Iy)(30,60))%360;break;case"medium":a=(t+60+(0,N.Iy)(20,40))%360;break;case"hard":a=(t+40+(0,N.Iy)(10,25))%360;break;case"expert":a=(t+30+(0,N.Iy)(8,16))%360}return{h:a,s:50+(0,N.Iy)(0,30),l:45+(0,N.Iy)(-5,15)}},eb=e=>{let t=(0,w.lV)(e),s=(0,N.sD)(["monochromatic","analogous","complementary","triadic","split","tetradic"]),a=(0,N.Iy)(0,359),l="hard"===t||"expert"===t?6:5,r=ey(s,a,l-1),n=ej(s,a,t),c=(0,N.Iy)(0,l-1),o=[...r];return o.splice(c,0,n),{colors:o.map(e=>{let{r:t,g:s,b:a}=g(e.h,e.s,e.l);return f(t,s,a)}),errorIndex:c,paletteType:s,baseHue:a,difficulty:t}},ev=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[d,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(0),y=(0,x.g)(e=>e.language),{addScore:j,incrementStreak:b,resetStreak:v,updateStats:N,addMistake:C,setReviewPause:k}=(0,x.g)(),{playCorrect:A,playWrong:I}=(0,m.c)();(0,c.useEffect)(()=>{l(eb(f))},[]);let M=(0,c.useCallback)(e=>{if(d||!s)return;n(e),p(!0);let a=e===s.errorIndex;if(a)j("expert"===s.difficulty?220:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),b(),A();else{v(),I();let t=(0,S.N)(ef[s.paletteType],y),a=(0,S.N)(eg[s.paletteType],y),l="ru"===y?"Цвет":"Color";C({question:"ru"===y?"Найди цвет, выбивающийся из ".concat(t," палитры"):"Find the color that does not belong to the ".concat(t," palette"),userAnswer:"".concat(l," ").concat(e+1),correctAnswer:"".concat(l," ").concat(s.errorIndex+1),explanation:"ru"===y?"".concat(a,". Базовый тон палитры: ").concat(s.baseHue,"\xb0. Ошибочный цвет имеет тон, не вписывающийся в схему."):"".concat(a,". Palette base hue: ").concat(s.baseHue,"\xb0. The odd color uses a hue outside the scheme."),visual:{type:"colors",data:s.colors.reduce((e,t,s)=>({...e,["".concat(l," ").concat(s+1)]:t}),{})}})}N("palette-error",a);let r=a?1200:2400;k(r),setTimeout(()=>{t(a),g(e=>e+1),l(eb(f+1)),n(null),p(!1)},r)},[s,d,f,k,y]),T=(0,c.useCallback)(()=>{s&&!d&&(t(!1),g(e=>e+1),l(eb(f+1)),n(null),p(!1))},[s,d,f,t]);if((0,u.S)(T,!d),(0,h.A)(e=>{e<((null==s?void 0:s.colors.length)||0)&&M(e)},!d),!s)return null;let L=(0,S.N)(ef[s.paletteType],y),G=(0,S.N)(eg[s.paletteType],y),q="ru"===y?"Палитра":"Palette",E="ru"===y?"Ошибка в цвете":"Odd color";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===y?"Найди лишний цвет":"Find the odd color"}),(0,a.jsx)(i.N,{hint:G}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:[q,": ",L," • ",(0,S.t)(y,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid gap-3 ".concat(s.colors.length>5?"grid-cols-3":"grid-cols-5"),children:s.colors.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>M(t),selected:r===t,correct:d?t===s.errorIndex:null,padding:"none",className:"aspect-square overflow-hidden",children:(0,a.jsx)(H.E.div,{className:"w-full h-full flex items-end justify-center pb-2 bg-swatch",style:{"--swatch":e},whileHover:{scale:1.05},children:(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-[color:var(--surface-1-95)] rounded text-xs font-mono",children:t+1})})},t))}),d&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{children:[E," ",s.errorIndex+1]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:G})]})]})},eN=(e,t)=>({ru:e,en:t}),ew={modular:eN("модульная","modular"),linear:eN("линейная","linear"),fibonacci:eN("Фибоначчи","Fibonacci"),golden:eN("золотое сечение","golden ratio"),"major-third":eN("major third","major third"),"perfect-fourth":eN("perfect fourth","perfect fourth")},eS={modular:eN("Модульная шкала умножает базовый размер на постоянный коэффициент (обычно 1.2-1.5)","A modular scale multiplies the base size by a constant ratio (typically 1.2–1.5)."),linear:eN("Линейная шкала добавляет фиксированное значение к каждому следующему размеру","A linear scale adds a fixed step to each next size."),fibonacci:eN("Шкала Фибоначчи: каждое число — сумма двух предыдущих","A Fibonacci scale: each number is the sum of the two previous ones."),golden:eN("Золотое сечение использует коэффициент 1.618 для каждого следующего размера","The golden ratio uses 1.618 as the multiplier for each next size."),"major-third":eN("Major Third масштабирует размеры по коэффициенту 1.25","Major Third scales sizes by 1.25."),"perfect-fourth":eN("Perfect Fourth масштабирует размеры по коэффициенту 1.333","Perfect Fourth scales sizes by 1.333.")},eC=e=>G.gk.reduce((t,s)=>Math.abs(s-e)<Math.abs(t-e)?s:t,G.gk[0]),ek=e=>{let t=[],s=0;for(let a of e){let e=eC(a),l=e>s?e:G.gk.find(e=>e>s)||e;t.push(l),s=l}return t},eA=(e,t)=>{let s=[];switch(e){case"modular":{let e=(0,N.sD)([1.2,1.25,1.333,1.414,1.5]);for(let a=0;a<t;a++)s.push(Math.round(16*Math.pow(e,a)));break}case"linear":{let e=(0,N.sD)([2,3,4]);for(let a=0;a<t;a++)s.push(12+a*e);break}case"fibonacci":s.push(...[8,13,21,34,55,89].slice(0,t));break;case"golden":for(let e=0;e<t;e++)s.push(Math.round(10*Math.pow(1.618,e)));break;case"major-third":for(let e=0;e<t;e++)s.push(Math.round(14*Math.pow(1.25,e)));break;case"perfect-fourth":for(let e=0;e<t;e++)s.push(Math.round(14*Math.pow(1.333,e)))}return ek(s)},eI=(e,t,s)=>{let a;let l=e[t];switch(s){case"easy":a=l+(Math.random()>.5?1:-1)*(0,N.Iy)(6,10);break;case"medium":a=l+(Math.random()>.5?1:-1)*(0,N.Iy)(3,5);break;case"hard":a=l+(Math.random()>.5?1:-1)*(0,N.Iy)(1,2);break;case"expert":a=l+(Math.random()>.5?1:-1)*1}return Math.max(8,a)},eM=e=>{let t=(0,w.lV)(e),s=(0,N.sD)(["modular","linear","golden","fibonacci","major-third","perfect-fourth"]),a="hard"===t||"expert"===t?6:5,l=eA(s,a),r=(0,N.Iy)(1,a-2),n=eI(l,r,t),c=[...l];return c[r]=n,{sizes:c,errorIndex:r,scaleType:s,ratio:"modular"===s?1.333:"golden"===s?1.618:"major-third"===s?1.25:"perfect-fourth"===s?1.333:1,difficulty:t}},eT=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[d,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(0),{addScore:y,incrementStreak:j,resetStreak:b,updateStats:v,addMistake:N,setReviewPause:C,language:k}=(0,x.g)(),{playCorrect:A,playWrong:I}=(0,m.c)();(0,c.useEffect)(()=>{l(eM(f))},[]);let M=(0,c.useCallback)(e=>{if(d||!s)return;n(e),p(!0);let a=e===s.errorIndex,r=eA(s.scaleType,s.sizes.length),c=(0,S.N)(ew[s.scaleType],k),o=(0,S.N)(eS[s.scaleType],k);a?(y("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),j(),A()):(b(),I(),N({question:"ru"===k?"Найди ошибку в ".concat(c," шкале"):"Find the error in the ".concat(c," scale"),userAnswer:"ru"===k?"Позиция ".concat(e+1," (").concat(s.sizes[e],"px)"):"Position ".concat(e+1," (").concat(s.sizes[e],"px)"),correctAnswer:"ru"===k?"Позиция ".concat(s.errorIndex+1," (должно быть ").concat(r[s.errorIndex],"px, показано ").concat(s.sizes[s.errorIndex],"px)"):"Position ".concat(s.errorIndex+1," (should be ").concat(r[s.errorIndex],"px, shown ").concat(s.sizes[s.errorIndex],"px)"),explanation:"ru"===k?"".concat(o,". Правильная последовательность: ").concat(r.join(", "),"px"):"".concat(o,". Correct sequence: ").concat(r.join(", "),"px")})),v("size-sequence",a);let i=a?1200:2400;C(i),setTimeout(()=>{t(a),g(e=>e+1),l(eM(f+1)),n(null),p(!1)},i)},[s,d,f,C,k]),T=(0,c.useCallback)(()=>{s&&!d&&(t(!1),g(e=>e+1),l(eM(f+1)),n(null),p(!1))},[s,d,f,t,k]);return((0,u.S)(T,!d),(0,h.A)(e=>{e<((null==s?void 0:s.sizes.length)||0)&&M(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===k?"Найди ошибку в шкале":"Find the error in the scale"}),(0,a.jsx)(i.N,{hint:(0,S.N)(eS[s.scaleType],k)}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["ru"===k?"Тип":"Type",": ",(0,S.N)(ew[s.scaleType],k)," •"," ",(0,S.t)(k,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-3",children:s.sizes.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>M(t),selected:r===t,correct:d?t===s.errorIndex:null,className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"w-8 text-center font-mono text-sm text-soft",children:t+1}),(0,a.jsx)(H.E.span,{className:"font-medium text-strong flex-1 ".concat((0,G.rS)(e,"text-[48px]")),initial:{opacity:0},animate:{opacity:1},children:"Aa"}),(0,a.jsxs)("span",{className:"font-mono text-sm text-muted",children:[e,"px"]})]})},t))}),d&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{children:["ru"===k?"Ошибка на позиции":"Error at position"," ",s.errorIndex+1]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:(0,S.N)(eS[s.scaleType],k)})]})]}):null},eL=e=>{let t;let s=(0,w.lV)(e),a="easy"===s?"complementary":(0,N.sD)(["complementary","split"]),l=y(),{r,g:n,b:c}=g(l.h,l.s,l.l),o=f(r,n,c),i=j(l.h),d=(0,N.sD)([30,-30]),h="split"===a?(i+d+360)%360:i;switch(s){case"easy":t=[(l.h+90)%360,(l.h+60)%360,(l.h+270)%360];break;case"medium":t=[(i+45)%360,(i+315)%360,(l.h+90)%360];break;case"hard":t=[(h+18)%360,(h+342)%360,(i+15)%360];break;case"expert":t=[(h+12)%360,(h+348)%360,(i+8)%360]}let u=[h,...t].map(e=>{let{r:t,g:s,b:a}=g(e,l.s,l.l);return{color:f(t,s,a),hue:e}}),m=(0,N.TV)(u),x=m.findIndex(e=>e.hue===h);return{baseColor:o,baseHsl:l,options:m,correctIndex:x,difficulty:s,mode:a,targetHue:h}},eH=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[p,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(0),{addScore:b,incrementStreak:v,resetStreak:N,updateStats:S,addMistake:C,setReviewPause:k}=(0,x.g)(),{playCorrect:A,playWrong:I}=(0,m.c)();(0,c.useEffect)(()=>{l(eL(g))},[]);let M=(0,c.useCallback)(e=>{if(p||!s)return;n(e),f(!0);let a=e===s.correctIndex,r=j(s.baseHsl.h);if(a)b("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),v(),A();else{N(),I();let t=s.options[e].hue;C({question:"split"===s.mode?"Choose the split-complementary color":"Choose the complementary color",userAnswer:"Hue ".concat(t,"\xb0 (deviation ").concat(Math.abs(t-s.targetHue),"\xb0)"),correctAnswer:"Hue ".concat(s.targetHue,"\xb0"),explanation:"split"===s.mode?"Split-complementary colors sit \xb130\xb0 from the complement. Base hue: ".concat(s.baseHsl.h,"\xb0, target: ").concat(s.targetHue,"\xb0"):"A complementary color is on the opposite side of the color wheel (180\xb0 from the base). Base hue: ".concat(s.baseHsl.h,"\xb0, complementary: ").concat(r,"\xb0"),visual:{type:"colors",data:{Base:s.baseColor,Complementary:s.options[s.correctIndex].color,"Your choice":s.options[e].color}}})}S("complementary",a);let c=a?1200:2400;k(c),setTimeout(()=>{t(a),y(e=>e+1),l(eL(g+1)),n(null),f(!1)},c)},[s,p,g,k]),T=(0,c.useCallback)(()=>{s&&!p&&(t(!1),y(e=>e+1),l(eL(g+1)),n(null),f(!1))},[s,p,g,t]);return((0,u.S)(T,!p),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&M(e)},!p),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"split"===s.mode?"Choose the split-complementary color":"Choose the complementary color"}),(0,a.jsx)(i.N,{hint:"split"===s.mode?"Split-complementary sits \xb130\xb0 from the complement.":"Complementary colors are 180\xb0 apart on the wheel."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:["Difficulty: ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(H.E.div,{className:"w-32 h-32",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.baseColor,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsxs)("div",{className:"text-center text-sm text-muted",children:["Hue: ",s.baseHsl.h,"\xb0"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>{let l={"--swatch":e.color};return(0,a.jsx)(o.Z,{onClick:()=>M(t),selected:r===t,correct:p?t===s.correctIndex:null,padding:"none",className:"aspect-square overflow-hidden",children:(0,a.jsx)(H.E.div,{className:"w-full h-full flex items-end justify-center pb-3 bg-swatch",style:l,whileHover:{scale:1.02},children:(0,a.jsx)("span",{className:"px-2 py-1 bg-[color:var(--surface-1-95)] rounded text-xs font-mono",children:t+1})})},t)})}),p&&(0,a.jsx)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:(0,a.jsx)("div",{className:"flex justify-center gap-4",children:s.options.map((e,t)=>(0,a.jsxs)("span",{className:"font-mono",children:[t+1,": ",e.hue,"\xb0",t===s.correctIndex&&" (correct)"]},t))})})]}):null},eG=(e,t)=>{let s;let{r:a,g:l,b:r}=p(e);switch(t){case"easy":s=(0,N.Iy)(60,100);break;case"medium":s=(0,N.Iy)(30,50);break;case"hard":s=(0,N.Iy)(10,25);break;case"expert":s=(0,N.Iy)(6,14)}let n="expert"===t?(0,N.TV)([0,1,2]).slice(0,2):[(0,N.Iy)(0,2)],c=Math.random()>.5?1:-1;return f(n.includes(0)?Math.max(0,Math.min(255,a+c*s)):a,n.includes(1)?Math.max(0,Math.min(255,l+c*s)):l,n.includes(2)?Math.max(0,Math.min(255,r+c*s)):r)},eq=e=>{let t=(0,w.lV)(e),s=y(),{r:a,g:l,b:r}=g(s.h,s.s,s.l),n=f(a,l,r),c=new Set;for(;c.size<3;){let e=eG(n,t);e!==n&&c.add(e)}let o=(0,N.TV)([n,...c]),i=o.indexOf(n);return{color:n,hsl:s,options:o,correctIndex:i,difficulty:t}},eE=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[f,g]=(0,c.useState)(!1),[y,j]=(0,c.useState)(0),{addScore:b,incrementStreak:v,resetStreak:N,updateStats:C,addMistake:k,setReviewPause:A,language:I}=(0,x.g)(),{playCorrect:M,playWrong:T}=(0,m.c)();(0,c.useEffect)(()=>{l(eq(y))},[I]);let L=(0,c.useCallback)(e=>{if(f||!s)return;n(e),g(!0);let a=e===s.correctIndex;if(a)b("expert"===s.difficulty?280:"hard"===s.difficulty?250:"medium"===s.difficulty?200:150),v(),M();else{N(),T();let t=s.options[e],a=p(t),l=p(s.color),r="ru"===I?"Правильный":"Correct",n="ru"===I?"Твой выбор":"Your choice",c="ru"===I?"HEX-код состоит из трёх пар цифр (RR GG BB). Правильный: R=".concat(l.r," G=").concat(l.g," B=").concat(l.b,". Твой выбор: R=").concat(a.r," G=").concat(a.g," B=").concat(a.b,". Разница в каналах помогает различать близкие цвета."):"HEX code consists of three pairs (RR GG BB). Correct: R=".concat(l.r," G=").concat(l.g," B=").concat(l.b,". Your choice: R=").concat(a.r," G=").concat(a.g," B=").concat(a.b,". Channel differences help distinguish close colors.");k({question:"ru"===I?"Угадай HEX-код цвета":"Guess the HEX color code",userAnswer:t.toUpperCase(),correctAnswer:s.color.toUpperCase(),explanation:c,visual:{type:"colors",data:{[r]:s.color,[n]:t}}})}C("guess-hex",a);let r=a?1200:2400;A(r),setTimeout(()=>{t(a),j(e=>e+1),l(eq(y+1)),n(null),g(!1)},r)},[s,f,y,A,I]),G=(0,c.useCallback)(()=>{s&&!f&&(t(!1),j(e=>e+1),l(eq(y+1)),n(null),g(!1))},[s,f,y,t,I]);return((0,u.S)(G,!f),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&L(e)},!f),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===I?"Угадай HEX-код":"Guess the HEX code"}),(0,a.jsx)(i.N,{hint:"ru"===I?"HEX состоит из трёх пар (RR GG BB). Сравни тон и яркость со свотчем.":"HEX uses three pairs (RR GG BB). Compare hue and brightness with the swatch."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(I,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(H.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>L(t),selected:r===t,correct:f?e===s.color:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-mono text-lg",children:e.toUpperCase()}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),f&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted space-y-1",children:[(0,a.jsx)("div",{className:"font-mono",children:s.color.toUpperCase()}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]})]})]}):null},ez=(e,t)=>{let s,a,l;switch(t){case"easy":s=(0,N.Iy)(40,80),a=(0,N.Iy)(20,35),l=(0,N.Iy)(15,25);break;case"medium":s=(0,N.Iy)(20,40),a=(0,N.Iy)(10,20),l=(0,N.Iy)(8,15);break;case"hard":s=(0,N.Iy)(10,20),a=(0,N.Iy)(5,12),l=(0,N.Iy)(4,8);break;case"expert":s=(0,N.Iy)(6,12),a=(0,N.Iy)(3,7),l=(0,N.Iy)(2,5)}let r=Math.random()>.5?1:-1;return{h:((e.h+r*s)%360+360)%360,s:Math.max(10,Math.min(95,e.s+r*a)),l:Math.max(15,Math.min(85,e.l+r*l))}},eD=e=>{let t=(0,w.lV)(e),s={h:(0,N.Iy)(0,359),s:(0,N.Iy)(30,80),l:(0,N.Iy)(30,70)},{r:a,g:l,b:r}=g(s.h,s.s,s.l),n=f(a,l,r),c=new Set,o=[];for(;o.length<3;){let e=ez(s,t),a="".concat(e.h,"-").concat(e.s,"-").concat(e.l);c.has(a)||(c.add(a),o.push(e))}let i=(0,N.TV)([s,...o]),d=i.findIndex(e=>e.h===s.h&&e.s===s.s&&e.l===s.l);return{color:n,hsl:s,options:i,correctIndex:d,difficulty:t}},eV=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[p,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(0),{addScore:j,incrementStreak:b,resetStreak:v,updateStats:N,addMistake:C,setReviewPause:k,language:A}=(0,x.g)(),{playCorrect:I,playWrong:M}=(0,m.c)();(0,c.useEffect)(()=>{l(eD(g))},[A]);let T=(0,c.useCallback)(e=>{if(p||!s)return;n(e),f(!0);let a=e===s.correctIndex;if(a)j("expert"===s.difficulty?230:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),b(),I();else{v(),M();let t=s.options[e],a="ru"===A?"Цвет":"Color",l="ru"===A?"H (Hue) — тон на цветовом круге (0–360\xb0). S (Saturation) — насыщенность (0–100%). L (Lightness) — светлота (0–100%). Разница: H на ".concat(Math.abs(t.h-s.hsl.h),"\xb0, S на ").concat(Math.abs(t.s-s.hsl.s),"%, L на ").concat(Math.abs(t.l-s.hsl.l),"%"):"H (Hue) is the hue angle (0–360\xb0). S (Saturation) is saturation (0–100%). L (Lightness) is lightness (0–100%). Difference: H by ".concat(Math.abs(t.h-s.hsl.h),"\xb0, S by ").concat(Math.abs(t.s-s.hsl.s),"%, L by ").concat(Math.abs(t.l-s.hsl.l),"%");C({question:"ru"===A?"Определи HSL-параметры цвета":"Determine the HSL parameters of the color",userAnswer:"H=".concat(t.h,"\xb0 S=").concat(t.s,"% L=").concat(t.l,"%"),correctAnswer:"H=".concat(s.hsl.h,"\xb0 S=").concat(s.hsl.s,"% L=").concat(s.hsl.l,"%"),explanation:l,visual:{type:"colors",data:{[a]:s.color}}})}N("guess-params",a);let r=a?1200:2400;k(r),setTimeout(()=>{t(a),y(e=>e+1),l(eD(g+1)),n(null),f(!1)},r)},[s,p,g,k,A]),L=(0,c.useCallback)(()=>{s&&!p&&(t(!1),y(e=>e+1),l(eD(g+1)),n(null),f(!1))},[s,p,g,t,A]);return((0,u.S)(L,!p),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&T(e)},!p),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===A?"Угадай HSL-параметры":"Guess the HSL parameters"}),(0,a.jsx)(i.N,{hint:"ru"===A?"H — тон на круге, S — насыщенность, L — светлота.":"H is hue, S is saturation, L is lightness."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(A,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(H.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>T(t),selected:r===t,correct:p?t===s.correctIndex:null,children:(0,a.jsxs)("div",{className:"text-center font-mono text-sm space-y-1",children:[(0,a.jsxs)("div",{children:["H: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.h,"\xb0"]})]}),(0,a.jsxs)("div",{children:["S: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.s,"%"]})]}),(0,a.jsxs)("div",{children:["L: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.l,"%"]})]}),(0,a.jsxs)("div",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},t))}),p&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{className:"font-mono",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:s.color.toUpperCase()})]})]}):null};var eF=s(6579);let eR=(e,t)=>({h:e.h,s:Math.max(e.s-("expert"===t?16:"hard"===t?12:10),18),l:Math.min(100-e.l+("expert"===t?20:"hard"===t?18:15),92)}),eB=(e,t)=>({h:e.h,s:Math.min(e.s+("expert"===t?16:"hard"===t?12:10),92),l:Math.max(100-e.l-("expert"===t?20:"hard"===t?18:15),18)}),eP=(e,t)=>{let s,a,l;switch(t){case"easy":s=(0,N.Iy)(20,40),a=(0,N.Iy)(15,30),l=(0,N.Iy)(20,35);break;case"medium":s=(0,N.Iy)(10,25),a=(0,N.Iy)(10,20),l=(0,N.Iy)(12,22);break;case"hard":s=(0,N.Iy)(5,15),a=(0,N.Iy)(5,12),l=(0,N.Iy)(6,14);break;case"expert":s=(0,N.Iy)(3,9),a=(0,N.Iy)(4,8),l=(0,N.Iy)(4,8)}let r=Math.random()>.5?1:-1;return{h:((e.h+r*s)%360+360)%360,s:Math.max(10,Math.min(95,e.s+r*a)),l:Math.max(10,Math.min(90,e.l+r*l))}},eW=e=>{let t;let s=(0,w.lV)(e),a=(0,N.sD)(["light-to-dark","dark-to-light"]),{r:l,g:r,b:n}=g((t="light-to-dark"===a?{h:(0,N.Iy)(0,359),s:(0,N.Iy)(50,80),l:(0,N.Iy)(25,45)}:{h:(0,N.Iy)(0,359),s:(0,N.Iy)(40,70),l:(0,N.Iy)(55,75)}).h,t.s,t.l),c=f(l,r,n),o="light-to-dark"===a?eR(t,s):eB(t,s),i=[],d=new Set;for(d.add("".concat(o.h,"-").concat(o.s,"-").concat(o.l));i.length<3;){let e=eP(o,s),t="".concat(e.h,"-").concat(e.s,"-").concat(e.l);d.has(t)||(d.add(t),i.push(e))}let h=[o,...i].map(e=>{let{r:t,g:s,b:a}=g(e.h,e.s,e.l);return{color:f(t,s,a),hsl:e}}),u=(0,N.TV)(h),m=u.findIndex(e=>e.hsl.h===o.h&&e.hsl.s===o.s&&e.hsl.l===o.l);return{originalColor:c,originalHsl:t,themeType:a,options:u,correctIndex:m,difficulty:s}},eO=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[p,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(0),{addScore:j,incrementStreak:b,resetStreak:v,updateStats:N,addMistake:S,setReviewPause:C}=(0,x.g)(),{playCorrect:k,playWrong:A}=(0,m.c)();(0,c.useEffect)(()=>{l(eW(g))},[]);let I=(0,c.useCallback)(e=>{if(p||!s)return;n(e),f(!0);let a=e===s.correctIndex,r=s.options[s.correctIndex];if(a)j("expert"===s.difficulty?210:"hard"===s.difficulty?180:"medium"===s.difficulty?140:110),b(),k();else{v(),A();let t=s.options[e];S({question:"Adapt the color for the ".concat("light-to-dark"===s.themeType?"dark":"light"," theme"),userAnswer:"H=".concat(t.hsl.h,"\xb0 S=").concat(t.hsl.s,"% L=").concat(t.hsl.l,"%"),correctAnswer:"H=".concat(r.hsl.h,"\xb0 S=").concat(r.hsl.s,"% L=").concat(r.hsl.l,"%"),explanation:"light-to-dark"===s.themeType?"For a dark theme: invert lightness (L), slightly reduce saturation (S), keep hue (H). This ensures readability on a dark background.":"For a light theme: invert lightness (L), slightly increase saturation (S), keep hue (H). This ensures contrast on a light background.",visual:{type:"colors",data:{Original:s.originalColor,Correct:r.color,"Your choice":t.color}}})}N("theme-analog",a);let c=a?1200:2400;C(c),setTimeout(()=>{t(a),y(e=>e+1),l(eW(g+1)),n(null),f(!1)},c)},[s,p,g,C]),M=(0,c.useCallback)(()=>{s&&!p&&(t(!1),y(e=>e+1),l(eW(g+1)),n(null),f(!1))},[s,p,g,t]);if((0,u.S)(M,!p),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&I(e)},!p),!s)return null;let T={"--swatch":"light-to-dark"===s.themeType?"#1a1a1a":"#ffffff","--swatch-ink":"light-to-dark"===s.themeType?"#ffffff":"#1a1a1a"};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsxs)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:["Adapt for the ","light-to-dark"===s.themeType?"dark":"light"," theme"]}),(0,a.jsx)(i.N,{hint:"light-to-dark"===s.themeType?"Invert lightness and slightly reduce saturation for dark UI.":"Invert lightness and slightly increase saturation for light UI."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:["Difficulty: ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted text-center",children:"Original (light theme)"}),(0,a.jsx)("div",{className:"bg-surface rounded-xl p-4 flex items-center justify-center h-24 border border-subtle shadow-card",children:(0,a.jsx)(d.m,{color:s.originalColor,className:"w-16 h-16 rounded-lg shadow-card border border-subtle"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted text-center",children:"Target theme"}),(0,a.jsx)("div",{className:"rounded-xl p-4 flex items-center justify-center h-24 bg-swatch text-swatch border border-subtle shadow-card",style:T,children:(0,a.jsx)("span",{className:"text-2xl",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"text-center text-xs text-muted",children:["HSL(",s.originalHsl.h,"\xb0, ",s.originalHsl.s,"%, ",s.originalHsl.l,"%)"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>I(t),selected:r===t,correct:p?t===s.correctIndex:null,padding:"none",className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"p-3 flex items-center gap-3 bg-swatch text-swatch",style:T,children:[(0,a.jsx)(d.m,{color:e.color,className:"w-12 h-12 rounded-lg shadow-card border border-subtle"}),(0,a.jsxs)("div",{className:"text-xs font-mono",children:[(0,a.jsxs)("div",{children:["H: ",e.hsl.h,"\xb0"]}),(0,a.jsxs)("div",{children:["S: ",e.hsl.s,"%"]}),(0,a.jsxs)("div",{children:["L: ",e.hsl.l,"%"]})]}),(0,a.jsxs)("span",{className:"ml-auto text-xs opacity-50 hidden sm:inline",children:["[",t+1,"]"]})]})},t))}),p&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["Correct adaptation: H=",s.options[s.correctIndex].hsl.h,"\xb0 S=",s.options[s.correctIndex].hsl.s,"% L=",s.options[s.correctIndex].hsl.l,"%"]})]})},eY=(e,t)=>({ru:e,en:t}),eZ={warm:{title:eY("Найди самый тёплый цвет","Find the warmest color"),hint:eY("Тёплые оттенки ближе к красному и жёлтому сектору.","Warm hues sit closer to the red and yellow sector.")},cool:{title:eY("Найди самый холодный цвет","Find the coolest color"),hint:eY("Холодные оттенки ближе к синему и голубому сектору.","Cool hues sit closer to the blue and cyan sector.")}},eU=eY("Тёплые тона лежат ближе к красно-жёлтой зоне, холодные — к синей. Сравни положение оттенка на круге.","Warm tones are closer to the red-yellow zone, cool ones to blue. Compare the hue position on the wheel."),eX={easy:100,medium:120,hard:150,expert:180},e_=[[70,140],[240,300]],eQ=e=>{let[t,s]=(0,N.sD)(e);return(0,N.Iy)(t,s)},eJ=(e,t)=>{let s={easy:[[0,50],[310,360]],medium:[[10,60],[300,350]],hard:[[20,70],[290,340]],expert:[[30,75],[285,330]]},a={easy:[[170,230]],medium:[[160,240]],hard:[[150,250]],expert:[[140,260]]};return{targetRanges:"warm"===e?s[t]:a[t],wrongRanges:"warm"===e?[...a[t],...e_]:[...s[t],...e_]}},e$=(e,t,s)=>{let{r:a,g:l,b:r}=g(e,t,s);return f(a,l,r)},eK=e=>{let t=(0,w.lV)(e),s=(0,N.sD)(["warm","cool"]),{targetRanges:a,wrongRanges:l}=eJ(s,t),r=[],n=new Set,c=eQ(a),o=e$(c,(0,N.Iy)(45,85),(0,N.Iy)(35,70));for(r.push({color:o,hue:c}),n.add(c);r.length<4;){let e=eQ(l);n.has(e)||(n.add(e),r.push({color:e$(e,(0,N.Iy)(35,80),(0,N.Iy)(30,75)),hue:e}))}let i=(0,N.TV)(r),d=i.findIndex(e=>e.hue===c);return{options:i,correctIndex:d,target:s,difficulty:t}},e0=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[p,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(0),{addScore:j,incrementStreak:b,resetStreak:v,updateStats:N,addMistake:C,setReviewPause:k,language:A}=(0,x.g)(),{playCorrect:I,playWrong:M}=(0,m.c)();(0,c.useEffect)(()=>{l(eK(g))},[]);let T=(0,c.useCallback)(e=>{if(p||!s)return;n(e),f(!0);let a=e===s.correctIndex;if(a)j(eX[s.difficulty]),b(),I();else{v(),M();let t=s.options[e],a=s.options[s.correctIndex],l="ru"===A?"Твой выбор":"Your choice",r="ru"===A?"Правильный":"Correct";C({question:(0,S.N)(eZ[s.target].title,A),userAnswer:"Hue ".concat(t.hue,"\xb0"),correctAnswer:"Hue ".concat(a.hue,"\xb0"),explanation:(0,S.N)(eU,A),visual:{type:"colors",data:{[l]:t.color,[r]:a.color}}})}N("color-temperature",a);let r=a?1200:2400;k(r),setTimeout(()=>{t(a),y(e=>e+1),l(eK(g+1)),n(null),f(!1)},r)},[s,p,g,k]),L=(0,c.useCallback)(()=>{s&&!p&&(t(!1),y(e=>e+1),l(eK(g+1)),n(null),f(!1))},[s,p,g,t]);return((0,u.S)(L,!p),(0,h.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&T(e)},!p),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,S.N)(eZ[s.target].title,A)}),(0,a.jsx)(i.N,{hint:(0,S.N)(eZ[s.target].hint,A)}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(A,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:s.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>T(t),selected:r===t,correct:p?t===s.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(d.m,{color:e.color,className:"w-full h-24 rounded-xl border border-subtle shadow-card"}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},"".concat(e.color,"-").concat(t)))}),p&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["ru"===A?"Правильный оттенок":"Correct hue",": Hue ",s.options[s.correctIndex].hue,"\xb0"]})]}):null},e1=[300,400,500,600,700,800],e2={300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold"},e3={easy:100,medium:120,hard:150,expert:180},e5=e=>{if("easy"===e)return(0,N.TV)([300,400,700,800]);if("medium"===e)return(0,N.sD)([[300,400,600,800],[300,500,600,800],[300,500,700,800],[400,500,700,800]]);let t="expert"===e?(0,N.sD)([1,2]):(0,N.sD)([0,1,2]);return e1.slice(t,t+4)},e4=(e,t)=>{let s=(0,w.lV)(e),a=(0,N.sD)(["heavier","lighter"]),l=e5(s),r=(0,N.c4)(t),n=l.indexOf("heavier"===a?Math.max(...l):Math.min(...l));return{weights:l,correctIndex:n,mode:a,text:r,difficulty:s}},e6=e=>{let{onAnswer:t}=e,[s,l]=(0,c.useState)(null),[r,n]=(0,c.useState)(null),[d,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(0),{addScore:y,incrementStreak:j,resetStreak:b,updateStats:v,addMistake:N,setReviewPause:C,language:k}=(0,x.g)(),{playCorrect:A,playWrong:I}=(0,m.c)();(0,c.useEffect)(()=>{l(e4(f,k))},[k]);let M=(0,c.useCallback)(e=>{if(d||!s)return;n(e),p(!0);let a=e===s.correctIndex;if(a)y(e3[s.difficulty]),j(),A();else{b(),I();let t=s.weights[s.correctIndex],a=s.weights[e];N({question:"ru"===k?"heavier"===s.mode?"Найди самый жирный текст":"Найди самый лёгкий текст":"heavier"===s.mode?"Find the heaviest text":"Find the lightest text",userAnswer:"ru"===k?"Вес ".concat(a):"Weight ".concat(a),correctAnswer:"ru"===k?"Вес ".concat(t):"Weight ".concat(t),explanation:"ru"===k?"Сравни визуальную толщину штрихов: больший вес делает буквы заметно массивнее.":"Compare stroke thickness: heavier weights make letters noticeably bolder."})}v("font-weight",a);let r=a?1200:2400;C(r),setTimeout(()=>{t(a),g(e=>e+1),l(e4(f+1,k)),n(null),p(!1)},r)},[s,d,f,C,k]),T=(0,c.useCallback)(()=>{s&&!d&&(t(!1),g(e=>e+1),l(e4(f+1,k)),n(null),p(!1))},[s,d,f,t,k]);return((0,u.S)(T,!d),(0,h.A)(e=>{e<((null==s?void 0:s.weights.length)||0)&&M(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:"ru"===k?"heavier"===s.mode?"Найди самый жирный текст":"Найди самый лёгкий текст":"heavier"===s.mode?"Find the heaviest text":"Find the lightest text"}),(0,a.jsx)(i.N,{hint:"ru"===k?"Сравни толщину штриха: более жирный выглядит темнее и массивнее.":"Compare stroke thickness: heavier weights look darker and more massive."}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(k,"difficultyLabel"),": ",(0,w.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.weights.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>M(t),selected:r===t,correct:d?t===s.correctIndex:null,children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(H.E.span,{className:"text-2xl text-strong ".concat(e2[e]),initial:{opacity:0},animate:{opacity:1},children:s.text}),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},e))}),d&&(0,a.jsxs)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["ru"===k?"Вес правильного варианта":"Correct weight",": ",s.weights[s.correctIndex]]})]}):null};var e8=s(996),e9=s(6926);let e7=(e,t)=>"string"==typeof e?e:(0,S.N)(e,t),te=(e,t)=>{if(e.palette&&e.palette.length>0){let s=e.label?e7(e.label,t):"";return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1",children:e.palette.map((e,t)=>(0,a.jsx)(d.m,{color:e,className:"w-8 h-8 rounded-lg border border-subtle"},"".concat(e,"-").concat(t)))}),s&&(0,a.jsx)("span",{className:"text-xs text-soft",children:s})]})}if(e.color){let s=e.label?e7(e.label,t):e.color;return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(d.m,{color:e.color,className:"w-full h-20 rounded-xl border border-subtle shadow-card"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:s})]})}if("number"==typeof e.size){let s=Math.min(e.size,32),l=e.label?e7(e.label,t):"".concat(e.size,"px");return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-strong ".concat((0,G.rS)(s,"text-[32px]")),children:"Aa"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:l})]})}return(0,a.jsx)("span",{className:"text-sm text-strong",children:e.label?e7(e.label,t):""})},tt={ru:"Вариант",en:"Option"},ts=(e,t)=>e.label?e7(e.label,t):e.color?e.color:e.palette?e.palette.join(", "):"number"==typeof e.size?"".concat(e.size,"px"):tt[t],ta=e=>{var t,s,l,r;let{gameId:n,onAnswer:d}=e,{addScore:p,incrementStreak:f,resetStreak:g,updateStats:y,addMistake:j,language:b,avoidRepeats:v,setReviewPause:C}=(0,x.g)(),{playCorrect:k,playWrong:A}=(0,m.c)(),[I,M]=(0,c.useState)(0),[T,L]=(0,c.useState)(null),[G,q]=(0,c.useState)(!1),E=e9.u[n]||[],z=(0,c.useMemo)(()=>(0,N.TV)(E.map((e,t)=>t)),[E.length]),D=z.length>0?v?z[I]:z[I%z.length]:-1,V="number"==typeof D?E[D]:null,F=(0,c.useMemo)(()=>{if(!V)return null;let e=(0,N.TV)(V.options.map((e,t)=>t)),t=e.map(e=>V.options[e]),s=e.indexOf(V.correctIndex);return{question:V,options:t,correctIndex:s}},[V]),R=(0,c.useCallback)(e=>{if(!F||G)return;L(e),q(!0);let t=e===F.correctIndex;if(t)p(e8.Wp[n].pointsPerCorrect),f(),k();else{var s,a,l,r,c,o;g(),A();let t=F.options[e],n=F.options[F.correctIndex];j({question:e7(F.question.prompt,b),userAnswer:ts(t,b),correctAnswer:ts(n,b),explanation:e7(F.question.explanation,b),visual:t.color||n.color?{type:"colors",data:{Correct:n.color||"",Selected:t.color||""}}:t.palette||n.palette?{type:"colors",data:{"Correct 1":(null===(s=n.palette)||void 0===s?void 0:s[0])||"","Correct 2":(null===(a=n.palette)||void 0===a?void 0:a[1])||"","Correct 3":(null===(l=n.palette)||void 0===l?void 0:l[2])||"","Selected 1":(null===(r=t.palette)||void 0===r?void 0:r[0])||"","Selected 2":(null===(c=t.palette)||void 0===c?void 0:c[1])||"","Selected 3":(null===(o=t.palette)||void 0===o?void 0:o[2])||""}}:void 0})}y(n,t);let i=t?1200:2400;C(i),setTimeout(()=>{d(t),M(e=>e+1),L(null),q(!1)},i)},[F,G,n,b,C]),B=(0,c.useCallback)(()=>{F&&!G&&(d(!1),M(e=>e+1),L(null),q(!1))},[F,G,d]);if((0,u.S)(B,!G),(0,h.v)({1:()=>F&&F.options.length>0&&R(0),2:()=>F&&F.options.length>1&&R(1),3:()=>F&&F.options.length>2&&R(2),4:()=>F&&F.options.length>3&&R(3),5:()=>F&&F.options.length>4&&R(4),6:()=>F&&F.options.length>5&&R(5),Digit1:()=>F&&F.options.length>0&&R(0),Digit2:()=>F&&F.options.length>1&&R(1),Digit3:()=>F&&F.options.length>2&&R(2),Digit4:()=>F&&F.options.length>3&&R(3),Digit5:()=>F&&F.options.length>4&&R(4),Digit6:()=>F&&F.options.length>5&&R(5)},!G),!F)return(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,S.t)(b,"noQuestionsTitle")}),(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,S.t)(b,"noQuestionsHint")})]});let P=null!==(t=F.question.difficulty)&&void 0!==t?t:(0,w.lV)(I),W=F.options.length<=4?"grid-cols-2":"grid-cols-2 sm:grid-cols-3",O=null!==(s=F.question.imageContainerClass)&&void 0!==s?s:"flex justify-center",Y=null!==(l=F.question.imageFrameClass)&&void 0!==l?l:"w-full max-w-2xl aspect-[4/3]",Z=null!==(r=F.question.imageClass)&&void 0!==r?r:"object-cover";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:e7(F.question.prompt,b)}),(0,a.jsx)(i.N,{hint:F.question.helper?e7(F.question.helper,b):void 0}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(b,"difficultyLabel"),": ",(0,w.Yy)(P)]})]}),(0,a.jsx)("div",{className:O,children:(0,a.jsx)("div",{className:"overflow-hidden rounded-2xl border border-subtle shadow-card ".concat(Y),children:(0,a.jsx)("img",{src:F.question.imageSrc,alt:e7(F.question.imageAlt,b),className:"w-full h-full ".concat(Z),loading:"lazy",decoding:"async"})})}),F.question.imageSource&&(0,a.jsxs)("div",{className:"text-center text-xs text-soft",children:[(0,S.t)(b,"imageSourceLabel"),":"," ",F.question.imageSource.url?(0,a.jsx)("a",{href:F.question.imageSource.url,target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:e7(F.question.imageSource.label,b)}):e7(F.question.imageSource.label,b)]}),(0,a.jsx)("div",{className:"grid gap-3 ".concat(W),children:F.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>R(t),selected:T===t,correct:G?t===F.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[te(e,b),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},"".concat(e.label,"-").concat(t)))}),G&&(0,a.jsx)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:e7(F.question.explanation,b)})]})},tl=e=>{let t=t=>"string"==typeof t?t:(0,S.N)(t,e);return[...eF.S.map((t,s)=>({id:"quiz-".concat(s),sourceGameId:"quiz",prompt:(0,S.N)(t.question,e),helper:(0,S.N)(t.explanation,e),explanation:(0,S.N)(t.explanation,e),options:t.options.map(t=>({label:(0,S.N)(t,e)})),correctIndex:t.correctIndex,difficulty:t.difficulty})),...Object.entries(e9.u).flatMap(e=>{let[s,a]=e;return a.map(e=>({id:"".concat(s,"-").concat(e.id),sourceGameId:s,prompt:t(e.prompt),helper:e.helper?t(e.helper):void 0,explanation:t(e.explanation),options:e.options.map(e=>({...e,label:e.label?t(e.label):void 0})),correctIndex:e.correctIndex,difficulty:e.difficulty,imageSrc:e.imageSrc,imageAlt:t(e.imageAlt),imageSource:e.imageSource?{...e.imageSource,label:t(e.imageSource.label)}:void 0,imageContainerClass:e.imageContainerClass,imageFrameClass:e.imageFrameClass,imageClass:e.imageClass}))})]},tr=e=>{if(e.palette&&e.palette.length>0)return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1",children:e.palette.map((e,t)=>(0,a.jsx)(d.m,{color:e,className:"w-8 h-8 rounded-lg border border-subtle"},"".concat(e,"-").concat(t)))}),e.label&&(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label})]});if(e.color)return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(d.m,{color:e.color,className:"w-full h-20 rounded-xl border border-subtle shadow-card"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label||e.color})]});if("number"==typeof e.size){let t=Math.min(e.size,32);return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-strong ".concat((0,G.rS)(t,"text-[32px]")),children:"Aa"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label||"".concat(e.size,"px")})]})}return(0,a.jsx)("span",{className:"text-sm text-strong",children:e.label})},tn={ru:"Вариант",en:"Option"},tc=(e,t)=>e.label?e.label:e.color?e.color:e.palette?e.palette.join(", "):"number"==typeof e.size?"".concat(e.size,"px"):tn[t],to=e=>{var t,s,l,r;let{onAnswer:n,totalQuestions:d}=e,{addScore:p,incrementStreak:f,resetStreak:g,updateStats:y,addMistake:j,language:b,avoidRepeats:v,setReviewPause:C}=(0,x.g)(),{playCorrect:k,playWrong:A}=(0,m.c)(),[I,M]=(0,c.useState)(0),[T,L]=(0,c.useState)(null),[G,q]=(0,c.useState)(!1),E=e8.Wp["long-test"].pointsPerCorrect,z=(0,c.useMemo)(()=>tl(b),[b]),D=v&&z.length>0?Math.min(d,z.length):d,V=(0,c.useMemo)(()=>0===z.length||0===D?[]:v?(0,N.TV)(z.map((e,t)=>t)).slice(0,D):Array.from({length:D},()=>Math.floor(Math.random()*z.length)),[z.length,D,v])[I],F="number"==typeof V?z[V]:null,R=(0,c.useMemo)(()=>{if(!F)return null;let e=(0,N.TV)(F.options.map((e,t)=>t)),t=e.map(e=>F.options[e]),s=e.indexOf(F.correctIndex);return{...F,options:t,correctIndex:s}},[F]),B=(0,c.useCallback)(e=>{if(!R||G)return;L(e),q(!0);let t=e===R.correctIndex;if(t)p(E),f(),k();else{var s,a,l,r,c,o;g(),A();let t=R.options[e],n=R.options[R.correctIndex];j({question:R.prompt,userAnswer:tc(t,b),correctAnswer:tc(n,b),explanation:R.explanation,visual:t.color||n.color?{type:"colors",data:{Correct:n.color||"",Selected:t.color||""}}:t.palette||n.palette?{type:"colors",data:{"Correct 1":(null===(s=n.palette)||void 0===s?void 0:s[0])||"","Correct 2":(null===(a=n.palette)||void 0===a?void 0:a[1])||"","Correct 3":(null===(l=n.palette)||void 0===l?void 0:l[2])||"","Selected 1":(null===(r=t.palette)||void 0===r?void 0:r[0])||"","Selected 2":(null===(c=t.palette)||void 0===c?void 0:c[1])||"","Selected 3":(null===(o=t.palette)||void 0===o?void 0:o[2])||""}}:void 0})}y("long-test",t);let i=t?1200:2400;C(i),setTimeout(()=>{n(t),M(e=>e+1),L(null),q(!1)},i)},[R,G,b,C]),P=(0,c.useCallback)(()=>{R&&!G&&(n(!1),M(e=>e+1),L(null),q(!1))},[R,G,n]);if((0,u.S)(P,!G),(0,h.v)({1:()=>R&&R.options.length>0&&B(0),2:()=>R&&R.options.length>1&&B(1),3:()=>R&&R.options.length>2&&B(2),4:()=>R&&R.options.length>3&&B(3),5:()=>R&&R.options.length>4&&B(4),6:()=>R&&R.options.length>5&&B(5),Digit1:()=>R&&R.options.length>0&&B(0),Digit2:()=>R&&R.options.length>1&&B(1),Digit3:()=>R&&R.options.length>2&&B(2),Digit4:()=>R&&R.options.length>3&&B(3),Digit5:()=>R&&R.options.length>4&&B(4),Digit6:()=>R&&R.options.length>5&&B(5)},!G),!R)return(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:(0,S.t)(b,"noQuestionsTitle")}),(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,S.t)(b,"noQuestionsHint")})]});let W=null!==(t=R.difficulty)&&void 0!==t?t:(0,w.lV)(I),O=R.options.some(e=>e.color||e.palette||"number"==typeof e.size),Y=R.options.length<=4?"grid-cols-2":"grid-cols-2 sm:grid-cols-3",Z=null!==(s=R.imageContainerClass)&&void 0!==s?s:"flex justify-center",U=null!==(l=R.imageFrameClass)&&void 0!==l?l:"w-full max-w-2xl aspect-[4/3]",X=null!==(r=R.imageClass)&&void 0!==r?r:"object-cover";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-display font-semibold tracking-tight",children:R.prompt}),(0,a.jsx)(i.N,{hint:R.helper}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,S.t)(b,"difficultyLabel"),": ",(0,w.Yy)(W)]})]}),R.imageSrc&&(0,a.jsx)("div",{className:Z,children:(0,a.jsx)("div",{className:"overflow-hidden rounded-2xl border border-subtle shadow-card ".concat(U),children:(0,a.jsx)("img",{src:R.imageSrc,alt:R.imageAlt||"",className:"w-full h-full ".concat(X),loading:"lazy",decoding:"async"})})}),R.imageSource&&(0,a.jsxs)("div",{className:"text-center text-xs text-soft",children:[(0,S.t)(b,"imageSourceLabel"),":"," ",R.imageSource.url?(0,a.jsx)("a",{href:R.imageSource.url,target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:R.imageSource.label}):R.imageSource.label]}),O?(0,a.jsx)("div",{className:"grid gap-3 ".concat(Y),children:R.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>B(t),selected:T===t,correct:G?t===R.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[tr(e),(0,a.jsxs)("span",{className:"hidden sm:inline text-xs text-soft",children:["[",t+1,"]"]})]})},"".concat(e.label,"-").concat(t)))}):(0,a.jsx)("div",{className:"flex flex-col gap-2 sm:gap-3",children:R.options.map((e,t)=>(0,a.jsx)(o.Z,{onClick:()=>B(t),selected:T===t,correct:G?t===R.correctIndex:null,className:"min-h-[56px]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-surface-2 rounded-full flex items-center justify-center text-sm font-mono text-muted",children:t+1}),(0,a.jsx)("span",{children:tc(e,b)})]})},"".concat(e.label,"-").concat(t)))}),G&&(0,a.jsx)(H.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:R.explanation})]})};var ti=s(9376);let td=eF.S.length+Object.values(e9.u).reduce((e,t)=>e+t.length,0);function th(e){var t,s;let{gameId:n,GameComponent:o,nextGame:i}=e,[d,h]=(0,c.useState)(0),[u,m]=(0,c.useState)(0),{customMode:p,customQuestions:f,avoidRepeats:g}=(0,x.g)(),y=(null===(t=f[n])||void 0===t?void 0:t.length)||0,j=!!p[n]&&y>0,b=e9.y.includes(n)&&(null===(s=e9.u[n])||void 0===s?void 0:s.length)||0,v=j?y:"quiz"===n?eF.S.length:b,N=(0,c.useCallback)(e=>{h(e=>e+1),e&&m(e=>e+1)},[]);return(0,a.jsx)(l.s,{gameId:n,totalChallenges:g&&v>0?Math.min(10,v):10,currentChallenge:d,correctCount:u,onRestart:()=>{h(0),m(0)},nextGame:i,children:j?(0,a.jsx)(r.mo,{gameId:n,onAnswer:N}):(0,a.jsx)(o,{onAnswer:N})})}function tu(e){let{nextGame:t}=e,[s,r]=(0,c.useState)(0),[n,o]=(0,c.useState)(0),{avoidRepeats:i,longTestLength:d}=(0,x.g)(),h=i&&td>0?Math.min(d,td):d,u=(0,c.useCallback)(e=>{r(e=>e+1),e&&o(e=>e+1)},[]);return(0,a.jsx)(l.s,{gameId:"long-test",totalChallenges:h,currentChallenge:s,correctCount:n,onRestart:()=>{r(0),o(0)},nextGame:t,children:(0,a.jsx)(to,{totalQuestions:h,onAnswer:u})})}function tm(e){let{gameId:t}=e,s=(0,ti.useSearchParams)(),[l,r]=(0,c.useState)(!1);(0,c.useEffect)(()=>{r(!0)},[]);let o=(0,c.useMemo)(()=>{let e=s.get("next");if(!e)return[];try{let t=JSON.parse(e);if(!Array.isArray(t))return[];return t.filter(e=>!!e8.Wp[e])}catch(e){return[]}},[s]),i=o.length>0?{id:o[0],queue:o.slice(1)}:null;if(!l)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,a.jsx)(n.Skeleton,{className:"h-8 w-32"}),(0,a.jsx)(n.Skeleton,{className:"h-40 w-full rounded-2xl"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(n.Skeleton,{className:"h-20 w-full rounded-xl"}),(0,a.jsx)(n.Skeleton,{className:"h-20 w-full rounded-xl"})]}),(0,a.jsx)(n.Skeleton,{className:"h-10 w-full rounded-xl"})]})});switch(t){case"color-compare":return(0,a.jsx)(th,{gameId:t,GameComponent:L,nextGame:i});case"font-size":return(0,a.jsx)(th,{gameId:t,GameComponent:F,nextGame:i});case"guess-font":return(0,a.jsx)(th,{gameId:t,GameComponent:O,nextGame:i});case"color-params":return(0,a.jsx)(th,{gameId:t,GameComponent:$,nextGame:i});case"color-temperature":return(0,a.jsx)(th,{gameId:t,GameComponent:e0,nextGame:i});case"accessibility":return(0,a.jsx)(th,{gameId:t,GameComponent:ex,nextGame:i});case"palette-error":return(0,a.jsx)(th,{gameId:t,GameComponent:ev,nextGame:i});case"size-sequence":return(0,a.jsx)(th,{gameId:t,GameComponent:eT,nextGame:i});case"complementary":return(0,a.jsx)(th,{gameId:t,GameComponent:eH,nextGame:i});case"guess-hex":return(0,a.jsx)(th,{gameId:t,GameComponent:eE,nextGame:i});case"guess-params":return(0,a.jsx)(th,{gameId:t,GameComponent:eV,nextGame:i});case"quiz":return(0,a.jsx)(th,{gameId:t,GameComponent:eF.A,nextGame:i});case"theme-analog":return(0,a.jsx)(th,{gameId:t,GameComponent:eO,nextGame:i});case"font-weight":return(0,a.jsx)(th,{gameId:t,GameComponent:e6,nextGame:i});case"long-test":return(0,a.jsx)(tu,{nextGame:i});default:if(e9.y.includes(t))return(0,a.jsx)(th,{gameId:t,GameComponent:e=>(0,a.jsx)(ta,{gameId:t,onAnswer:e.onAnswer}),nextGame:i});return null}}}},function(e){e.O(0,[699,883,681,600,77,971,117,744],function(){return e(e.s=6847)}),_N_E=e.O()}]);