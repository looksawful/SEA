(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[184],{6847:function(e,t,s){Promise.resolve().then(s.bind(s,9822))},9822:function(e,t,s){"use strict";s.d(t,{GamePageClient:function(){return eO}});var a=s(7437),l=s(6371),r=s(367),c=s(4350),n=s(2265),i=s(521),o=s(2099),d=s(3782),m=s(5911),h=s(4018),x=s(8832);let u=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},f=(e,t,s)=>"#"+[e,t,s].map(e=>{let t=Math.round(Math.max(0,Math.min(255,e))).toString(16);return 1===t.length?"0"+t:t}).join(""),p=(e,t,s)=>{let a,l,r;if(e/=360,s/=100,0==(t/=100))a=l=r=s;else{let c=(e,t,s)=>(s<0&&(s+=1),s>1&&(s-=1),s<1/6)?e+(t-e)*6*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e,n=s<.5?s*(1+t):s+t-s*t,i=2*s-n;a=c(i,n,e+1/3),l=c(i,n,e),r=c(i,n,e-1/3)}return{r:Math.round(255*a),g:Math.round(255*l),b:Math.round(255*r)}},y=()=>({h:Math.floor(360*Math.random()),s:Math.floor(60*Math.random())+40,l:Math.floor(50*Math.random())+25}),g=e=>(e+180)%360,j=(e,t,s)=>{let[a,l,r]=[e,t,s].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return .2126*a+.7152*l+.0722*r},v=(e,t)=>{let s=u(e),a=u(t),l=j(s.r,s.g,s.b),r=j(a.r,a.g,a.b);return(Math.max(l,r)+.05)/(Math.min(l,r)+.05)};var N=s(2746),b=s(3821);let w={brighter:{title:"Какой цвет ярче?",helper:"Сравни светлоту (L): у яркого цвета значение L выше.",axis:"l",target:"max"},darker:{title:"Какой цвет темнее?",helper:"Сравни светлоту (L): у темного цвета значение L ниже.",axis:"l",target:"min"},saturated:{title:"Какой цвет насыщеннее?",helper:"Сравни насыщенность (S): у насыщенного цвета значение S выше.",axis:"s",target:"max"},muted:{title:"Какой цвет более приглушённый?",helper:"Сравни насыщенность (S): у приглушённого цвета значение S ниже.",axis:"s",target:"min"}},I={easy:26,medium:16,hard:10,expert:6},S={easy:100,medium:120,hard:150,expert:180},A=(e,t,s)=>{let a=new Set([e[t]]),l="l"===t?12:15,r="l"===t?92:95;for(;a.size<4;){let c=Math.floor(Math.random()*s*2)-s;0!==c&&a.add((0,N.uZ)(e[t]+c,l,r))}return(0,N.TV)([...a]).map(s=>{let a={...e,[t]:s},{r:l,g:r,b:c}=p(a.h,a.s,a.l);return{color:f(l,r,c),hsl:a}})},C=(e,t,s)=>{let a=e.map(e=>e.hsl[t]);return a.indexOf("max"===s?Math.max(...a):Math.min(...a))},k=e=>{let t=(0,b.lV)(e),s=(0,N.sD)(["brighter","darker","saturated","muted"]),a=w[s],l=I[t],r=y();r.s=(0,N.uZ)(r.s,35,85),r.l=(0,N.uZ)(r.l,28,78);let c=A(r,a.axis,l),n=C(c,a.axis,a.target);return{compareType:s,difficulty:t,options:c,correctIndex:n}},M=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[u,f]=(0,n.useState)(!1),[p,y]=(0,n.useState)(0),{addScore:g,incrementStreak:j,resetStreak:v,updateStats:N,addMistake:I}=(0,x.g)(),{playCorrect:A,playWrong:C}=(0,h.c)();(0,n.useEffect)(()=>{l(k(0))},[]);let M=(0,n.useCallback)(e=>{if(!s||u)return;c(e),f(!0);let a=e===s.correctIndex;if(a)g(S[s.difficulty]),j(),A();else{v(),C();let t=w[s.compareType],a=s.options[s.correctIndex],l=s.options[e],r="l"===t.axis?"L":"S";I({question:t.title,userAnswer:"Вариант ".concat(e+1),correctAnswer:"Вариант ".concat(s.correctIndex+1),explanation:"У правильного варианта ".concat(r,"=").concat(a.hsl[t.axis]).concat("%",", у выбранного ").concat(r,"=").concat(l.hsl[t.axis]).concat("%",". ").concat(t.helper),visual:{type:"colors",data:{Correct:a.color,Selected:l.color}}})}N("color-compare",a),setTimeout(()=>{t(a);let e=p+1;y(e),l(k(e)),c(null),f(!1)},1e3)},[s,u,p]);if((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&M(e)},!u),!s)return null;let T=w[s.compareType];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:T.title}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>M(t),selected:r===t,correct:u?t===s.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(d.m,{color:e.color,className:"w-full h-24 rounded-xl border border-subtle shadow-card"}),(0,a.jsxs)("span",{className:"text-xs text-soft",children:["[",t+1,"]"]})]})},e.color))}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:T.helper})]})};var T=s(4155);let H={modular:[12,14,16,18,20,24,30,36,48,60,72],linear:[12,14,16,18,20,22,24,26,28,30,32],ios:[11,13,15,17,20,22,28,34],material:[10,12,14,16,20,24,34,48,60],bootstrap:[12,14,16,20,24,28,32,36,48],editorial:[14,16,18,22,26,32,40,52,64],compact:[10,11,12,13,14,15,16,17,18]},E=["Типографика","Design System","Визуальный баланс","Негативное пространство","Композиция","Гармония цвета","Иерархия","Консистентность","Читаемость","Контраст","Ритм и паттерн","Модульная сетка","Выравнивание","Доступность","Интерфейс","Пропорции","Баланс","Контекст","Гарнитура","Распознавание","Навигация","Привычка","Сетка","Ритм","Градация","Группа","Отклик","Тон","Динамика"],L=(e,t,s)=>{let a;let l=t.indexOf(e);switch(s){case"easy":a=[e,t[Math.max(0,l-2)]||e-8,t[Math.min(t.length-1,l+2)]||e+8,t[Math.max(0,l-3)]||e-12];break;case"medium":a=[e,t[Math.max(0,l-1)]||e-3,t[Math.min(t.length-1,l+1)]||e+3,e+(Math.random()>.5?4:-4)];break;case"hard":a=[e,e+1,e-1,e+2];break;case"expert":a=[e,e+1,e-1,e+(Math.random()>.5?2:-2)]}return(0,N.TV)([...new Set(a.map(Math.round).filter(e=>e>0))]).slice(0,4)},G=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[f,p]=(0,n.useState)(0),[y,g]=(0,n.useState)([]),j=(0,n.useRef)(0),{addScore:v,incrementStreak:w,resetStreak:I,updateStats:S,addMistake:A}=(0,x.g)(),{playCorrect:C,playWrong:k}=(0,h.c)();(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://fish-text.ru/get?type=sentence&number=20"),t=await e.json();if("success"===t.status&&t.text){let e=t.text.split(/[.!?]+/).filter(e=>e.trim().length>3&&e.trim().length<30);if(e.length>0){g(e.map(e=>e.trim()));return}}}catch(e){}try{let e=await fetch("https://baconipsum.com/api/?type=all-meat&sentences=15"),t=await e.json();if(Array.isArray(t)&&t[0]){let e=t[0].split(" ").filter(e=>e.length>2),s=[];for(let t=0;t<e.length-1;t+=2)s.push(e.slice(t,t+2).join(" "));if(s.length>0){g(s);return}}}catch(e){}g((0,N.TV)([...E]))})()},[]);let M=(0,n.useCallback)(e=>{let t;let s=(0,b.lV)(e),a=Object.keys(H),l=(0,N.sD)(a),r=H[l],c="hard"===s?r.filter(e=>e>=14&&e<=36):r.filter(e=>e>=12&&e<=48),n=(0,N.sD)(c);y.length>0?(t=y[j.current%y.length],j.current++):t=(0,N.sD)(E);let i=L(n,r,s);return i.includes(n)||(i[0]=n),{size:n,text:t,options:(0,N.TV)(i),difficulty:s,scale:l}},[y]);(0,n.useEffect)(()=>{(y.length>0||0===f)&&l(M(f))},[y]);let G=(0,n.useCallback)(e=>{if(d||!s)return;c(e),u(!0);let a=s.options[e],r=a===s.size;r?(v("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),w(),C()):(I(),k(),A({question:'Какой размер шрифта? (текст: "'.concat(s.text,'")'),userAnswer:"".concat(a,"px"),correctAnswer:"".concat(s.size,"px"),explanation:"Разница между ".concat(a,"px и ").concat(s.size,"px составляет ").concat(Math.abs(a-s.size),"px. Тренируйте глаз на модульных шкалах: ").concat(H.modular.slice(0,6).join(", "),"...")})),S("font-size",r),setTimeout(()=>{t(r);let e=f+1;p(e),l(M(e)),c(null),u(!1)},1e3)},[s,d,f,M]);return((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&G(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"Какой это размер шрифта?"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"bg-surface-2 rounded-2xl p-8 flex items-center justify-center min-h-40 border border-subtle shadow-card",children:(0,a.jsx)(i.E.span,{className:"font-medium text-strong select-none text-center ".concat((0,T.rS)(s.size)),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:s.text},s.text)}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>G(t),selected:r===t,correct:d?e===s.size:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("span",{className:"font-mono text-lg",children:[e,"px"]}),(0,a.jsxs)("span",{className:"text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["Правильный размер: ",(0,a.jsxs)("span",{className:"font-mono font-medium",children:[s.size,"px"]}),(0,a.jsxs)("span",{className:"text-xs block mt-1 text-soft",children:["Шкала: ",s.scale]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"text-soft",children:"Загрузка..."})})},D=[{name:"Manrope",family:"Manrope, sans-serif",category:"sans-serif",characteristics:"Современный гротеск с мягкой геометрией"},{name:"Space Grotesk",family:'"Space Grotesk", sans-serif',category:"display",characteristics:"Выразительный гротеск с широкими пропорциями"},{name:"Inter",family:"Inter, sans-serif",category:"sans-serif",characteristics:"Геометрический гротеск с открытыми формами"},{name:"Roboto",family:"Roboto, sans-serif",category:"sans-serif",characteristics:"Механистичный гротеск от Google"},{name:"Open Sans",family:'"Open Sans", sans-serif',category:"sans-serif",characteristics:"Гуманистический гротеск с открытыми формами"},{name:"Lato",family:"Lato, sans-serif",category:"sans-serif",characteristics:"Тёплый гротеск с полукруглыми деталями"},{name:"Montserrat",family:"Montserrat, sans-serif",category:"sans-serif",characteristics:"Геометрический гротеск с прямыми штрихами"},{name:"Poppins",family:"Poppins, sans-serif",category:"sans-serif",characteristics:"Геометрический гротеск с круглыми формами"},{name:"Nunito",family:"Nunito, sans-serif",category:"sans-serif",characteristics:"Округлённый гротеск"},{name:"Source Sans Pro",family:'"Source Sans Pro", sans-serif',category:"sans-serif",characteristics:"Гуманистический гротеск от Adobe"},{name:"Playfair Display",family:'"Playfair Display", serif',category:"serif",characteristics:"Контрастная антиква в стиле переходного периода"},{name:"Merriweather",family:"Merriweather, serif",category:"serif",characteristics:"Экранная антиква с массивными засечками"},{name:"Lora",family:"Lora, serif",category:"serif",characteristics:"Современная антиква с умеренным контрастом"},{name:"PT Serif",family:'"PT Serif", serif',category:"serif",characteristics:"Русская антиква с мягкими формами"},{name:"Fira Code",family:'"Fira Code", monospace',category:"monospace",characteristics:"Моноширинный шрифт с лигатурами"},{name:"JetBrains Mono",family:'"JetBrains Mono", monospace',category:"monospace",characteristics:"Моноширинный с увеличенной высотой строчных"},{name:"Source Code Pro",family:'"Source Code Pro", monospace',category:"monospace",characteristics:"Моноширинный гротеск от Adobe"}],V=e=>{let t;let s=(0,b.lV)(e),a=(0,N.sD)(D),l=(0,N.c4)();"easy"===s?t=D.filter(e=>e.category!==a.category&&e.name!==a.name):"medium"===s?t=D.filter(e=>e.name!==a.name):(t=D.filter(e=>e.category===a.category&&e.name!==a.name)).length<3&&(t=D.filter(e=>e.name!==a.name));let r=(0,N.TV)([a,...(0,N.TV)(t).slice(0,3)]);return{font:a,text:l,options:r,difficulty:s}},z=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[f,p]=(0,n.useState)(0),{addScore:y,incrementStreak:g,resetStreak:j,updateStats:v,addMistake:N}=(0,x.g)(),{playCorrect:w,playWrong:I}=(0,h.c)();(0,n.useEffect)(()=>{l(V(f))},[]);let S=(0,n.useCallback)(e=>{if(d||!s)return;c(e),u(!0);let a=s.options[e],r=a.name===s.font.name;r?(y("expert"===s.difficulty?220:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),g(),w()):(j(),I(),N({question:"Какой это шрифт?",userAnswer:a.name,correctAnswer:s.font.name,explanation:"".concat(s.font.name," — ").concat(s.font.characteristics,". ").concat(a.name," — ").concat(a.characteristics,'. Обратите внимание на форму букв "a", "g", "e" и характер засечек.')})),v("guess-font",r),setTimeout(()=>{t(r),p(e=>e+1),l(V(f+1)),c(null),u(!1)},1200)},[s,d,f]);return((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&S(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"Какой это шрифт?"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"bg-surface-2 rounded-2xl p-8 flex items-center justify-center min-h-40 border border-subtle shadow-card",children:(0,a.jsx)(i.E.span,{style:{"--sample-font":s.font.family},className:"font-sample text-[48px] text-strong select-none",initial:{opacity:0},animate:{opacity:1},children:s.text})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>S(t),selected:r===t,correct:d?e.name===s.font.name:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-soft ml-2",children:["[",t+1,"]"]}),(0,a.jsx)("div",{className:"text-xs text-soft mt-1",children:e.category})]})},t))}),d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsx)("div",{className:"font-medium",children:s.font.name}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:s.font.characteristics})]})]}):null},q={hue:"Hue (H)",saturation:"Saturation (S)",lightness:"Lightness (L)"},F={hue:"Hue is the position on the color wheel: 0\xb0 — red, 60\xb0 — yellow, 120\xb0 — green, 180\xb0 — cyan, 240\xb0 — blue, 300\xb0 — magenta",saturation:"Saturation shows color intensity: 0% — gray, 100% — pure color",lightness:"Lightness is the amount of white/black: 0% — black, 50% — pure color, 100% — white"},P=(e,t,s)=>{let a;switch(s){case"easy":a="hue"===t?60:25;break;case"medium":a="hue"===t?30:15;break;case"hard":a="hue"===t?15:8;break;case"expert":a="hue"===t?8:5}let l=new Set([e]);for(;l.size<4;){let s=Math.floor(Math.random()*a*2)-a;0===s&&(s=a);let r=e+s;r="hue"===t?(r%360+360)%360:Math.max(5,Math.min(95,r)),l.add(r)}return(0,N.TV)([...l])},Y=e=>{let t;let s=(0,N.sD)(["hue","saturation","lightness"]),a=y(),{r:l,g:r,b:c}=p(a.h,a.s,a.l),n=f(l,r,c);switch(s){case"hue":t=a.h;break;case"saturation":t=a.s;break;case"lightness":t=a.l}let i=P(t,s,e);return{mode:"value",color:n,hsl:a,paramType:s,options:i,correctValue:t,difficulty:e}},O=e=>{let t;let s=(0,N.sD)(["hue","saturation","lightness"]),a=y();switch(e){case"easy":t="hue"===s?60:30;break;case"medium":t="hue"===s?35:18;break;case"hard":t="hue"===s?20:12;break;case"expert":t="hue"===s?12:8}let l=Math.random()>.5?1:-1,r={...a};"hue"===s?r.h=((r.h+l*t)%360+360)%360:"saturation"===s?r.s=Math.max(10,Math.min(95,r.s+l*t)):r.l=Math.max(10,Math.min(90,r.l+l*t));let c=p(a.h,a.s,a.l),n=p(r.h,r.s,r.l);return{mode:"shift",baseColor:f(c.r,c.g,c.b),baseHsl:a,targetColor:f(n.r,n.g,n.b),targetHsl:r,paramType:s,options:(0,N.TV)(["hue","saturation","lightness"]),difficulty:e}},B=e=>{let t=(0,b.lV)(e);return"easy"!==t&&Math.random()>.45?O(t):Y(t)},R=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[u,f]=(0,n.useState)(!1),[p,y]=(0,n.useState)(0),{addScore:g,incrementStreak:j,resetStreak:v,updateStats:N,addMistake:w}=(0,x.g)(),{playCorrect:I,playWrong:S}=(0,h.c)();(0,n.useEffect)(()=>{l(B(p))},[]);let A=(0,n.useCallback)(e=>{if(u||!s)return;c(e),f(!0);let a="value"===s.mode?s.options[e]===s.correctValue:s.options[e]===s.paramType;if(a)g("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),j(),I();else if(v(),S(),"value"===s.mode){let t="hue"===s.paramType?"\xb0":"%",a=s.options[e];w({question:"Determine the ".concat(q[s.paramType]," of the color"),userAnswer:"".concat(a).concat(t),correctAnswer:"".concat(s.correctValue).concat(t),explanation:"".concat(F[s.paramType],". Full HSL values for this color: H=").concat(s.hsl.h,"\xb0, S=").concat(s.hsl.s,"%, L=").concat(s.hsl.l,"%"),visual:{type:"colors",data:{Color:s.color}}})}else w({question:"Что изменилось между двумя цветами?",userAnswer:q[s.options[e]],correctAnswer:q[s.paramType],explanation:"".concat(F[s.paramType],". Исходный цвет: H=").concat(s.baseHsl.h,"\xb0, S=").concat(s.baseHsl.s,"%, L=").concat(s.baseHsl.l,"%."),visual:{type:"colors",data:{"Цвет A":s.baseColor,"Цвет B":s.targetColor}}});N("color-params",a),setTimeout(()=>{t(a),y(e=>e+1),l(B(p+1)),c(null),f(!1)},1e3)},[s,u,p]);return((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&A(e)},!u),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"value"===s.mode?"Determine ".concat(q[s.paramType]):"Что изменилось между цветами?"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Difficulty: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:"value"===s.mode?(0,a.jsx)(i.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card"})}):(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(i.E.div,{className:"w-28 h-28",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.baseColor,className:"w-full h-full rounded-2xl shadow-card"})}),(0,a.jsx)(i.E.div,{className:"w-28 h-28",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.targetColor,className:"w-full h-full rounded-2xl shadow-card"})})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>A(t),selected:r===t,correct:u?"value"===s.mode?e===s.correctValue:e===s.paramType:null,children:"value"===s.mode?(0,a.jsxs)("div",{className:"text-center font-mono text-lg",children:[e,"hue"===s.paramType?"\xb0":"%",(0,a.jsxs)("span",{className:"text-xs text-soft ml-2",children:["[",t+1,"]"]})]}):(0,a.jsxs)("div",{className:"text-center font-medium",children:[q[e],(0,a.jsxs)("span",{className:"text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),u&&(0,a.jsx)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:"value"===s.mode?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"font-mono",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:s.color.toUpperCase()})]}):(0,a.jsxs)("div",{className:"text-xs text-soft",children:["Изменение: ",q[s.paramType]," • Цвет A → Цвет B"]})})]}):null},W=e=>e>=7?"AAA":e>=4.5?"AA":e>=3?"AA Large":"Fail",_={AAA:"Contrast ≥7:1 — highest accessibility level for normal text",AA:"Contrast ≥4.5:1 — minimum standard for normal text","AA Large":"Contrast ≥3:1 — allowed only for large text (18pt+ or 14pt bold)",Fail:"Contrast <3:1 — does not meet WCAG standards"},U=(e,t)=>{let s="#ffffff"===e||"#fafafa"===e,a=0;for(;a<50;){let l=y();switch(t){case"AAA":l.l=s?Math.floor(25*Math.random())+5:Math.floor(25*Math.random())+70;break;case"AA":l.l=s?Math.floor(20*Math.random())+25:Math.floor(20*Math.random())+55;break;case"AA Large":l.l=s?Math.floor(15*Math.random())+40:Math.floor(15*Math.random())+45;break;case"Fail":l.l=s?Math.floor(20*Math.random())+55:Math.floor(20*Math.random())+25,l.s=Math.floor(30*Math.random())+20}let{r,g:c,b:n}=p(l.h,l.s,l.l),i=f(r,c,n);if(W(v(i,e))===t)return i;a++}return s?"#333333":"#cccccc"},J=e=>{let t;let s=(0,b.lV)(e),a="easy"===s?"pass-fail":"expert"===s?"large-text":(0,N.sD)(["level","pass-fail"]),l=(0,N.sD)(["#ffffff","#fafafa","#1a1a1a","#0a0a0a","#f3f0e8","#102a43"]),r=["AAA","AA","AA Large","Fail"],c=U(l,(0,N.sD)(r)),n=v(c,l),i=W(n),o=n>=4.5,d=n>=3,m="pass-fail"===a?o?"AA":"Fail":"large-text"===a?d?"AA":"Fail":i;"pass-fail"===a||"large-text"===a?t=(0,N.TV)(["AA","Fail"]):"easy"===s?(t=(0,N.TV)(["AAA","AA","Fail"])).includes(m)||(t[0]=m):t=(0,N.TV)([...r]);let h=(0,N.Jf)();return{foreground:c,background:l,contrastRatio:n,correctLevel:m,options:t.slice(0,4),text:h,difficulty:s,mode:a}},X=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[f,p]=(0,n.useState)(0),{addScore:y,incrementStreak:g,resetStreak:j,updateStats:v,addMistake:N}=(0,x.g)(),{playCorrect:w,playWrong:I}=(0,h.c)();(0,n.useEffect)(()=>{l(J(f))},[]);let S=(0,n.useCallback)(e=>{if(d||!s)return;c(e),u(!0);let a=s.options[e],r=a===s.correctLevel;if(r)y("hard"===s.difficulty?150:"medium"===s.difficulty?130:120),g(),w();else{j(),I();let e="large-text"===s.mode?"Для крупного текста требуется контраст не ниже 3:1 (AA Large).":_[s.correctLevel];N({question:"level"===s.mode?"Determine the WCAG level for this contrast":"large-text"===s.mode?"Passes for large text?":"Passes WCAG AA?",userAnswer:a,correctAnswer:s.correctLevel,explanation:"Contrast ".concat(s.contrastRatio.toFixed(2),":1. ").concat(e),visual:{type:"contrast",data:{Text:s.foreground,Background:s.background}}})}v("accessibility",r),setTimeout(()=>{t(r),p(e=>e+1),l(J(f+1)),c(null),u(!1)},1e3)},[s,d,f]);if((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&S(e)},!d),!s)return null;let A={AAA:"text-[color:var(--success)]",AA:"text-accent","AA Large":"text-[color:var(--warning)]",Fail:"text-[color:var(--danger)]"},C={"--swatch":s.background,"--swatch-ink":s.foreground};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"level"===s.mode?"Determine the WCAG level":"large-text"===s.mode?"Passes for large text?":"Passes WCAG AA?"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Difficulty: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)(i.E.div,{className:"rounded-2xl p-8 min-h-32 flex items-center justify-center bg-swatch border border-subtle shadow-card",style:C,initial:{opacity:0},animate:{opacity:1},children:(0,a.jsx)("p",{className:"text-2xl font-medium text-center text-swatch",children:s.text})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>S(t),selected:r===t,correct:d?e===s.correctLevel:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-mono text-lg ".concat(A[e]),children:"pass-fail"===s.mode||"large-text"===s.mode?"AA"===e?"Pass":"Fail":e}),(0,a.jsxs)("span",{className:"text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{className:"font-mono",children:["Contrast: ",s.contrastRatio.toFixed(2),":1"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:"large-text"===s.mode?"Для крупного текста достаточно 3:1 (AA Large).":_[s.correctLevel]})]})]})},Z={monochromatic:"монохромная",analogous:"аналоговая",complementary:"комплементарная",triadic:"триадная",split:"сплит-комплементарная",tetradic:"тетра́дная"},$={monochromatic:"Монохромная палитра использует один тон (H) с разной насыщенностью и светлостью",analogous:"Аналоговая палитра использует соседние тона на цветовом круге (\xb130\xb0)",complementary:"Комплементарная палитра использует противоположные тона (180\xb0)",triadic:"Триадная палитра использует три равноудалённых тона (120\xb0 друг от друга)",split:"Сплит-комплементарная палитра использует два тона вокруг комплементарного (\xb130\xb0)",tetradic:"Тетрадная палитра использует две пары комплементарных тонов (через 90\xb0)"},K=(e,t,s)=>{let a=[];switch(e){case"monochromatic":for(let e=0;e<s;e++)a.push({h:t,s:40+(0,N.Iy)(0,40),l:25+12*e+(0,N.Iy)(-5,5)});break;case"analogous":for(let e=0;e<s;e++){let l=(e-Math.floor(s/2))*20;a.push({h:(t+l+360)%360,s:50+(0,N.Iy)(0,30),l:45+(0,N.Iy)(-10,10)})}break;case"complementary":for(let e=0;e<s;e++){let l=e>=s/2;a.push({h:l?(t+180)%360:t,s:50+(0,N.Iy)(0,30),l:40+(0,N.Iy)(0,20)})}break;case"triadic":for(let e=0;e<s;e++){let s=120*Math.floor(e/2);a.push({h:(t+s)%360,s:50+(0,N.Iy)(0,30),l:45+(0,N.Iy)(-5,10)})}break;case"split":{let e=[(t+150)%360,(t+210)%360];for(let l=0;l<s;l++){let s=0===l?t:e[l%e.length];a.push({h:s,s:45+(0,N.Iy)(0,30),l:40+(0,N.Iy)(-5,12)})}break}case"tetradic":{let e=[0,90,180,270];for(let l=0;l<s;l++){let s=(t+e[l%e.length])%360;a.push({h:s,s:45+(0,N.Iy)(0,30),l:40+(0,N.Iy)(-5,12)})}}}return a},Q=(e,t,s)=>{let a;switch(s){case"easy":a=(t+90+(0,N.Iy)(30,60))%360;break;case"medium":a=(t+60+(0,N.Iy)(20,40))%360;break;case"hard":a=(t+40+(0,N.Iy)(10,25))%360;break;case"expert":a=(t+30+(0,N.Iy)(8,16))%360}return{h:a,s:50+(0,N.Iy)(0,30),l:45+(0,N.Iy)(-5,15)}},ee=e=>{let t=(0,b.lV)(e),s=(0,N.sD)(["monochromatic","analogous","complementary","triadic","split","tetradic"]),a=(0,N.Iy)(0,359),l="hard"===t||"expert"===t?6:5,r=K(s,a,l-1),c=Q(s,a,t),n=(0,N.Iy)(0,l-1),i=[...r];return i.splice(n,0,c),{colors:i.map(e=>{let{r:t,g:s,b:a}=p(e.h,e.s,e.l);return f(t,s,a)}),errorIndex:n,paletteType:s,baseHue:a,difficulty:t}},et=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[f,p]=(0,n.useState)(0),{addScore:y,incrementStreak:g,resetStreak:j,updateStats:v,addMistake:N}=(0,x.g)(),{playCorrect:w,playWrong:I}=(0,h.c)();(0,n.useEffect)(()=>{l(ee(f))},[]);let S=(0,n.useCallback)(e=>{if(d||!s)return;c(e),u(!0);let a=e===s.errorIndex;a?(y("expert"===s.difficulty?220:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),g(),w()):(j(),I(),N({question:"Найди цвет, выбивающийся из ".concat(Z[s.paletteType]," палитры"),userAnswer:"Цвет ".concat(e+1),correctAnswer:"Цвет ".concat(s.errorIndex+1),explanation:"".concat($[s.paletteType],". Базовый тон палитры: ").concat(s.baseHue,"\xb0. Ошибочный цвет имеет тон, не вписывающийся в схему."),visual:{type:"colors",data:s.colors.reduce((e,t,s)=>({...e,["Цвет ".concat(s+1)]:t}),{})}})),v("palette-error",a),setTimeout(()=>{t(a),p(e=>e+1),l(ee(f+1)),c(null),u(!1)},1e3)},[s,d,f]);return((0,m.A)(e=>{e<((null==s?void 0:s.colors.length)||0)&&S(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"Найди лишний цвет"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Палитра: ",Z[s.paletteType]," • Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid gap-3 ".concat(s.colors.length>5?"grid-cols-3":"grid-cols-5"),children:s.colors.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>S(t),selected:r===t,correct:d?t===s.errorIndex:null,padding:"none",className:"aspect-square overflow-hidden",children:(0,a.jsx)(i.E.div,{className:"w-full h-full flex items-end justify-center pb-2 bg-swatch",style:{"--swatch":e},whileHover:{scale:1.05},children:(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-[color:var(--surface-1-95)] rounded text-xs font-mono",children:t+1})})},t))}),d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{children:["Ошибка в цвете ",s.errorIndex+1]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:$[s.paletteType]})]})]}):null},es={modular:"модульная",linear:"линейная",fibonacci:"Фибоначчи",golden:"золотое сечение","major-third":"major third","perfect-fourth":"perfect fourth"},ea={modular:"Модульная шкала умножает базовый размер на постоянный коэффициент (обычно 1.2-1.5)",linear:"Линейная шкала добавляет фиксированное значение к каждому следующему размеру",fibonacci:"Шкала Фибоначчи: каждое число — сумма двух предыдущих",golden:"Золотое сечение использует коэффициент 1.618 для каждого следующего размера","major-third":"Major Third масштабирует размеры по коэффициенту 1.25","perfect-fourth":"Perfect Fourth масштабирует размеры по коэффициенту 1.333"},el=(e,t)=>{let s=[];switch(e){case"modular":{let e=(0,N.sD)([1.2,1.25,1.333,1.414,1.5]);for(let a=0;a<t;a++)s.push(Math.round(16*Math.pow(e,a)));break}case"linear":{let e=(0,N.sD)([2,3,4]);for(let a=0;a<t;a++)s.push(12+a*e);break}case"fibonacci":s.push(...[8,13,21,34,55,89].slice(0,t));break;case"golden":for(let e=0;e<t;e++)s.push(Math.round(10*Math.pow(1.618,e)));break;case"major-third":for(let e=0;e<t;e++)s.push(Math.round(14*Math.pow(1.25,e)));break;case"perfect-fourth":for(let e=0;e<t;e++)s.push(Math.round(14*Math.pow(1.333,e)))}return s},er=(e,t,s)=>{let a;let l=e[t];switch(s){case"easy":a=l+(Math.random()>.5?1:-1)*(0,N.Iy)(6,10);break;case"medium":a=l+(Math.random()>.5?1:-1)*(0,N.Iy)(3,5);break;case"hard":a=l+(Math.random()>.5?1:-1)*(0,N.Iy)(1,2);break;case"expert":a=l+(Math.random()>.5?1:-1)*1}return Math.max(8,a)},ec=e=>{let t=(0,b.lV)(e),s=(0,N.sD)(["modular","linear","golden","fibonacci","major-third","perfect-fourth"]),a="hard"===t||"expert"===t?6:5,l=el(s,a),r=(0,N.Iy)(1,a-2),c=er(l,r,t),n=[...l];return n[r]=c,{sizes:n,errorIndex:r,scaleType:s,ratio:"modular"===s?1.333:"golden"===s?1.618:"major-third"===s?1.25:"perfect-fourth"===s?1.333:1,difficulty:t}},en=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[f,p]=(0,n.useState)(0),{addScore:y,incrementStreak:g,resetStreak:j,updateStats:v,addMistake:N}=(0,x.g)(),{playCorrect:w,playWrong:I}=(0,h.c)();(0,n.useEffect)(()=>{l(ec(f))},[]);let S=(0,n.useCallback)(e=>{if(d||!s)return;c(e),u(!0);let a=e===s.errorIndex,r=el(s.scaleType,s.sizes.length);a?(y("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),g(),w()):(j(),I(),N({question:"Найди ошибку в ".concat(es[s.scaleType]," шкале"),userAnswer:"Позиция ".concat(e+1," (").concat(s.sizes[e],"px)"),correctAnswer:"Позиция ".concat(s.errorIndex+1," (должно быть ").concat(r[s.errorIndex],"px, показано ").concat(s.sizes[s.errorIndex],"px)"),explanation:"".concat(ea[s.scaleType],". Правильная последовательность: ").concat(r.join(", "),"px")})),v("size-sequence",a),setTimeout(()=>{t(a),p(e=>e+1),l(ec(f+1)),c(null),u(!1)},1e3)},[s,d,f]);return((0,m.A)(e=>{e<((null==s?void 0:s.sizes.length)||0)&&S(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"Найди ошибку в шкале"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Тип: ",es[s.scaleType]," • Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-3",children:s.sizes.map((e,t)=>{let l=Math.min(e,48);return(0,a.jsx)(o.Card,{onClick:()=>S(t),selected:r===t,correct:d?t===s.errorIndex:null,className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"w-8 text-center font-mono text-sm text-soft",children:t+1}),(0,a.jsx)(i.E.span,{className:"font-medium text-strong flex-1 ".concat((0,T.rS)(l,"text-[48px]")),initial:{opacity:0},animate:{opacity:1},children:"Aa"}),(0,a.jsxs)("span",{className:"font-mono text-sm text-muted",children:[e,"px"]})]})},t)})}),d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{children:["Ошибка на позиции ",s.errorIndex+1]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:ea[s.scaleType]})]})]}):null},ei=e=>{let t;let s=(0,b.lV)(e),a="easy"===s?"complementary":(0,N.sD)(["complementary","split"]),l=y(),{r,g:c,b:n}=p(l.h,l.s,l.l),i=f(r,c,n),o=g(l.h),d=(0,N.sD)([30,-30]),m="split"===a?(o+d+360)%360:o;switch(s){case"easy":t=[(l.h+90)%360,(l.h+60)%360,(l.h+270)%360];break;case"medium":t=[(o+45)%360,(o+315)%360,(l.h+90)%360];break;case"hard":t=[(m+18)%360,(m+342)%360,(o+15)%360];break;case"expert":t=[(m+12)%360,(m+348)%360,(o+8)%360]}let h=[m,...t].map(e=>{let{r:t,g:s,b:a}=p(e,l.s,l.l);return{color:f(t,s,a),hue:e}}),x=(0,N.TV)(h),u=x.findIndex(e=>e.hue===m);return{baseColor:i,baseHsl:l,options:x,correctIndex:u,difficulty:s,mode:a,targetHue:m}},eo=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[u,f]=(0,n.useState)(!1),[p,y]=(0,n.useState)(0),{addScore:j,incrementStreak:v,resetStreak:N,updateStats:w,addMistake:I}=(0,x.g)(),{playCorrect:S,playWrong:A}=(0,h.c)();(0,n.useEffect)(()=>{l(ei(p))},[]);let C=(0,n.useCallback)(e=>{if(u||!s)return;c(e),f(!0);let a=e===s.correctIndex,r=g(s.baseHsl.h);if(a)j("expert"===s.difficulty?180:"hard"===s.difficulty?150:"medium"===s.difficulty?120:100),v(),S();else{N(),A();let t=s.options[e].hue;I({question:"split"===s.mode?"Choose the split-complementary color":"Choose the complementary color",userAnswer:"Hue ".concat(t,"\xb0 (deviation ").concat(Math.abs(t-s.targetHue),"\xb0)"),correctAnswer:"Hue ".concat(s.targetHue,"\xb0"),explanation:"split"===s.mode?"Split-complementary colors sit \xb130\xb0 from the complement. Base hue: ".concat(s.baseHsl.h,"\xb0, target: ").concat(s.targetHue,"\xb0"):"A complementary color is on the opposite side of the color wheel (180\xb0 from the base). Base hue: ".concat(s.baseHsl.h,"\xb0, complementary: ").concat(r,"\xb0"),visual:{type:"colors",data:{Base:s.baseColor,Complementary:s.options[s.correctIndex].color,"Your choice":s.options[e].color}}})}w("complementary",a),setTimeout(()=>{t(a),y(e=>e+1),l(ei(p+1)),c(null),f(!1)},1e3)},[s,u,p]);return((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&C(e)},!u),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"split"===s.mode?"Choose the split-complementary color":"Choose the complementary color"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Difficulty: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(i.E.div,{className:"w-32 h-32",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.baseColor,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsxs)("div",{className:"text-center text-sm text-muted",children:["Hue: ",s.baseHsl.h,"\xb0"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>{let l={"--swatch":e.color};return(0,a.jsx)(o.Card,{onClick:()=>C(t),selected:r===t,correct:u?t===s.correctIndex:null,padding:"none",className:"aspect-square overflow-hidden",children:(0,a.jsx)(i.E.div,{className:"w-full h-full flex items-end justify-center pb-3 bg-swatch",style:l,whileHover:{scale:1.02},children:(0,a.jsx)("span",{className:"px-2 py-1 bg-[color:var(--surface-1-95)] rounded text-xs font-mono",children:t+1})})},t)})}),u&&(0,a.jsx)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:(0,a.jsx)("div",{className:"flex justify-center gap-4",children:s.options.map((e,t)=>(0,a.jsxs)("span",{className:"font-mono",children:[t+1,": ",e.hue,"\xb0",t===s.correctIndex&&" (correct)"]},t))})})]}):null},ed=(e,t)=>{let s;let{r:a,g:l,b:r}=u(e);switch(t){case"easy":s=(0,N.Iy)(60,100);break;case"medium":s=(0,N.Iy)(30,50);break;case"hard":s=(0,N.Iy)(10,25);break;case"expert":s=(0,N.Iy)(6,14)}let c="expert"===t?(0,N.TV)([0,1,2]).slice(0,2):[(0,N.Iy)(0,2)],n=Math.random()>.5?1:-1;return f(c.includes(0)?Math.max(0,Math.min(255,a+n*s)):a,c.includes(1)?Math.max(0,Math.min(255,l+n*s)):l,c.includes(2)?Math.max(0,Math.min(255,r+n*s)):r)},em=e=>{let t=(0,b.lV)(e),s=y(),{r:a,g:l,b:r}=p(s.h,s.s,s.l),c=f(a,l,r),n=new Set;for(;n.size<3;){let e=ed(c,t);e!==c&&n.add(e)}let i=(0,N.TV)([c,...n]),o=i.indexOf(c);return{color:c,hsl:s,options:i,correctIndex:o,difficulty:t}},eh=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[f,p]=(0,n.useState)(!1),[y,g]=(0,n.useState)(0),{addScore:j,incrementStreak:v,resetStreak:N,updateStats:w,addMistake:I}=(0,x.g)(),{playCorrect:S,playWrong:A}=(0,h.c)();(0,n.useEffect)(()=>{l(em(y))},[]);let C=(0,n.useCallback)(e=>{if(f||!s)return;c(e),p(!0);let a=e===s.correctIndex;if(a)j("expert"===s.difficulty?280:"hard"===s.difficulty?250:"medium"===s.difficulty?200:150),v(),S();else{N(),A();let t=s.options[e],a=u(t),l=u(s.color);I({question:"Угадай HEX-код цвета",userAnswer:t.toUpperCase(),correctAnswer:s.color.toUpperCase(),explanation:"HEX-код состоит из трёх пар цифр (RR GG BB). Правильный: R=".concat(l.r," G=").concat(l.g," B=").concat(l.b,". Твой выбор: R=").concat(a.r," G=").concat(a.g," B=").concat(a.b,". Разница в каналах помогает различать близкие цвета."),visual:{type:"colors",data:{Правильный:s.color,"Твой выбор":t}}})}w("guess-hex",a),setTimeout(()=>{t(a),g(e=>e+1),l(em(y+1)),c(null),p(!1)},1e3)},[s,f,y]);return((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&C(e)},!f),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"Угадай HEX-код"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(i.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>C(t),selected:r===t,correct:f?e===s.color:null,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"font-mono text-lg",children:e.toUpperCase()}),(0,a.jsxs)("span",{className:"text-xs text-soft ml-2",children:["[",t+1,"]"]})]})},t))}),f&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted space-y-1",children:[(0,a.jsx)("div",{className:"font-mono",children:s.color.toUpperCase()}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]})]})]}):null},ex=(e,t)=>{let s,a,l;switch(t){case"easy":s=(0,N.Iy)(40,80),a=(0,N.Iy)(20,35),l=(0,N.Iy)(15,25);break;case"medium":s=(0,N.Iy)(20,40),a=(0,N.Iy)(10,20),l=(0,N.Iy)(8,15);break;case"hard":s=(0,N.Iy)(10,20),a=(0,N.Iy)(5,12),l=(0,N.Iy)(4,8);break;case"expert":s=(0,N.Iy)(6,12),a=(0,N.Iy)(3,7),l=(0,N.Iy)(2,5)}let r=Math.random()>.5?1:-1;return{h:((e.h+r*s)%360+360)%360,s:Math.max(10,Math.min(95,e.s+r*a)),l:Math.max(15,Math.min(85,e.l+r*l))}},eu=e=>{let t=(0,b.lV)(e),s={h:(0,N.Iy)(0,359),s:(0,N.Iy)(30,80),l:(0,N.Iy)(30,70)},{r:a,g:l,b:r}=p(s.h,s.s,s.l),c=f(a,l,r),n=new Set,i=[];for(;i.length<3;){let e=ex(s,t),a="".concat(e.h,"-").concat(e.s,"-").concat(e.l);n.has(a)||(n.add(a),i.push(e))}let o=(0,N.TV)([s,...i]),d=o.findIndex(e=>e.h===s.h&&e.s===s.s&&e.l===s.l);return{color:c,hsl:s,options:o,correctIndex:d,difficulty:t}},ef=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[u,f]=(0,n.useState)(!1),[p,y]=(0,n.useState)(0),{addScore:g,incrementStreak:j,resetStreak:v,updateStats:N,addMistake:w}=(0,x.g)(),{playCorrect:I,playWrong:S}=(0,h.c)();(0,n.useEffect)(()=>{l(eu(p))},[]);let A=(0,n.useCallback)(e=>{if(u||!s)return;c(e),f(!0);let a=e===s.correctIndex;if(a)g("expert"===s.difficulty?230:"hard"===s.difficulty?200:"medium"===s.difficulty?150:120),j(),I();else{v(),S();let t=s.options[e];w({question:"Определи HSL-параметры цвета",userAnswer:"H=".concat(t.h,"\xb0 S=").concat(t.s,"% L=").concat(t.l,"%"),correctAnswer:"H=".concat(s.hsl.h,"\xb0 S=").concat(s.hsl.s,"% L=").concat(s.hsl.l,"%"),explanation:"H (Hue) — тон на цветовом круге (0-360\xb0). S (Saturation) — насыщенность (0-100%). L (Lightness) — светлость (0-100%). Разница: H на ".concat(Math.abs(t.h-s.hsl.h),"\xb0, S на ").concat(Math.abs(t.s-s.hsl.s),"%, L на ").concat(Math.abs(t.l-s.hsl.l),"%"),visual:{type:"colors",data:{Цвет:s.color}}})}N("guess-params",a),setTimeout(()=>{t(a),y(e=>e+1),l(eu(p+1)),c(null),f(!1)},1e3)},[s,u,p]);return((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&A(e)},!u),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"Угадай HSL-параметры"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(i.E.div,{className:"w-40 h-40",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:(0,a.jsx)(d.m,{color:s.color,className:"w-full h-full rounded-2xl shadow-card border border-subtle"})})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>A(t),selected:r===t,correct:u?t===s.correctIndex:null,children:(0,a.jsxs)("div",{className:"text-center font-mono text-sm space-y-1",children:[(0,a.jsxs)("div",{children:["H: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.h,"\xb0"]})]}),(0,a.jsxs)("div",{children:["S: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.s,"%"]})]}),(0,a.jsxs)("div",{children:["L: ",(0,a.jsxs)("span",{className:"font-bold",children:[e.l,"%"]})]}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:["[",t+1,"]"]})]})},t))}),u&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:[(0,a.jsxs)("div",{className:"font-mono",children:["HSL(",s.hsl.h,"\xb0, ",s.hsl.s,"%, ",s.hsl.l,"%)"]}),(0,a.jsx)("div",{className:"text-xs mt-1 text-soft",children:s.color.toUpperCase()})]})]}):null};var ep=s(6579);let ey=(e,t)=>({h:e.h,s:Math.max(e.s-("expert"===t?16:"hard"===t?12:10),18),l:Math.min(100-e.l+("expert"===t?20:"hard"===t?18:15),92)}),eg=(e,t)=>({h:e.h,s:Math.min(e.s+("expert"===t?16:"hard"===t?12:10),92),l:Math.max(100-e.l-("expert"===t?20:"hard"===t?18:15),18)}),ej=(e,t)=>{let s,a,l;switch(t){case"easy":s=(0,N.Iy)(20,40),a=(0,N.Iy)(15,30),l=(0,N.Iy)(20,35);break;case"medium":s=(0,N.Iy)(10,25),a=(0,N.Iy)(10,20),l=(0,N.Iy)(12,22);break;case"hard":s=(0,N.Iy)(5,15),a=(0,N.Iy)(5,12),l=(0,N.Iy)(6,14);break;case"expert":s=(0,N.Iy)(3,9),a=(0,N.Iy)(4,8),l=(0,N.Iy)(4,8)}let r=Math.random()>.5?1:-1;return{h:((e.h+r*s)%360+360)%360,s:Math.max(10,Math.min(95,e.s+r*a)),l:Math.max(10,Math.min(90,e.l+r*l))}},ev=e=>{let t;let s=(0,b.lV)(e),a=(0,N.sD)(["light-to-dark","dark-to-light"]),{r:l,g:r,b:c}=p((t="light-to-dark"===a?{h:(0,N.Iy)(0,359),s:(0,N.Iy)(50,80),l:(0,N.Iy)(25,45)}:{h:(0,N.Iy)(0,359),s:(0,N.Iy)(40,70),l:(0,N.Iy)(55,75)}).h,t.s,t.l),n=f(l,r,c),i="light-to-dark"===a?ey(t,s):eg(t,s),o=[],d=new Set;for(d.add("".concat(i.h,"-").concat(i.s,"-").concat(i.l));o.length<3;){let e=ej(i,s),t="".concat(e.h,"-").concat(e.s,"-").concat(e.l);d.has(t)||(d.add(t),o.push(e))}let m=[i,...o].map(e=>{let{r:t,g:s,b:a}=p(e.h,e.s,e.l);return{color:f(t,s,a),hsl:e}}),h=(0,N.TV)(m),x=h.findIndex(e=>e.hsl.h===i.h&&e.hsl.s===i.s&&e.hsl.l===i.l);return{originalColor:n,originalHsl:t,themeType:a,options:h,correctIndex:x,difficulty:s}},eN=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[u,f]=(0,n.useState)(!1),[p,y]=(0,n.useState)(0),{addScore:g,incrementStreak:j,resetStreak:v,updateStats:N,addMistake:w}=(0,x.g)(),{playCorrect:I,playWrong:S}=(0,h.c)();(0,n.useEffect)(()=>{l(ev(p))},[]);let A=(0,n.useCallback)(e=>{if(u||!s)return;c(e),f(!0);let a=e===s.correctIndex,r=s.options[s.correctIndex];if(a)g("expert"===s.difficulty?210:"hard"===s.difficulty?180:"medium"===s.difficulty?140:110),j(),I();else{v(),S();let t=s.options[e];w({question:"Adapt the color for the ".concat("light-to-dark"===s.themeType?"dark":"light"," theme"),userAnswer:"H=".concat(t.hsl.h,"\xb0 S=").concat(t.hsl.s,"% L=").concat(t.hsl.l,"%"),correctAnswer:"H=".concat(r.hsl.h,"\xb0 S=").concat(r.hsl.s,"% L=").concat(r.hsl.l,"%"),explanation:"light-to-dark"===s.themeType?"For a dark theme: invert lightness (L), slightly reduce saturation (S), keep hue (H). This ensures readability on a dark background.":"For a light theme: invert lightness (L), slightly increase saturation (S), keep hue (H). This ensures contrast on a light background.",visual:{type:"colors",data:{Original:s.originalColor,Correct:r.color,"Your choice":t.color}}})}N("theme-analog",a),setTimeout(()=>{t(a),y(e=>e+1),l(ev(p+1)),c(null),f(!1)},1e3)},[s,u,p]);if((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&A(e)},!u),!s)return null;let C={"--swatch":"light-to-dark"===s.themeType?"#1a1a1a":"#ffffff","--swatch-ink":"light-to-dark"===s.themeType?"#ffffff":"#1a1a1a"};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("h2",{className:"text-xl font-medium",children:["Adapt for the ","light-to-dark"===s.themeType?"dark":"light"," theme"]}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Difficulty: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted text-center",children:"Original (light theme)"}),(0,a.jsx)("div",{className:"bg-surface rounded-xl p-4 flex items-center justify-center h-24 border border-subtle shadow-card",children:(0,a.jsx)(d.m,{color:s.originalColor,className:"w-16 h-16 rounded-lg shadow-card border border-subtle"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted text-center",children:"Target theme"}),(0,a.jsx)("div",{className:"rounded-xl p-4 flex items-center justify-center h-24 bg-swatch text-swatch border border-subtle shadow-card",style:C,children:(0,a.jsx)("span",{className:"text-2xl",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"text-center text-xs text-muted",children:["HSL(",s.originalHsl.h,"\xb0, ",s.originalHsl.s,"%, ",s.originalHsl.l,"%)"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>A(t),selected:r===t,correct:u?t===s.correctIndex:null,padding:"none",className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"p-3 flex items-center gap-3 bg-swatch text-swatch",style:C,children:[(0,a.jsx)(d.m,{color:e.color,className:"w-12 h-12 rounded-lg shadow-card border border-subtle"}),(0,a.jsxs)("div",{className:"text-xs font-mono",children:[(0,a.jsxs)("div",{children:["H: ",e.hsl.h,"\xb0"]}),(0,a.jsxs)("div",{children:["S: ",e.hsl.s,"%"]}),(0,a.jsxs)("div",{children:["L: ",e.hsl.l,"%"]})]}),(0,a.jsxs)("span",{className:"ml-auto text-xs opacity-50",children:["[",t+1,"]"]})]})},t))}),u&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["Correct adaptation: H=",s.options[s.correctIndex].hsl.h,"\xb0 S=",s.options[s.correctIndex].hsl.s,"% L=",s.options[s.correctIndex].hsl.l,"%"]})]})},eb={easy:100,medium:120,hard:150,expert:180},ew=[[70,140],[240,300]],eI=e=>{let[t,s]=(0,N.sD)(e);return(0,N.Iy)(t,s)},eS=(e,t)=>{let s={easy:[[0,50],[310,360]],medium:[[10,60],[300,350]],hard:[[20,70],[290,340]],expert:[[30,75],[285,330]]},a={easy:[[170,230]],medium:[[160,240]],hard:[[150,250]],expert:[[140,260]]};return{targetRanges:"warm"===e?s[t]:a[t],wrongRanges:"warm"===e?[...a[t],...ew]:[...s[t],...ew]}},eA=(e,t,s)=>{let{r:a,g:l,b:r}=p(e,t,s);return f(a,l,r)},eC=e=>{let t=(0,b.lV)(e),s=(0,N.sD)(["warm","cool"]),{targetRanges:a,wrongRanges:l}=eS(s,t),r=[],c=new Set,n=eI(a),i=eA(n,(0,N.Iy)(45,85),(0,N.Iy)(35,70));for(r.push({color:i,hue:n}),c.add(n);r.length<4;){let e=eI(l);c.has(e)||(c.add(e),r.push({color:eA(e,(0,N.Iy)(35,80),(0,N.Iy)(30,75)),hue:e}))}let o=(0,N.TV)(r),d=o.findIndex(e=>e.hue===n);return{options:o,correctIndex:d,target:s,difficulty:t}},ek=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[u,f]=(0,n.useState)(!1),[p,y]=(0,n.useState)(0),{addScore:g,incrementStreak:j,resetStreak:v,updateStats:N,addMistake:w}=(0,x.g)(),{playCorrect:I,playWrong:S}=(0,h.c)();(0,n.useEffect)(()=>{l(eC(p))},[]);let A=(0,n.useCallback)(e=>{if(u||!s)return;c(e),f(!0);let a=e===s.correctIndex;if(a)g(eb[s.difficulty]),j(),I();else{v(),S();let t=s.options[e],a=s.options[s.correctIndex];w({question:"warm"===s.target?"Найди самый тёплый цвет":"Найди самый холодный цвет",userAnswer:"Hue ".concat(t.hue,"\xb0"),correctAnswer:"Hue ".concat(a.hue,"\xb0"),explanation:"Тёплые тона лежат ближе к красно-жёлтой зоне, холодные — к синей. Сравни положение оттенка на круге.",visual:{type:"colors",data:{"Твой выбор":t.color,Правильный:a.color}}})}N("color-temperature",a),setTimeout(()=>{t(a),y(e=>e+1),l(eC(p+1)),c(null),f(!1)},1e3)},[s,u,p]);return((0,m.A)(e=>{e<((null==s?void 0:s.options.length)||0)&&A(e)},!u),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"warm"===s.target?"Найди самый тёплый цвет":"Найди самый холодный цвет"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:s.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>A(t),selected:r===t,correct:u?t===s.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(d.m,{color:e.color,className:"w-full h-24 rounded-xl border border-subtle shadow-card"}),(0,a.jsxs)("span",{className:"text-xs text-soft",children:["[",t+1,"]"]})]})},"".concat(e.color,"-").concat(t)))}),u&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["Правильный оттенок: Hue ",s.options[s.correctIndex].hue,"\xb0"]})]}):null},eM=[300,400,500,600,700,800],eT={300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold"},eH={easy:100,medium:120,hard:150,expert:180},eE=e=>{if("easy"===e)return(0,N.TV)([300,400,700,800]);if("medium"===e)return(0,N.sD)([[300,400,600,800],[300,500,600,800],[300,500,700,800],[400,500,700,800]]);let t="expert"===e?(0,N.sD)([1,2]):(0,N.sD)([0,1,2]);return eM.slice(t,t+4)},eL=e=>{let t=(0,b.lV)(e),s=(0,N.sD)(["heavier","lighter"]),a=eE(t),l=(0,N.c4)(),r=a.indexOf("heavier"===s?Math.max(...a):Math.min(...a));return{weights:a,correctIndex:r,mode:s,text:l,difficulty:t}},eG=e=>{let{onAnswer:t}=e,[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[f,p]=(0,n.useState)(0),{addScore:y,incrementStreak:g,resetStreak:j,updateStats:v,addMistake:N}=(0,x.g)(),{playCorrect:w,playWrong:I}=(0,h.c)();(0,n.useEffect)(()=>{l(eL(f))},[]);let S=(0,n.useCallback)(e=>{if(d||!s)return;c(e),u(!0);let a=e===s.correctIndex;if(a)y(eH[s.difficulty]),g(),w();else{j(),I();let t=s.weights[s.correctIndex],a=s.weights[e];N({question:"heavier"===s.mode?"Найди самый жирный текст":"Найди самый лёгкий текст",userAnswer:"Вес ".concat(a),correctAnswer:"Вес ".concat(t),explanation:"Сравни визуальную толщину штрихов: больший вес делает буквы заметно массивнее."})}v("font-weight",a),setTimeout(()=>{t(a),p(e=>e+1),l(eL(f+1)),c(null),u(!1)},1e3)},[s,d,f]);return((0,m.A)(e=>{e<((null==s?void 0:s.weights.length)||0)&&S(e)},!d),s)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"heavier"===s.mode?"Найди самый жирный текст":"Найди самый лёгкий текст"}),(0,a.jsxs)("div",{className:"text-xs text-soft mt-1",children:["Сложность: ",(0,b.Yy)(s.difficulty)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.weights.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>S(t),selected:r===t,correct:d?t===s.correctIndex:null,children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(i.E.span,{className:"text-2xl text-strong ".concat(eT[e]),initial:{opacity:0},animate:{opacity:1},children:s.text}),(0,a.jsxs)("span",{className:"text-xs text-soft",children:["[",t+1,"]"]})]})},e))}),d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:["Вес правильного варианта: ",s.weights[s.correctIndex]]})]}):null};var eD=s(996),eV=s(6926);let ez=e=>{if(e.palette&&e.palette.length>0)return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1",children:e.palette.map((e,t)=>(0,a.jsx)(d.m,{color:e,className:"w-8 h-8 rounded-lg border border-subtle"},"".concat(e,"-").concat(t)))}),e.label&&(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label})]});if(e.color)return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(d.m,{color:e.color,className:"w-full h-20 rounded-xl border border-subtle shadow-card"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label||e.color})]});if("number"==typeof e.size){let t=Math.min(e.size,32);return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-strong ".concat((0,T.rS)(t,"text-[32px]")),children:"Aa"}),(0,a.jsx)("span",{className:"text-xs text-soft",children:e.label||"".concat(e.size,"px")})]})}return(0,a.jsx)("span",{className:"text-sm text-strong",children:e.label})},eq=e=>e.label?e.label:e.color?e.color:e.palette?e.palette.join(", "):"number"==typeof e.size?"".concat(e.size,"px"):"Option",eF=e=>{var t,s,l,r;let{gameId:c,onAnswer:d}=e,{addScore:u,incrementStreak:f,resetStreak:p,updateStats:y,addMistake:g}=(0,x.g)(),{playCorrect:j,playWrong:v}=(0,h.c)(),[w,I]=(0,n.useState)(0),[S,A]=(0,n.useState)(null),[C,k]=(0,n.useState)(!1),M=eV.u[c]||[],T=(0,n.useMemo)(()=>(0,N.TV)(M.map((e,t)=>t)),[M.length]),H=T.length>0?T[w%T.length]:-1,E=H>=0?M[H]:null,L=(0,n.useCallback)(e=>{if(!E||C)return;A(e),k(!0);let t=e===E.correctIndex;if(t)u(eD.W[c].pointsPerCorrect),f(),j();else{var s,a,l,r,n,i;p(),v();let t=E.options[e],c=E.options[E.correctIndex];g({question:E.prompt,userAnswer:eq(t),correctAnswer:eq(c),explanation:E.explanation,visual:t.color||c.color?{type:"colors",data:{Correct:c.color||"",Selected:t.color||""}}:t.palette||c.palette?{type:"colors",data:{"Correct 1":(null===(s=c.palette)||void 0===s?void 0:s[0])||"","Correct 2":(null===(a=c.palette)||void 0===a?void 0:a[1])||"","Correct 3":(null===(l=c.palette)||void 0===l?void 0:l[2])||"","Selected 1":(null===(r=t.palette)||void 0===r?void 0:r[0])||"","Selected 2":(null===(n=t.palette)||void 0===n?void 0:n[1])||"","Selected 3":(null===(i=t.palette)||void 0===i?void 0:i[2])||""}}:void 0})}y(c,t),setTimeout(()=>{d(t),I(e=>e+1),A(null),k(!1)},1e3)},[E,C,c]);if((0,m.v)({1:()=>E&&E.options.length>0&&L(0),2:()=>E&&E.options.length>1&&L(1),3:()=>E&&E.options.length>2&&L(2),4:()=>E&&E.options.length>3&&L(3),5:()=>E&&E.options.length>4&&L(4),6:()=>E&&E.options.length>5&&L(5),Digit1:()=>E&&E.options.length>0&&L(0),Digit2:()=>E&&E.options.length>1&&L(1),Digit3:()=>E&&E.options.length>2&&L(2),Digit4:()=>E&&E.options.length>3&&L(3),Digit5:()=>E&&E.options.length>4&&L(4),Digit6:()=>E&&E.options.length>5&&L(5)},!C),!E)return(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-xl font-medium",children:"Вопросы скоро появятся"}),(0,a.jsx)("div",{className:"text-sm text-muted",children:"Добавь собственные вопросы в меню сверху."})]});let G=null!==(t=E.difficulty)&&void 0!==t?t:(0,b.lV)(w),D=E.options.length<=4?"grid-cols-2":"grid-cols-2 sm:grid-cols-3",V=null!==(s=E.imageContainerClass)&&void 0!==s?s:"flex justify-center",z=null!==(l=E.imageFrameClass)&&void 0!==l?l:"w-full max-w-2xl aspect-[4/3]",q=null!==(r=E.imageClass)&&void 0!==r?r:"object-cover";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:E.prompt}),E.helper&&(0,a.jsx)("div",{className:"text-xs text-soft",children:E.helper}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:["Сложность: ",(0,b.Yy)(G)]})]}),(0,a.jsx)("div",{className:V,children:(0,a.jsx)("div",{className:"overflow-hidden rounded-2xl border border-subtle shadow-card ".concat(z),children:(0,a.jsx)("img",{src:E.imageSrc,alt:E.imageAlt,className:"w-full h-full ".concat(q)})})}),E.imageSource&&(0,a.jsxs)("div",{className:"text-center text-xs text-soft",children:["Источник:"," ",E.imageSource.url?(0,a.jsx)("a",{href:E.imageSource.url,target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:E.imageSource.label}):E.imageSource.label]}),(0,a.jsx)("div",{className:"grid gap-3 ".concat(D),children:E.options.map((e,t)=>(0,a.jsx)(o.Card,{onClick:()=>L(t),selected:S===t,correct:C?t===E.correctIndex:null,padding:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[ez(e),(0,a.jsxs)("span",{className:"text-xs text-soft",children:["[",t+1,"]"]})]})},"".concat(e.label,"-").concat(t)))}),C&&(0,a.jsx)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-sm text-muted",children:E.explanation})]})};var eP=s(9376);function eY(e){var t;let{gameId:s,GameComponent:c,nextGame:i}=e,[o,d]=(0,n.useState)(0),[m,h]=(0,n.useState)(0),{customMode:u,customQuestions:f}=(0,x.g)(),p=!!u[s]&&((null===(t=f[s])||void 0===t?void 0:t.length)||0)>0,y=(0,n.useCallback)(e=>{d(e=>e+1),e&&h(e=>e+1)},[]);return(0,a.jsx)(l.s,{gameId:s,totalChallenges:10,currentChallenge:o,correctCount:m,onRestart:()=>{d(0),h(0)},nextGame:i,children:p?(0,a.jsx)(r.mo,{gameId:s,onAnswer:y}):(0,a.jsx)(c,{onAnswer:y})})}function eO(e){let{gameId:t}=e,s=(0,eP.useSearchParams)(),[l,r]=(0,n.useState)(!1);(0,n.useEffect)(()=>{r(!0)},[]);let i=(0,n.useMemo)(()=>{let e=s.get("next");if(!e)return[];try{let t=JSON.parse(e);if(!Array.isArray(t))return[];return t.filter(e=>!!eD.W[e])}catch(e){return[]}},[s]),o=i.length>0?{id:i[0],queue:i.slice(1)}:null;if(!l)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,a.jsx)(c.Skeleton,{className:"h-8 w-32"}),(0,a.jsx)(c.Skeleton,{className:"h-40 w-full rounded-2xl"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(c.Skeleton,{className:"h-20 w-full rounded-xl"}),(0,a.jsx)(c.Skeleton,{className:"h-20 w-full rounded-xl"})]}),(0,a.jsx)(c.Skeleton,{className:"h-10 w-full rounded-xl"})]})});switch(t){case"color-compare":return(0,a.jsx)(eY,{gameId:t,GameComponent:M,nextGame:o});case"font-size":return(0,a.jsx)(eY,{gameId:t,GameComponent:G,nextGame:o});case"guess-font":return(0,a.jsx)(eY,{gameId:t,GameComponent:z,nextGame:o});case"color-params":return(0,a.jsx)(eY,{gameId:t,GameComponent:R,nextGame:o});case"color-temperature":return(0,a.jsx)(eY,{gameId:t,GameComponent:ek,nextGame:o});case"accessibility":return(0,a.jsx)(eY,{gameId:t,GameComponent:X,nextGame:o});case"palette-error":return(0,a.jsx)(eY,{gameId:t,GameComponent:et,nextGame:o});case"size-sequence":return(0,a.jsx)(eY,{gameId:t,GameComponent:en,nextGame:o});case"complementary":return(0,a.jsx)(eY,{gameId:t,GameComponent:eo,nextGame:o});case"guess-hex":return(0,a.jsx)(eY,{gameId:t,GameComponent:eh,nextGame:o});case"guess-params":return(0,a.jsx)(eY,{gameId:t,GameComponent:ef,nextGame:o});case"quiz":return(0,a.jsx)(eY,{gameId:t,GameComponent:ep.A,nextGame:o});case"theme-analog":return(0,a.jsx)(eY,{gameId:t,GameComponent:eN,nextGame:o});case"font-weight":return(0,a.jsx)(eY,{gameId:t,GameComponent:eG,nextGame:o});default:if(eV.y.includes(t))return(0,a.jsx)(eY,{gameId:t,GameComponent:e=>(0,a.jsx)(eF,{gameId:t,onAnswer:e.onAnswer}),nextGame:o});return null}}}},function(e){e.O(0,[699,521,308,77,971,117,744],function(){return e(e.s=6847)}),_N_E=e.O()}]);