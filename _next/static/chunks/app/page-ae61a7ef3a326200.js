(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9177:function(e,t,s){Promise.resolve().then(s.bind(s,4081))},4081:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),l=s(2265),r=s(8614),n=s(521),c=s(9376),i=s(8832),d=s(996),o=s(2040),x=s(2099);s(7051),s(896),s(6371);var m=s(4350);s(3782),s(8443);var u=s(6769),h=s(9089);let f=e=>{let{onClose:t}=e,{soundEnabled:s,toggleSound:r,backgroundAnimation:n,setBackgroundAnimation:c,timedMode:x,setTimedMode:m,language:f,gameOrderOverride:g,setGameOrder:b,gameTagOverrides:p,setGameTags:j}=(0,i.g)(),v=(0,l.useMemo)(()=>(0,d.FO)(g),[g]),N=[{id:"design",label:(0,u.t)(f,"tagDesign")},{id:"interface",label:(0,u.t)(f,"tagInterface")},{id:"color",label:(0,u.t)(f,"tagColor")},{id:"typography",label:(0,u.t)(f,"tagTypography")},{id:"layout",label:(0,u.t)(f,"tagLayout")},{id:"photo",label:(0,u.t)(f,"tagPhoto")},{id:"accessibility",label:(0,u.t)(f,"tagAccessibility")},{id:"theory",label:(0,u.t)(f,"tagTheory")}],y=e=>{var t;return null!==(t=p[e])&&void 0!==t?t:d.Wp[e].tags},k=(e,t)=>{let s=v.indexOf(e),a=s+t;if(s<0||a<0||a>=v.length)return;let l=[...v];[l[s],l[a]]=[l[a],l[s]],b(l)},w=(e,t)=>{let s=new Set(y(e));s.has(t)?s.delete(t):s.add(t),j(e,N.filter(e=>s.has(e.id)).map(e=>e.id))};return(0,a.jsx)("div",{className:"fixed inset-0 z-30 bg-[color:var(--surface-1-95)] backdrop-blur-sm overflow-y-auto",children:(0,a.jsx)("div",{className:"max-w-xl mx-auto p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"bg-surface border border-subtle rounded-3xl shadow-card p-4 sm:p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-10 h-10 rounded-2xl bg-surface-2 border border-subtle flex items-center justify-center text-accent",children:(0,a.jsx)(h.p4t,{})}),(0,a.jsx)("h2",{className:"text-2xl font-display font-semibold tracking-tight",children:(0,u.t)(f,"settings")})]}),(0,a.jsx)(o.z,{variant:"ghost",onClick:t,children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(h.aHS,{}),(0,u.t)(f,"close")]})})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm text-muted",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-subtle bg-surface-2 px-4 py-3",children:[(0,a.jsx)("span",{children:(0,u.t)(f,"sound")}),(0,a.jsx)("button",{onClick:r,className:"text-xs font-medium text-strong bg-surface-3 border border-subtle rounded-full px-3 py-1","aria-pressed":s,children:s?(0,u.t)(f,"on"):(0,u.t)(f,"off")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-subtle bg-surface-2 px-4 py-3",children:[(0,a.jsx)("span",{children:(0,u.t)(f,"backgroundAnimation")}),(0,a.jsx)("button",{onClick:()=>c(!n),className:"text-xs font-medium text-strong bg-surface-3 border border-subtle rounded-full px-3 py-1","aria-pressed":n,children:n?(0,u.t)(f,"on"):(0,u.t)(f,"off")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-subtle bg-surface-2 px-4 py-3",children:[(0,a.jsx)("span",{children:(0,u.t)(f,"timedMode")}),(0,a.jsx)("button",{onClick:()=>m(!x),className:"text-xs font-medium text-strong bg-surface-3 border border-subtle rounded-full px-3 py-1","aria-pressed":x,children:x?(0,u.t)(f,"on"):(0,u.t)(f,"off")})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-subtle bg-surface-2 px-4 py-3 text-sm text-muted space-y-1",children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-soft",children:(0,u.t)(f,"hotkeysTitle")}),(0,a.jsx)("div",{children:(0,u.t)(f,"hotkeyStart")}),(0,a.jsx)("div",{children:(0,u.t)(f,"hotkeyPause")}),(0,a.jsx)("div",{children:(0,u.t)(f,"hotkeySkip")}),(0,a.jsx)("div",{children:(0,u.t)(f,"hotkeyShuffle")}),(0,a.jsx)("div",{children:(0,u.t)(f,"hotkeyAnswer")})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-subtle bg-surface-2 px-4 py-4 text-sm text-muted space-y-4",children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-soft",children:(0,u.t)(f,"gameOrganization")}),(0,a.jsx)("div",{className:"space-y-3",children:v.map((e,t)=>{let s=(0,u.s)(e,f),l=y(e);return(0,a.jsxs)("div",{className:"rounded-2xl border border-subtle bg-surface-3 p-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-strong",children:s.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>k(e,-1),className:"w-8 h-8 rounded-xl border border-subtle bg-surface-2 text-muted hover:text-strong flex items-center justify-center ".concat(0===t?"opacity-40 pointer-events-none":""),title:(0,u.t)(f,"moveUp"),"aria-label":(0,u.t)(f,"moveUp"),children:(0,a.jsx)(h.s$2,{})}),(0,a.jsx)("button",{onClick:()=>k(e,1),className:"w-8 h-8 rounded-xl border border-subtle bg-surface-2 text-muted hover:text-strong flex items-center justify-center ".concat(t===v.length-1?"opacity-40 pointer-events-none":""),title:(0,u.t)(f,"moveDown"),"aria-label":(0,u.t)(f,"moveDown"),children:(0,a.jsx)(h.RiI,{})})]})]}),(0,a.jsx)("div",{className:"text-xs text-soft",children:(0,u.t)(f,"gameTags")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:N.map(t=>{let s=l.includes(t.id);return(0,a.jsx)("button",{onClick:()=>w(e,t.id),className:"px-3 py-1 rounded-full border text-xs ".concat(s?"bg-surface-2 text-strong border-subtle":"bg-surface text-muted border-subtle hover:text-strong"),"aria-pressed":s,children:t.label},"".concat(e,"-").concat(t.id))})})]},e)})})]}),(0,a.jsxs)("div",{className:"grid gap-2 sm:grid-cols-3",children:[(0,a.jsxs)("a",{href:"mailto:i@lookawful.ru?subject=Awful-Exercises%20feedback",className:"inline-flex items-center justify-center gap-2 rounded-xl border border-subtle bg-surface-2 px-4 py-2 text-sm text-muted hover:text-strong hover:bg-surface-3",children:[(0,a.jsx)(h.SRX,{}),(0,u.t)(f,"feedback")]}),(0,a.jsxs)("a",{href:"https://github.com/looksawful/Awful-Exercises",target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center gap-2 rounded-xl border border-subtle bg-surface-2 px-4 py-2 text-sm text-muted hover:text-strong hover:bg-surface-3",children:[(0,a.jsx)(h.gjK,{}),(0,u.t)(f,"github")]}),(0,a.jsxs)("a",{href:"https://github.com/looksawful/Awful-Exercises/blob/main/LICENSE",target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center gap-2 rounded-xl border border-subtle bg-surface-2 px-4 py-2 text-sm text-muted hover:text-strong hover:bg-surface-3",children:[(0,a.jsx)(h.gjK,{}),(0,u.t)(f,"license")]})]})]})})})};s(4171);var g=s(367),b=s(2746),p=s(5911),j=s(6926),v=s(6579);function N(){let[e,t]=(0,l.useState)("menu"),[s,b]=(0,l.useState)(!1),[p,N]=(0,l.useState)(!1),[w,C]=(0,l.useState)(null),[S,z]=(0,l.useState)(!1),[O,P]=(0,l.useState)(""),[E,W]=(0,l.useState)("list"),[M,T]=(0,l.useState)("all"),[A,_]=(0,l.useState)("default"),[L,R]=(0,l.useState)(!1),{stats:G,bestStreak:Q,soundEnabled:I,toggleSound:D,resetAll:J,results:U,customQuestions:Z,language:q,setLanguage:H,favorites:K,toggleFavorite:V}=(0,i.g)(),F=(0,c.useRouter)(),Y="grid"===E,$=d.nP.filter(e=>K[e]),B=O.trim().toLowerCase(),X=d.nP.filter(e=>{if(L&&!K[e]||"all"!==M&&!d.Wp[e].tags.includes(M))return!1;if(!B)return!0;let t=(0,u.s)(e,q);return t.name.toLowerCase().includes(B)||t.description.toLowerCase().includes(B)}),ee=e=>[...e].sort((e,t)=>"name"===A?(0,u.s)(e,q).name.localeCompare((0,u.s)(t,q).name):"played"===A?(G.gamesPlayed[t]||0)-(G.gamesPlayed[e]||0):d.nP.indexOf(e)-d.nP.indexOf(t)),et=ee(X),es=ee($),ea=!L&&es.length>0&&"all"===M&&!B,el=ea?et.filter(e=>!K[e]):et,er=[{id:"all",label:(0,u.t)(q,"tagAll")},{id:"design",label:(0,u.t)(q,"tagDesign")},{id:"interface",label:(0,u.t)(q,"tagInterface")},{id:"color",label:(0,u.t)(q,"tagColor")},{id:"typography",label:(0,u.t)(q,"tagTypography")},{id:"layout",label:(0,u.t)(q,"tagLayout")},{id:"photo",label:(0,u.t)(q,"tagPhoto")},{id:"accessibility",label:(0,u.t)(q,"tagAccessibility")},{id:"theory",label:(0,u.t)(q,"tagTheory")}],en=e=>"quiz"===e?y(v.S):j.y.includes(e)?y(j.u[e]||[]):null,ec=e=>{var t;let s=d.Wp[e],l=(0,u.s)(e,q),r=G.gamesPlayed[e]||0,n=G.accuracy[e],c=(null===(t=Z[e])||void 0===t?void 0:t.length)||0,i=s.icon,o=en(e),m=[...U].reverse().find(t=>t.gameId===e),f=m?Math.round(m.correct/Math.max(1,m.total)*100):null,g=!!K[e];return(0,a.jsxs)(x.Z,{className:"transition-colors shadow-card min-w-0",padding:Y?"sm":"md",onClick:()=>F.push("/game/".concat(e)),children:[(0,a.jsxs)("div",{className:Y?"flex flex-col gap-3":"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"".concat(Y?"w-10 h-10":"w-12 h-12"," rounded-2xl bg-surface-2 border border-subtle flex items-center justify-center text-accent ").concat(Y?"":"flex-shrink-0"),children:(0,a.jsx)(i,{className:Y?"text-xl":"text-2xl"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:Y?"font-medium text-sm sm:text-base":"font-medium",children:l.name}),!Y&&(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,a.jsx)("span",{className:"truncate block",children:l.description})}),(0,a.jsxs)("div",{className:Y?"text-[11px] text-soft mt-2 space-y-1":"text-xs text-soft mt-2 space-y-1",children:[o?(0,a.jsxs)("div",{children:[(0,u.t)(q,"questions"),": ",o.total]}):(0,a.jsxs)("div",{children:[(0,u.t)(q,"questions"),": ",(0,u.t)(q,"generated")]}),(0,a.jsxs)("div",{children:[(0,u.t)(q,"played"),": ",r," • ",(0,u.t)(q,"accuracy"),": ",Math.round(n||0),"%"]}),!Y&&(0,a.jsxs)("div",{children:[(0,u.t)(q,"lastResult"),":"," ",m?"".concat(m.correct,"/").concat(m.total," (").concat(f,"%)"):"—"]}),!Y&&c>0&&(0,a.jsxs)("div",{children:[(0,u.t)(q,"customQuestionsCount"),": ",c]})]})]}),(0,a.jsxs)("div",{className:"grid"===E?"flex justify-between gap-2":"flex items-start gap-2 text-soft",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),V(e)},className:"w-8 h-8 rounded-xl border border-subtle bg-surface-2 text-muted hover:text-strong flex items-center justify-center","aria-pressed":g,title:(0,u.t)(q,"favorites"),children:g?(0,a.jsx)(h.QJe,{}):(0,a.jsx)(h.jJN,{})}),"grid"===E?(0,a.jsx)("div",{className:"text-soft self-center",children:(0,a.jsx)(h.Z1Y,{})}):(0,a.jsx)(h.Z1Y,{})]})]}),(0,a.jsxs)("div",{className:Y?"mt-3 grid grid-cols-2 gap-2":"mt-4 flex flex-wrap gap-2",children:[(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),C(e),N(!0)},className:"inline-flex items-center justify-center gap-2 px-3 py-2 text-xs rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors ".concat(Y?"w-full":""),children:[(0,a.jsx)(h.wEH,{className:"text-xs"}),(0,a.jsx)("span",{className:Y?"hidden sm:inline":"",children:(0,u.t)(q,"addQuestions")})]}),(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),C(e),N(!0)},className:"inline-flex items-center justify-center gap-2 px-3 py-2 text-xs rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors ".concat(Y?"w-full":""),children:[(0,a.jsx)(h.tU3,{className:"text-xs"}),(0,a.jsx)("span",{className:Y?"hidden sm:inline":"",children:(0,u.t)(q,"edit")})]})]})]},e)};return((0,l.useEffect)(()=>{b(!0)},[]),s)?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)("header",{className:"sticky top-0 z-10 border-b border-subtle bg-[color:var(--surface-1-80)] backdrop-blur",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:()=>t("menu"),className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-lg font-display font-semibold",children:(0,u.t)(q,"appName")})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{C(null),N(!0)},className:"flex items-center gap-2 px-3 py-2 text-sm rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",title:(0,u.t)(q,"customQuestions"),children:[(0,a.jsx)(h.O1O,{className:"text-base"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:(0,u.t)(q,"customQuestions")})]}),(0,a.jsxs)("button",{onClick:D,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",title:I?(0,u.t)(q,"soundOn"):(0,u.t)(q,"soundOff"),"aria-pressed":I,children:[I?(0,a.jsx)(h.rxG,{className:"text-base"}):(0,a.jsx)(h.xZH,{className:"text-base"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:I?(0,u.t)(q,"soundOn"):(0,u.t)(q,"soundOff")})]}),(0,a.jsxs)("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-xl bg-surface-2 border border-subtle text-muted hover:text-strong hover:bg-surface-3 transition-colors",title:(0,u.t)(q,"settings"),children:[(0,a.jsx)(h.p4t,{className:"text-base"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:(0,u.t)(q,"settings")})]}),(0,a.jsxs)("div",{className:"flex items-center rounded-xl border border-subtle bg-surface-2 p-1",role:"group","aria-label":(0,u.t)(q,"uiLanguage"),children:[(0,a.jsx)("button",{onClick:()=>H("ru"),className:"px-2 py-1 text-xs rounded-lg ".concat("ru"===q?"bg-surface-3 text-strong":"text-muted hover:text-strong"),"aria-pressed":"ru"===q,children:"RU"}),(0,a.jsx)("button",{onClick:()=>H("en"),className:"px-2 py-1 text-xs rounded-lg ".concat("en"===q?"bg-surface-3 text-strong":"text-muted hover:text-strong"),"aria-pressed":"en"===q,children:"EN"})]})]})]})}),(0,a.jsx)("main",{className:"flex-1 p-4 pb-24 sm:pb-4 w-full flex items-center justify-center",children:(0,a.jsxs)(r.M,{mode:"wait",children:["menu"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6 w-full max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"bg-surface border border-subtle rounded-3xl p-6 shadow-card space-y-3",children:[(0,a.jsx)(o.z,{onClick:()=>{R(!1),t("games")},fullWidth:!0,size:"lg",children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(h.hON,{className:"text-base"}),(0,u.t)(q,"chooseExercise")]})}),(0,a.jsx)(o.z,{onClick:()=>{R(!0),t("games")},variant:"secondary",fullWidth:!0,size:"lg",children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(h.QJe,{className:"text-base"}),(0,u.t)(q,"favorites")]})}),(0,a.jsx)(o.z,{onClick:()=>t("random"),variant:"secondary",fullWidth:!0,size:"lg",children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(h.AyN,{className:"text-base"}),(0,u.t)(q,"randomMode")]})}),(0,a.jsx)(o.z,{onClick:()=>t("stats"),variant:"ghost",fullWidth:!0,children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(h.NMh,{className:"text-base"}),(0,u.t)(q,"stats")]})}),(0,a.jsx)(o.z,{onClick:()=>z(!0),variant:"ghost",fullWidth:!0,children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(h.p4t,{className:"text-base"}),(0,u.t)(q,"settings")]})}),(0,a.jsx)("div",{className:"text-center text-xs text-soft pt-2 hidden sm:block",children:(0,u.t)(q,"hotkeys")})]}),G.totalGames>0&&(0,a.jsx)(x.Z,{className:"mt-8 shadow-card",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:G.totalScore.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-muted",children:(0,u.t)(q,"totalScore")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:G.totalGames}),(0,a.jsx)("div",{className:"text-xs text-muted",children:(0,u.t)(q,"games")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:Q}),(0,a.jsx)("div",{className:"text-xs text-muted",children:(0,u.t)(q,"bestStreak")})]})]})})]},"menu"),"games"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 w-full max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[(0,a.jsx)("button",{onClick:()=>t("menu"),className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(h.x_l,{})}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-display font-semibold tracking-tight flex-1",children:(0,u.t)(q,"chooseExerciseTitle")}),(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto justify-end",children:[(0,a.jsx)("button",{onClick:()=>R(!L),className:"w-9 h-9 rounded-xl border border-subtle flex items-center justify-center ".concat(L?"bg-surface-3 text-strong":"bg-surface-2 text-muted hover:text-strong"),"aria-pressed":L,title:(0,u.t)(q,"favorites"),children:L?(0,a.jsx)(h.QJe,{}):(0,a.jsx)(h.jJN,{})}),(0,a.jsx)("button",{onClick:()=>W("list"),className:"w-9 h-9 rounded-xl border border-subtle flex items-center justify-center ".concat("list"===E?"bg-surface-3 text-strong":"bg-surface-2 text-muted hover:text-strong"),"aria-pressed":"list"===E,title:(0,u.t)(q,"listView"),children:(0,a.jsx)(h.Fm7,{})}),(0,a.jsx)("button",{onClick:()=>W("grid"),className:"w-9 h-9 rounded-xl border border-subtle flex items-center justify-center ".concat("grid"===E?"bg-surface-3 text-strong":"bg-surface-2 text-muted hover:text-strong"),"aria-pressed":"grid"===E,title:(0,u.t)(q,"gridView"),children:(0,a.jsx)(h.xyo,{})})]})]}),(0,a.jsxs)("div",{className:"sticky top-3 z-10 sm:static space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl border border-subtle bg-[color:var(--surface-1-90)] backdrop-blur",children:[(0,a.jsx)(h.U41,{className:"text-muted"}),(0,a.jsx)("input",{value:O,onChange:e=>P(e.target.value),className:"flex-1 bg-transparent text-sm text-strong placeholder:text-soft focus:outline-none",placeholder:(0,u.t)(q,"searchPlaceholder"),"aria-label":(0,u.t)(q,"searchLabel")}),O.length>0&&(0,a.jsx)("button",{onClick:()=>P(""),className:"text-xs text-muted hover:text-strong",children:(0,u.t)(q,"clear")})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:er.map(e=>(0,a.jsx)("button",{onClick:()=>T(e.id),className:"px-3 py-1 rounded-full border text-xs whitespace-nowrap ".concat(M===e.id?"bg-surface-3 text-strong border-subtle":"bg-surface-2 text-muted border-subtle hover:text-strong"),"aria-pressed":M===e.id,children:e.label},e.id))}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("div",{className:"text-xs text-soft",children:(0,u.t)(q,"sort")}),(0,a.jsxs)("select",{value:A,onChange:e=>_(e.target.value),className:"text-xs bg-surface-2 border border-subtle rounded-full px-3 py-1 text-strong","aria-label":(0,u.t)(q,"sort"),children:[(0,a.jsx)("option",{value:"default",children:(0,u.t)(q,"sortDefault")}),(0,a.jsx)("option",{value:"name",children:(0,u.t)(q,"sortName")}),(0,a.jsx)("option",{value:"played",children:(0,u.t)(q,"sortPlayed")})]})]})]}),ea&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-lg font-display font-semibold tracking-tight text-strong",children:(0,u.t)(q,"favorites")}),(0,a.jsx)("div",{className:Y?"grid gap-3 grid-cols-2 sm:grid-cols-2 lg:grid-cols-3":"grid gap-3",children:es.map(ec)})]}),(0,a.jsx)("div",{className:Y?"grid gap-3 grid-cols-2 sm:grid-cols-2 lg:grid-cols-3":"grid gap-3",children:el.map(ec)}),0===X.length&&(0,a.jsx)("div",{className:"text-center text-sm text-muted py-8",children:(0,u.t)(q,"noResults")})]},"games"),"random"===e&&(0,a.jsx)("div",{className:"w-full max-w-4xl",children:(0,a.jsx)(k,{onBack:()=>t("menu")})}),"stats"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4 w-full max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>t("menu"),className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(h.x_l,{})}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-display font-semibold tracking-tight",children:(0,u.t)(q,"statsTitle")})]}),(0,a.jsx)(x.Z,{className:"shadow-card",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:G.totalScore.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,u.t)(q,"totalScore")})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:G.totalGames}),(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,u.t)(q,"gamesPlayed")})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-mono font-bold",children:Q}),(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,u.t)(q,"bestStreak")})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-mono font-bold",children:[Object.values(G.accuracy).length>0?Math.round(Object.values(G.accuracy).reduce((e,t)=>e+t,0)/Object.values(G.accuracy).length):0,"%"]}),(0,a.jsx)("div",{className:"text-sm text-muted",children:(0,u.t)(q,"averageAccuracy")})]})]})}),(0,a.jsx)("h3",{className:"text-lg font-display font-semibold tracking-tight mt-6 mb-3 text-strong",children:(0,u.t)(q,"byGames")}),(0,a.jsx)("div",{className:"space-y-2",children:d.nP.map(e=>{let t=d.Wp[e],s=G.gamesPlayed[e]||0,l=G.accuracy[e]||0,r=t.icon,n=(0,u.s)(e,q);return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-surface border border-subtle rounded-lg shadow-card",children:[(0,a.jsx)("span",{className:"w-9 h-9 rounded-xl bg-surface border border-subtle flex items-center justify-center text-accent",children:(0,a.jsx)(r,{className:"text-lg"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"text-sm font-medium truncate",children:n.name})}),(0,a.jsxs)("div",{className:"text-right text-sm",children:[(0,a.jsx)("div",{className:"font-mono",children:s}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[Math.round(l),"%"]})]})]},e)})}),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsx)(o.z,{onClick:()=>{confirm((0,u.t)(q,"resetStatsConfirm"))&&J()},variant:"danger",fullWidth:!0,children:(0,u.t)(q,"resetStats")})})]},"stats")]})}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-20 border-t border-subtle bg-[color:var(--surface-1-80)] backdrop-blur sm:hidden",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-1 px-2 py-2",children:[(0,a.jsxs)("button",{onClick:()=>t("menu"),className:"flex flex-col items-center gap-1 py-2 rounded-xl text-xs ".concat("menu"===e?"bg-surface-3 text-strong":"text-muted"),children:[(0,a.jsx)(h.xng,{className:"text-base"}),(0,u.t)(q,"home")]}),(0,a.jsxs)("button",{onClick:()=>t("games"),className:"flex flex-col items-center gap-1 py-2 rounded-xl text-xs ".concat("games"===e?"bg-surface-3 text-strong":"text-muted"),children:[(0,a.jsx)(h.hON,{className:"text-base"}),(0,u.t)(q,"gamesNav")]}),(0,a.jsxs)("button",{onClick:()=>t("random"),className:"flex flex-col items-center gap-1 py-2 rounded-xl text-xs ".concat("random"===e?"bg-surface-3 text-strong":"text-muted"),children:[(0,a.jsx)(h.AyN,{className:"text-base"}),(0,u.t)(q,"randomNav")]}),(0,a.jsxs)("button",{onClick:()=>t("stats"),className:"flex flex-col items-center gap-1 py-2 rounded-xl text-xs ".concat("stats"===e?"bg-surface-3 text-strong":"text-muted"),children:[(0,a.jsx)(h.NMh,{className:"text-base"}),(0,u.t)(q,"stats")]})]})}),p&&(0,a.jsx)(g.$g,{onClose:()=>{N(!1),C(null)},initialGameId:null!=w?w:void 0}),S&&(0,a.jsx)(f,{onClose:()=>z(!1)})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.Skeleton,{className:"h-10 w-10 rounded-2xl"}),(0,a.jsx)(m.Skeleton,{className:"h-6 w-32"})]}),(0,a.jsx)(m.Skeleton,{className:"h-32 w-full rounded-3xl"}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(m.Skeleton,{className:"h-12 w-full rounded-xl"}),(0,a.jsx)(m.Skeleton,{className:"h-12 w-full rounded-xl"}),(0,a.jsx)(m.Skeleton,{className:"h-10 w-2/3 rounded-xl"})]})]})})}let y=e=>e.reduce((e,t)=>{let s=t.difficulty||"unknown";return"easy"===s?e.easy+=1:"medium"===s?e.medium+=1:"hard"===s?e.hard+=1:"expert"===s?e.expert+=1:e.unknown+=1,e.total+=1,e},{easy:0,medium:0,hard:0,expert:0,unknown:0,total:0});function k(e){let{onBack:t}=e,s=(0,c.useRouter)(),[r,x]=(0,l.useState)([]),{language:m,longTestLength:f}=(0,i.g)(),g=()=>{x((0,b.TV)([...d.nP]))};if((0,l.useEffect)(()=>{g()},[]),(0,p.v)({r:g},!0),0===r.length)return(0,a.jsx)("div",{className:"text-muted",children:(0,u.t)(m,"loading")});let j=r[0],v=d.Wp[j].icon,N=(0,u.s)(j,m),y=r.slice(1);return(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6 w-full max-w-xl mx-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[auto,1fr,auto] items-center",children:[(0,a.jsx)("button",{onClick:t,className:"p-2 -ml-2 text-muted hover:text-strong",children:(0,a.jsx)(h.x_l,{})}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-display font-semibold tracking-tight text-center",children:(0,u.t)(m,"randomModeTitle")}),(0,a.jsx)("div",{className:"w-8"})]}),(0,a.jsxs)("div",{className:"text-center bg-surface border border-subtle rounded-3xl p-6 space-y-3 shadow-card",children:[(0,a.jsx)("div",{className:"text-xs text-muted uppercase tracking-[0.2em]",children:(0,u.t)(m,"gameOf",{current:1,total:r.length})}),(0,a.jsx)("div",{className:"text-5xl text-accent",children:(0,a.jsx)(v,{})}),(0,a.jsx)("div",{className:"text-xl font-medium",children:N.name})]}),(0,a.jsxs)("div",{className:"text-center bg-surface border border-subtle rounded-3xl p-6 space-y-4 shadow-card",children:[(0,a.jsx)("div",{className:"text-xs text-muted uppercase tracking-[0.2em]",children:(0,u.t)(m,"longTest")}),(0,a.jsx)("div",{className:"text-lg font-medium",children:(0,u.t)(m,"longTestDescription")}),(0,a.jsxs)("div",{className:"text-xs text-soft",children:[(0,u.t)(m,"questionCount"),": ",f]}),(0,a.jsx)(o.z,{onClick:()=>s.push("/game/long-test"),fullWidth:!0,children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(h.gmG,{className:"text-base"}),(0,u.t)(m,"start")]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 max-w-md mx-auto w-full",children:[(0,a.jsx)(o.z,{onClick:t,variant:"ghost",fullWidth:!0,children:(0,u.t)(m,"cancel")}),(0,a.jsx)(o.z,{onClick:()=>{let e=y.length>0?"?next=".concat(encodeURIComponent(JSON.stringify(y))):"";s.push("/game/".concat(j).concat(e))},fullWidth:!0,children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(h.gmG,{className:"text-base"}),(0,u.t)(m,"start")]})})]}),(0,a.jsx)(o.z,{onClick:g,variant:"secondary",fullWidth:!0,hotkey:"R",children:(0,a.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,a.jsx)(h.dnK,{className:"text-base"}),(0,u.t)(m,"reroll")]})}),(0,a.jsx)("div",{className:"flex gap-1 justify-center",children:r.map((e,t)=>(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(0===t?"bg-[color:var(--accent)]":"bg-surface-3")},t))})]})}},8443:function(e,t,s){"use strict";s.d(t,{Q:function(){return r}});var a=s(7437),l=s(7648);let r=e=>{let{href:t,children:s,variant:r="primary",size:n="md",fullWidth:c=!1,className:i=""}=e;return(0,a.jsx)(l.default,{href:t,className:"".concat("inline-flex items-center justify-center gap-2 relative font-medium rounded-xl transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[color:var(--accent)] focus-visible:ring-offset-[color:var(--surface-0)]"," ").concat({primary:"bg-accent text-white hover:bg-[color:var(--accent-strong)]",secondary:"bg-surface-2 text-strong hover:bg-surface-3",ghost:"bg-transparent text-muted hover:bg-surface-2",danger:"bg-[color:var(--danger)] text-white hover:bg-[color:var(--danger-strong)]"}[r]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n]," ").concat(c?"w-full":""," ").concat(i),children:s})}}},function(e){e.O(0,[699,883,681,648,600,77,971,117,744],function(){return e(e.s=9177)}),_N_E=e.O()}]);